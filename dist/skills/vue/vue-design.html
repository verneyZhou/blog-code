<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从0到1搭建Monorepo组件库项目 | 一葦</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/icons/favicon.ico">
    <link rel="manifest" href="/blog/js/mainfest.json">
    <link rel="stylesheet" href="/blog/styles/css/style.css">
    <script type="utf-8" src="/blog/js/disable-user-zoom.js"></script>
    <meta name="description" content="这是一苇的前端技术博客哦~">
    <meta name="Author" content="一苇">
    <meta rel="keywords" content="verneyzhou,阿沐,一苇,前端,docs.verneyzhou-code.cn,博客,fe,IT,技术">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.61668f40.css" as="style"><link rel="preload" href="/blog/assets/js/app.76fa57e6.js" as="script"><link rel="preload" href="/blog/assets/js/3.a2a245ac.js" as="script"><link rel="preload" href="/blog/assets/js/149.0e52c725.js" as="script"><link rel="preload" href="/blog/assets/js/4.245b4373.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.2c3fb9b8.js"><link rel="prefetch" href="/blog/assets/js/100.84bf5092.js"><link rel="prefetch" href="/blog/assets/js/101.6b905b71.js"><link rel="prefetch" href="/blog/assets/js/102.7ece9162.js"><link rel="prefetch" href="/blog/assets/js/103.01775736.js"><link rel="prefetch" href="/blog/assets/js/104.c9b72bdf.js"><link rel="prefetch" href="/blog/assets/js/105.b7ceaf1e.js"><link rel="prefetch" href="/blog/assets/js/106.5321c092.js"><link rel="prefetch" href="/blog/assets/js/107.dfde808a.js"><link rel="prefetch" href="/blog/assets/js/108.76e55255.js"><link rel="prefetch" href="/blog/assets/js/109.b6b8f78e.js"><link rel="prefetch" href="/blog/assets/js/11.d8db7424.js"><link rel="prefetch" href="/blog/assets/js/110.03440fcf.js"><link rel="prefetch" href="/blog/assets/js/111.7001d092.js"><link rel="prefetch" href="/blog/assets/js/112.2c3ec8a9.js"><link rel="prefetch" href="/blog/assets/js/113.17aec38b.js"><link rel="prefetch" href="/blog/assets/js/114.d5c86b19.js"><link rel="prefetch" href="/blog/assets/js/115.c5e7ed6d.js"><link rel="prefetch" href="/blog/assets/js/116.c48f3f00.js"><link rel="prefetch" href="/blog/assets/js/117.46f33ca4.js"><link rel="prefetch" href="/blog/assets/js/118.891ade5b.js"><link rel="prefetch" href="/blog/assets/js/119.58a54ba4.js"><link rel="prefetch" href="/blog/assets/js/12.b6309f61.js"><link rel="prefetch" href="/blog/assets/js/120.e96a1ea7.js"><link rel="prefetch" href="/blog/assets/js/121.ba217794.js"><link rel="prefetch" href="/blog/assets/js/122.fa395dd6.js"><link rel="prefetch" href="/blog/assets/js/123.8dee52e0.js"><link rel="prefetch" href="/blog/assets/js/124.5964facb.js"><link rel="prefetch" href="/blog/assets/js/125.2b5713d4.js"><link rel="prefetch" href="/blog/assets/js/126.0b020030.js"><link rel="prefetch" href="/blog/assets/js/127.73d8db3a.js"><link rel="prefetch" href="/blog/assets/js/128.e350bccb.js"><link rel="prefetch" href="/blog/assets/js/129.6efe4916.js"><link rel="prefetch" href="/blog/assets/js/13.8df65d8d.js"><link rel="prefetch" href="/blog/assets/js/130.2feb4a2a.js"><link rel="prefetch" href="/blog/assets/js/131.ebf7c589.js"><link rel="prefetch" href="/blog/assets/js/132.2fd4ea82.js"><link rel="prefetch" href="/blog/assets/js/133.e9db689a.js"><link rel="prefetch" href="/blog/assets/js/134.8c37cc25.js"><link rel="prefetch" href="/blog/assets/js/135.ae783483.js"><link rel="prefetch" href="/blog/assets/js/136.92671aff.js"><link rel="prefetch" href="/blog/assets/js/137.0db285b2.js"><link rel="prefetch" href="/blog/assets/js/138.c73abe07.js"><link rel="prefetch" href="/blog/assets/js/139.41626f14.js"><link rel="prefetch" href="/blog/assets/js/14.b950268f.js"><link rel="prefetch" href="/blog/assets/js/140.99fdcd5c.js"><link rel="prefetch" href="/blog/assets/js/141.fbc8e614.js"><link rel="prefetch" href="/blog/assets/js/142.4f34e195.js"><link rel="prefetch" href="/blog/assets/js/143.127a9850.js"><link rel="prefetch" href="/blog/assets/js/144.0f65824d.js"><link rel="prefetch" href="/blog/assets/js/145.1ee8c5fc.js"><link rel="prefetch" href="/blog/assets/js/146.3ba627c8.js"><link rel="prefetch" href="/blog/assets/js/147.09e3708c.js"><link rel="prefetch" href="/blog/assets/js/148.5e218851.js"><link rel="prefetch" href="/blog/assets/js/15.030ef122.js"><link rel="prefetch" href="/blog/assets/js/150.d3ae11a8.js"><link rel="prefetch" href="/blog/assets/js/151.817b960d.js"><link rel="prefetch" href="/blog/assets/js/152.5a77e7f4.js"><link rel="prefetch" href="/blog/assets/js/153.5bc9a462.js"><link rel="prefetch" href="/blog/assets/js/154.d4c7af79.js"><link rel="prefetch" href="/blog/assets/js/155.dc03710e.js"><link rel="prefetch" href="/blog/assets/js/156.5e872d85.js"><link rel="prefetch" href="/blog/assets/js/157.9e2becea.js"><link rel="prefetch" href="/blog/assets/js/158.a2942e85.js"><link rel="prefetch" href="/blog/assets/js/159.26c63404.js"><link rel="prefetch" href="/blog/assets/js/16.cfb1a53b.js"><link rel="prefetch" href="/blog/assets/js/160.96d3beaa.js"><link rel="prefetch" href="/blog/assets/js/161.c34c5b2e.js"><link rel="prefetch" href="/blog/assets/js/162.45223b4c.js"><link rel="prefetch" href="/blog/assets/js/163.dca039a1.js"><link rel="prefetch" href="/blog/assets/js/164.c188755b.js"><link rel="prefetch" href="/blog/assets/js/165.774591a1.js"><link rel="prefetch" href="/blog/assets/js/166.0bb7199e.js"><link rel="prefetch" href="/blog/assets/js/167.6c729c82.js"><link rel="prefetch" href="/blog/assets/js/168.9ddae43f.js"><link rel="prefetch" href="/blog/assets/js/169.a041747e.js"><link rel="prefetch" href="/blog/assets/js/17.7f17682b.js"><link rel="prefetch" href="/blog/assets/js/170.b70b623c.js"><link rel="prefetch" href="/blog/assets/js/171.4b0257b9.js"><link rel="prefetch" href="/blog/assets/js/172.7f4c2d3c.js"><link rel="prefetch" href="/blog/assets/js/173.b3b75dfa.js"><link rel="prefetch" href="/blog/assets/js/174.52d7ea40.js"><link rel="prefetch" href="/blog/assets/js/175.beb33995.js"><link rel="prefetch" href="/blog/assets/js/176.95e06720.js"><link rel="prefetch" href="/blog/assets/js/177.f491f17d.js"><link rel="prefetch" href="/blog/assets/js/178.71c66889.js"><link rel="prefetch" href="/blog/assets/js/179.ca760d60.js"><link rel="prefetch" href="/blog/assets/js/18.cbfdeb09.js"><link rel="prefetch" href="/blog/assets/js/180.b50d733c.js"><link rel="prefetch" href="/blog/assets/js/181.335287be.js"><link rel="prefetch" href="/blog/assets/js/182.8cad2bdb.js"><link rel="prefetch" href="/blog/assets/js/183.37a5fb7a.js"><link rel="prefetch" href="/blog/assets/js/184.e920bd7f.js"><link rel="prefetch" href="/blog/assets/js/185.0ffd8f98.js"><link rel="prefetch" href="/blog/assets/js/186.b9b7e58a.js"><link rel="prefetch" href="/blog/assets/js/187.ee242116.js"><link rel="prefetch" href="/blog/assets/js/188.a7f885d1.js"><link rel="prefetch" href="/blog/assets/js/189.41087ead.js"><link rel="prefetch" href="/blog/assets/js/19.355e9671.js"><link rel="prefetch" href="/blog/assets/js/190.0ff0d636.js"><link rel="prefetch" href="/blog/assets/js/191.b0c298a8.js"><link rel="prefetch" href="/blog/assets/js/192.e1fdc41d.js"><link rel="prefetch" href="/blog/assets/js/193.a12e8cc4.js"><link rel="prefetch" href="/blog/assets/js/194.552a7d72.js"><link rel="prefetch" href="/blog/assets/js/195.65c94003.js"><link rel="prefetch" href="/blog/assets/js/196.7ecad629.js"><link rel="prefetch" href="/blog/assets/js/197.769eb8f4.js"><link rel="prefetch" href="/blog/assets/js/198.417e877e.js"><link rel="prefetch" href="/blog/assets/js/199.c198e821.js"><link rel="prefetch" href="/blog/assets/js/20.925de35d.js"><link rel="prefetch" href="/blog/assets/js/200.aaf0c7da.js"><link rel="prefetch" href="/blog/assets/js/201.b9b528a4.js"><link rel="prefetch" href="/blog/assets/js/202.dc2130c4.js"><link rel="prefetch" href="/blog/assets/js/203.494c16a2.js"><link rel="prefetch" href="/blog/assets/js/204.5451a8b2.js"><link rel="prefetch" href="/blog/assets/js/205.3a9d9143.js"><link rel="prefetch" href="/blog/assets/js/206.8f218f53.js"><link rel="prefetch" href="/blog/assets/js/207.e286efec.js"><link rel="prefetch" href="/blog/assets/js/208.b15e7ceb.js"><link rel="prefetch" href="/blog/assets/js/209.8be13a1b.js"><link rel="prefetch" href="/blog/assets/js/21.73aa97dc.js"><link rel="prefetch" href="/blog/assets/js/210.8af7e1c3.js"><link rel="prefetch" href="/blog/assets/js/211.cf4f7aba.js"><link rel="prefetch" href="/blog/assets/js/212.b1e8078a.js"><link rel="prefetch" href="/blog/assets/js/213.99b7c2dd.js"><link rel="prefetch" href="/blog/assets/js/214.3073fbf3.js"><link rel="prefetch" href="/blog/assets/js/215.7884f71b.js"><link rel="prefetch" href="/blog/assets/js/216.fc4df39d.js"><link rel="prefetch" href="/blog/assets/js/217.dcf694ab.js"><link rel="prefetch" href="/blog/assets/js/218.91ac665b.js"><link rel="prefetch" href="/blog/assets/js/219.04f0e072.js"><link rel="prefetch" href="/blog/assets/js/22.a5e696f3.js"><link rel="prefetch" href="/blog/assets/js/220.ec5aa358.js"><link rel="prefetch" href="/blog/assets/js/221.eeacfb35.js"><link rel="prefetch" href="/blog/assets/js/222.6d68084c.js"><link rel="prefetch" href="/blog/assets/js/223.6d1ff62a.js"><link rel="prefetch" href="/blog/assets/js/224.b1682e38.js"><link rel="prefetch" href="/blog/assets/js/23.e58011e2.js"><link rel="prefetch" href="/blog/assets/js/24.9a66d8cd.js"><link rel="prefetch" href="/blog/assets/js/25.bbfbc411.js"><link rel="prefetch" href="/blog/assets/js/26.0a58cb04.js"><link rel="prefetch" href="/blog/assets/js/27.30ff8122.js"><link rel="prefetch" href="/blog/assets/js/28.1b138f63.js"><link rel="prefetch" href="/blog/assets/js/29.8706dde6.js"><link rel="prefetch" href="/blog/assets/js/30.7354bbdd.js"><link rel="prefetch" href="/blog/assets/js/31.42f329d7.js"><link rel="prefetch" href="/blog/assets/js/32.89b2e87d.js"><link rel="prefetch" href="/blog/assets/js/33.e762c9a2.js"><link rel="prefetch" href="/blog/assets/js/34.c4cc6afc.js"><link rel="prefetch" href="/blog/assets/js/35.a3e5fba6.js"><link rel="prefetch" href="/blog/assets/js/36.03e0ebe8.js"><link rel="prefetch" href="/blog/assets/js/37.ec453e24.js"><link rel="prefetch" href="/blog/assets/js/38.cf1f5fcf.js"><link rel="prefetch" href="/blog/assets/js/39.1156b141.js"><link rel="prefetch" href="/blog/assets/js/40.d33ba184.js"><link rel="prefetch" href="/blog/assets/js/41.2820e583.js"><link rel="prefetch" href="/blog/assets/js/42.c088f38a.js"><link rel="prefetch" href="/blog/assets/js/43.a832abeb.js"><link rel="prefetch" href="/blog/assets/js/44.9391c80d.js"><link rel="prefetch" href="/blog/assets/js/45.a0235304.js"><link rel="prefetch" href="/blog/assets/js/46.9730b825.js"><link rel="prefetch" href="/blog/assets/js/47.56fd5076.js"><link rel="prefetch" href="/blog/assets/js/48.b5374317.js"><link rel="prefetch" href="/blog/assets/js/49.8bb025d5.js"><link rel="prefetch" href="/blog/assets/js/5.32a2e1b6.js"><link rel="prefetch" href="/blog/assets/js/50.8011aa1f.js"><link rel="prefetch" href="/blog/assets/js/51.a915dbc4.js"><link rel="prefetch" href="/blog/assets/js/52.99d2399f.js"><link rel="prefetch" href="/blog/assets/js/53.be187caf.js"><link rel="prefetch" href="/blog/assets/js/54.07b08901.js"><link rel="prefetch" href="/blog/assets/js/55.3ef99688.js"><link rel="prefetch" href="/blog/assets/js/56.9258b8d8.js"><link rel="prefetch" href="/blog/assets/js/57.4762d5e6.js"><link rel="prefetch" href="/blog/assets/js/58.8d1268be.js"><link rel="prefetch" href="/blog/assets/js/59.20eb3b71.js"><link rel="prefetch" href="/blog/assets/js/6.9db196de.js"><link rel="prefetch" href="/blog/assets/js/60.0adc2f64.js"><link rel="prefetch" href="/blog/assets/js/61.7a4bb849.js"><link rel="prefetch" href="/blog/assets/js/62.4b595b7b.js"><link rel="prefetch" href="/blog/assets/js/63.8efe6050.js"><link rel="prefetch" href="/blog/assets/js/64.2daf2555.js"><link rel="prefetch" href="/blog/assets/js/65.01aa6930.js"><link rel="prefetch" href="/blog/assets/js/66.b71e30c2.js"><link rel="prefetch" href="/blog/assets/js/67.b88d5dfc.js"><link rel="prefetch" href="/blog/assets/js/68.0455a3ce.js"><link rel="prefetch" href="/blog/assets/js/69.aac22b54.js"><link rel="prefetch" href="/blog/assets/js/7.c958551b.js"><link rel="prefetch" href="/blog/assets/js/70.513be29f.js"><link rel="prefetch" href="/blog/assets/js/71.dda331fc.js"><link rel="prefetch" href="/blog/assets/js/72.20dc430c.js"><link rel="prefetch" href="/blog/assets/js/73.5046c7ef.js"><link rel="prefetch" href="/blog/assets/js/74.436c2c94.js"><link rel="prefetch" href="/blog/assets/js/75.717953f1.js"><link rel="prefetch" href="/blog/assets/js/76.4898deac.js"><link rel="prefetch" href="/blog/assets/js/77.1417b15d.js"><link rel="prefetch" href="/blog/assets/js/78.d51e77f9.js"><link rel="prefetch" href="/blog/assets/js/79.e7af2572.js"><link rel="prefetch" href="/blog/assets/js/8.d5f2c1ba.js"><link rel="prefetch" href="/blog/assets/js/80.f5d5c456.js"><link rel="prefetch" href="/blog/assets/js/81.e46213a6.js"><link rel="prefetch" href="/blog/assets/js/82.a2b78450.js"><link rel="prefetch" href="/blog/assets/js/83.ec57022e.js"><link rel="prefetch" href="/blog/assets/js/84.1a1e65b2.js"><link rel="prefetch" href="/blog/assets/js/85.453ecac0.js"><link rel="prefetch" href="/blog/assets/js/86.98f2e40a.js"><link rel="prefetch" href="/blog/assets/js/87.56486cd5.js"><link rel="prefetch" href="/blog/assets/js/88.25a76bc5.js"><link rel="prefetch" href="/blog/assets/js/89.0a157175.js"><link rel="prefetch" href="/blog/assets/js/9.952385f9.js"><link rel="prefetch" href="/blog/assets/js/90.5b516e54.js"><link rel="prefetch" href="/blog/assets/js/91.6d74ff97.js"><link rel="prefetch" href="/blog/assets/js/92.3b2d151b.js"><link rel="prefetch" href="/blog/assets/js/93.f20ce1f2.js"><link rel="prefetch" href="/blog/assets/js/94.c3062efe.js"><link rel="prefetch" href="/blog/assets/js/95.206ed12d.js"><link rel="prefetch" href="/blog/assets/js/96.fad1a27d.js"><link rel="prefetch" href="/blog/assets/js/97.23b93196.js"><link rel="prefetch" href="/blog/assets/js/98.a90f6f17.js"><link rel="prefetch" href="/blog/assets/js/99.adc32b70.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.381052ad.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.61668f40.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/icons/apple-touch-icon.png" alt="一葦" class="logo"> <span class="site-name can-hide">一葦</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/more/ai/" class="nav-link">AI</a></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li><li class="dropdown-item"><!----> <a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="images/poster03.jpeg"> <div class="blogger-info"><h3></h3> <span>是旷野，不是轨道哦，少年。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/more/ai/" class="nav-link">AI</a></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li><li class="dropdown-item"><!----> <a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>从0到1搭建Monorepo组件库项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/vue/vue-design.html#准备" class="sidebar-link">准备</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#项目搭建" class="sidebar-link">项目搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#包关联配置" class="sidebar-link">包关联配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件预览项目" class="sidebar-link">组件预览项目</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#工具库项目" class="sidebar-link">工具库项目</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件库项目" class="sidebar-link">组件库项目</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#初始化-2" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件开发" class="sidebar-link">组件开发</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件调试" class="sidebar-link">组件调试</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件文档项目" class="sidebar-link">组件文档项目</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#初始化-3" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#源码预览" class="sidebar-link">源码预览</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#样式隔离" class="sidebar-link">样式隔离</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#脚手架项目" class="sidebar-link">脚手架项目</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#项目目录结构" class="sidebar-link">项目目录结构</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#组件库发布" class="sidebar-link">组件库发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件打包" class="sidebar-link">组件打包</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件发布" class="sidebar-link">组件发布</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#使用" class="sidebar-link">使用</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#组件文档部署" class="sidebar-link">组件文档部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#部署vercel" class="sidebar-link">部署Vercel</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#部署阿里云" class="sidebar-link">部署阿里云</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#工程化配置" class="sidebar-link">工程化配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#代码提交规范" class="sidebar-link">代码提交规范</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#eslint" class="sidebar-link">Eslint</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#prettier" class="sidebar-link">Prettier</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#husky" class="sidebar-link">Husky</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#commitlint" class="sidebar-link">CommitLint</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#lint-staged" class="sidebar-link">Lint-staged</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#添加vitest测试" class="sidebar-link">添加Vitest测试</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#项目优化" class="sidebar-link">项目优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#setup语法定义组件名" class="sidebar-link">setup语法定义组件名</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#vue版本冲突" class="sidebar-link">Vue版本冲突</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#组件文档ai对话" class="sidebar-link">组件文档AI对话</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#todo" class="sidebar-link">TODO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#样式隔离-2" class="sidebar-link">样式隔离</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#跨框架组件库" class="sidebar-link">跨框架组件库</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#gulp管理组件库打包发布" class="sidebar-link">gulp管理组件库打包发布</a></li><li class="sidebar-sub-header"><a href="/blog/skills/vue/vue-design.html#组件库自动发布" class="sidebar-link">组件库自动发布</a></li></ul></li><li><a href="/blog/skills/vue/vue-design.html#备注" class="sidebar-link">备注</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#报错记录" class="sidebar-link">报错记录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#收藏" class="sidebar-link">收藏</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/vue/vue-design.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/blog/categories/?category=skills" title="分类" data-v-0c557b5e>skills</a></li><li data-v-0c557b5e><a href="/blog/categories/?category=vue" title="分类" data-v-0c557b5e>vue</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>阿沐</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2023-12-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">从0到1搭建Monorepo组件库项目<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="从0到1搭建monorepo组件库项目"><a href="#从0到1搭建monorepo组件库项目" class="header-anchor">#</a> 从0到1搭建Monorepo组件库项目</h1> <blockquote><p>这里是我从0到1搭建Monorepo组件库项目的笔记~</p></blockquote> <ul><li><p><a href="https://github.com/verneyZhou/verney-vue-design" target="_blank" rel="noopener noreferrer">源码地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://verney-vue-design-verneyzhou.vercel.app/" target="_blank" rel="noopener noreferrer">组件库文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <ul><li><strong>Monorepo</strong></li></ul> <p><strong>单仓库，多项目</strong>。就是指在一个大的项目仓库中，管理多个模块/包（package），这种类型的项目大都在项目根目录下有一个packages文件夹，分多个项目管理。大概结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>-- packages
  -- pkg1
    --package.json
  -- pkg2
    --package.json
--package.json
</code></pre></div><blockquote><p>目前很多我们熟知的项目都是采用这种模式，如<a href="https://github.com/youzan/vant" target="_blank" rel="noopener noreferrer">Vant<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://github.com/element-plus/element-plus" target="_blank" rel="noopener noreferrer">ElementPlus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://github.com/vuejs/core" target="_blank" rel="noopener noreferrer">Vue3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等。打造一个Monorepo环境的工具有很多，如：<code>lerna、pnpm、yarn</code>等，这里我们将使用<code>pnpm</code>来开发我们的UI组件库, 因为它简单高效，它没有太多杂乱的配置。</p></blockquote> <ul><li><strong>pnpm</strong></li></ul> <blockquote><p><code>pnpm</code>代表<code>performance npm</code>（高性能的<code>npm</code>），对于包的管理是很方便的,尤其是对于一个 Monorepo 的项目。因为对于我们即将开发的组件库来说可能会存在多个 package(包),而这些包在我们本地是需要相互关联测试的,刚好 pnpm 就对其天然的支持。</p></blockquote> <p>其实像其它包管理工具,比如 yarn、lerna 等也能做到,但是相对来说比较繁琐。而 pnpm 现在已经很成熟了,像 Vant，ElementUI 这些明星组件库都在使用 pnpm,因此本项目也采用 pnpm 作为包管理工具。</p> <p><a href="https://www.pnpm.cn/" target="_blank" rel="noopener noreferrer">pnpm官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>Vite</strong></li></ul> <blockquote><p>Vite算是这两年的热门明星脚手架了，这里不做过多介绍了，现在快速搭建<code>vue3</code>项目基本都会选择它~</p></blockquote> <p><a href="https://cn.vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>Vitepress</strong></li></ul> <blockquote><p>VitePress与<a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer">VuePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>比较类似，都是Vue驱动的静态网站生成器，只是 VuePress 是基于 Webpack 构建的，VirePress 是基于Vite构建的, 在这个项目中我选择用 VitePress 来构建组件库文档~</p></blockquote> <p><a href="https://vitejs.cn/vitepress/" target="_blank" rel="noopener noreferrer">VitePress官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="项目搭建"><a href="#项目搭建" class="header-anchor">#</a> 项目搭建</h2> <blockquote><p>接下来从0到1开始搭建这个项目吧~</p></blockquote> <h3 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h3> <ul><li><p>新建项目：<code>mkdir verney-vue-design</code>; <code>cd verney-vue-design</code>进入项目目录；</p></li> <li><p>安装pnpm: <code>npm install pnpm -g</code></p></li></ul> <blockquote><p>安装完成可通过<code>pnpm -v</code>查看版本号~</p></blockquote> <ul><li><p>初始化<code>package.json</code>: <code>pnpm init</code>;</p></li> <li><p>安装vue3, ts, less: <code>pnpm i vue@latest typescript less -D -w</code></p></li></ul> <blockquote><p>开发环境中的依赖一般全部安装在整个项目根目录下，方便下面我们每个包都可以引用,所以在安装的时候需要加个 <code>-w</code>;</p></blockquote> <blockquote><p>因为开发的是vue3组件， 所以需要安装vue3；less 是方便写样式，也可以安装 scss...</p></blockquote> <ul><li>ts配置：根目录下新建<code>tsconfig.json</code>: <code>npx tsc --init</code>, 进行 ts 配置：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>

<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ES2015&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./packages/components&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;packages/components/src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="包关联配置"><a href="#包关联配置" class="header-anchor">#</a> 包关联配置</h3> <blockquote><p>我们新建一个 <code>packages</code> 文件夹用于后续来存放我们的各种包; 假如我们有了 <code>a</code> 包和 <code>b</code>, 为了方便 a 引用 b 时<code>pnpm add @xxx/b</code>不报错，需要先进行包关联配置~</p></blockquote> <ul><li>项目根目录下新建<code>pnpm-workspace.yaml</code>：</li></ul> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">packages</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">'packages/**'</span> <span class="token comment"># 里面会放组件库，工具库等子项目</span>
    <span class="token punctuation">-</span> <span class="token string">'examples'</span> <span class="token comment"># 组件预览项目，可用于调试组件</span>
    <span class="token punctuation">-</span> <span class="token string">'docs'</span> <span class="token comment"># 组件文档项目</span>
</code></pre></div><blockquote><p>这样就能将我们项目下的<code>packages</code>目录和<code>examples, docs</code>目录关联起来了, 之后在组件库中引用工具库时就会看到它的效果~</p></blockquote> <p><a href="https://pnpm.io/zh/pnpm-workspace_yaml" target="_blank" rel="noopener noreferrer">pnpm-workspace.yaml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>定义了 工作空间 的根目录，并能够使您从工作空间中包含 / 排除目录 。 默认情况下，包含所有子目录。</p> <h3 id="组件预览项目"><a href="#组件预览项目" class="header-anchor">#</a> 组件预览项目</h3> <blockquote><p>首先搭建一个组件预览项目，可用于调试<code>packages/</code>中开发的组件和工具包；就是搭建一个简单的Vite项目, 用于本地调试开发的组件和函数~</p></blockquote> <ul><li>项目根目录下新建项目：<code>mkdir examples</code>，进入该目录；</li></ul> <blockquote><p><code>examples</code>项目也可以直接在根目录下<code>pnpm create vite</code>，根据<a href="https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noopener noreferrer">Vite脚手架<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的提示命令快速创建一个Vite项目; 这里记录的是基础的手动配置流程，效果都是一样的~</p></blockquote> <ul><li><code>pnpm init</code>；配置<code>scripts</code>脚本启动项目：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code>...
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
...
</code></pre></div><ul><li>安装 vite: <code>pnpm install vite @vitejs/plugin-vue -D -w</code></li></ul> <blockquote><p>上面讲过，<code>-w</code>会自动安装到项目根目录下，方便后续其他子项目使用; <code>@vitejs/plugin-vue</code>用来支持<code>.vue</code>文件的转译~</p></blockquote> <ul><li>新建<code>vite.config.ts</code>, 配置：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// examples/vite.config.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
        host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token number">3010</span><span class="token punctuation">,</span> <span class="token comment">// 设置服务启动端口号</span>
        open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 设置服务启动时是否自动打开浏览器</span>
        cors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许跨域</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>简单配置完成后，就可以开始初始化项目了~</p></blockquote> <ul><li>新建<code>App.vue, index.html, main.ts, vue-shim.d.ts</code>文件, 代码比较简单，具体见源码，这里就不展示了~</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// examples/vue-shim.d.ts</span>

<span class="token comment">// TypeScriptTS默认只认ES 模块</span>
<span class="token comment">// 如果你要导入.vue文件就要declare module把他们声明出来</span>
declare module <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
    <span class="token keyword">import</span> type <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token literal-property property">component</span><span class="token operator">:</span>DefineComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>any<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>初始化完成后，<code>pnpm run dev</code>，如果浏览器访问<code>http://localhost:3010</code>访问成功，即表示项目初始化成功~</li></ul> <h3 id="工具库项目"><a href="#工具库项目" class="header-anchor">#</a> 工具库项目</h3> <blockquote><p>接着先搭建一个工具库项目，在这个项目里可以封装一些可以在组件库或其他业务场景中经常用到的方法或函数~</p></blockquote> <ul><li><p>新建项目：<code>packages/verney-utils</code>, 进入该目录；</p></li> <li><p>初始化：<code>pnpm init</code>， 让它变成一个包:</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@verney-design/utils&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自定义包名称</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 版本信息</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 描述</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.ts&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 入口</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>新建<code>index.ts</code>, 先写个简单的<code>addFn</code>方法，并导出：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// packages/verney-utils/index.ts</span>

<span class="token keyword">function</span> <span class="token function">addFn</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
    addFn
<span class="token punctuation">}</span>
</code></pre></div><p>简单初始化之后，如果想添加其他方法可在<code>packages/verney-util/src/</code>目录下添加<code>ts</code>文件，<code>packages/verney-util/index.ts</code>导出即可~</p> <blockquote><p>之后我们新建组件库项目，试下在该项目中使用<code>addFn</code>方法~</p></blockquote> <h3 id="组件库项目"><a href="#组件库项目" class="header-anchor">#</a> 组件库项目</h3> <blockquote><p>接着我们先搭建最重要的组件库项目，该项目用于开发我们的UI组件~</p></blockquote> <h4 id="初始化-2"><a href="#初始化-2" class="header-anchor">#</a> 初始化</h4> <ul><li><p>新建文件夹：<code>packages/verney-components</code>, 进入该目录；<code>pnpm init</code>；</p></li> <li><p>接着安装刚创建的工具库包：<code>pnpm install @verney-design/utils</code>；安装成功后，<code>package.json</code>中会添加软连，指向本地的<code>utils</code>包：</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@verney-design/utils&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:^1.0.0&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>pnpm add @verney-design/utils</code>也可以~</p></blockquote> <p>依赖<code>@verney-design/utils</code>对应的版本为<code>：workspace:^1.0.0</code>；因为<code>pnpm</code>是由<code>workspace</code>管理的，所以有一个前缀<code>workspace</code>可以指向<code>utils</code>下的工作空间从而方便本地调试。</p> <ul><li><code>package.json</code>:</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@verney-design/ui&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 组件库名称</span>
  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue3组件库~&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.ts&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 入口</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;verney-design-ui&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vue3组件库&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@verney-design/utils&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:^1.0.0&quot;</span> <span class="token comment">// 工具包软连接</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>在 pnpm 中使用 <code>workspace:</code> 协议定义某个依赖包版本号时，pnpm 将只解析存在工作空间内的依赖包，不会去下载解析 npm 上的依赖包。</p></blockquote> <h4 id="组件开发"><a href="#组件开发" class="header-anchor">#</a> 组件开发</h4> <ul><li>之后新建<code>src/</code>目录，创建<code>button/</code>和<code>input/</code>两个组件目录，先简单创建两个组件：</li></ul> <blockquote><p>这里以<code>button</code>组件为例：</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- verney-components/src/button/button.vue --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>verney-ui-button__wrapper<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>button 组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vn-button'</span><span class="token punctuation">,</span> <span class="token comment">// 组件名称</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>addFn<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@verney-design/utils'</span> <span class="token comment">// 导入工具函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'==button==mounted'</span><span class="token punctuation">,</span> <span class="token function">addFn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印工具函数，验证工具函数导入是否生效</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>less<span class="token punctuation">'</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">// 组件样式
.verney-ui-button__wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>组件导出：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// verney-components/src/button/index.ts</span>

<span class="token keyword">import</span> button <span class="token keyword">from</span> <span class="token string">'./button.vue'</span><span class="token punctuation">;</span>
<span class="token comment">// 很多时候我们在vue中使用一个组件会用的app.use 将组件挂载到全局。</span>
<span class="token comment">// 要使用app.use函数的话我们需要让我们的每个组件都提供一个install方法，app.use()的时候就会调用这个方法;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>withInstall<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@verney-design/utils'</span>
<span class="token keyword">const</span> Button <span class="token operator">=</span> <span class="token function">withInstall</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span> <span class="token comment">// 添加install方法</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Button<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>这里调用了一个方法<code>withInstall</code>, 直接在工具库项目中添加即可：</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// packages/verney-utils/src/withinstall.ts</span>

<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> App<span class="token punctuation">,</span> Plugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">SFCWithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> Plugin

<span class="token comment">// 为了解决组件的全局注册，写一个高阶函数:</span>
<span class="token comment">// 这个函数接收一个组件，然后返回一个新的组件，这个新的组件上有install方法，install方法就是全局注册组件的方法</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>comp<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>comp <span class="token keyword">as</span> SFCWithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当组件是 script setup 的形式时，会自动以为文件名注册，会挂载到组件的__name 属性上，所以要加上这个条件</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token punctuation">(</span>comp <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token punctuation">(</span>comp <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__name
        <span class="token comment">//注册组件</span>
        app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> comp <span class="token keyword">as</span> SFCWithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> comp <span class="token keyword">as</span> SFCWithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 添加完成后，记得导出
 */</span>
<span class="token comment">// packages/verney-utils/src/index.ts</span>
<span class="token keyword">import</span> withInstall <span class="token keyword">from</span> <span class="token string">&quot;./src/withinstall&quot;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
    withInstall
<span class="token punctuation">}</span>
</code></pre></div><ul><li>定义组件类型声明：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// verney-components/src/button/types.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ExtractPropTypes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span> <span class="token comment">// ExtractPropTypes是vue3中内置的类型声明</span>
<span class="token comment">// 定义属性值</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ButtonType <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'primary'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token string">'danger'</span><span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ButtonSize <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'large'</span><span class="token punctuation">,</span> <span class="token string">'normal'</span><span class="token punctuation">,</span> <span class="token string">'small'</span><span class="token punctuation">,</span> <span class="token string">'mini'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 导出属性类型</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> buttonProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 校验属性值</span>
            <span class="token keyword">return</span> ButtonType<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plain<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    round<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    disabled<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    icon<span class="token operator">:</span> String<span class="token punctuation">,</span>
    iconPosition<span class="token operator">:</span> String<span class="token punctuation">,</span>
    size<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ButtonSize<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 导出组件属性配置信息</span>
<span class="token comment">// ExtractPropTypes会接收一个类型，然后把对应的vue3所接收的props类型提供出来，后面有需要可以直接使用</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">ButtonProps</span> <span class="token operator">=</span> ExtractPropTypes<span class="token operator">&lt;</span><span class="token keyword">typeof</span> buttonProps<span class="token operator">&gt;</span>
</code></pre></div><ul><li>所有组件导出：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// verney-components/src/index.ts</span>

<span class="token keyword">import</span> VnButton <span class="token keyword">from</span> <span class="token string">&quot;./button&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 导入组件</span>
<span class="token keyword">import</span> VnInput <span class="token keyword">from</span> <span class="token string">&quot;./input&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 导出组件</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
    VnButton<span class="token punctuation">,</span>
    VnInput
<span class="token punctuation">}</span>
<span class="token comment">// 默认导出所有组件的数组</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>VnButton<span class="token punctuation">,</span> VnInput<span class="token punctuation">]</span> 


<span class="token comment">// verney-components/index.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> comps <span class="token keyword">from</span> <span class="token string">'./src/index'</span><span class="token punctuation">;</span> <span class="token comment">// 获取上面默认导出的组件数组</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./src/index&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 会把所有的非default导出</span>
<span class="token comment">// 默认导出install方法</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    comps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="组件调试"><a href="#组件调试" class="header-anchor">#</a> 组件调试</h4> <ul><li>接着我们回到<code>examples</code>项目，安装刚创建的组件库：<code>pnpm install @verney-design/ui</code>;</li></ul> <blockquote><p>跟上面添加<code>@verney-design/utils</code>一样，会在<code>package.json</code>中添加软连，指向本地；这样当组件修改后，在<code>examples</code>中也会同步更新~</p></blockquote> <ul><li>之后在<code>examples/App.vue</code>中引入 button 和 input 组件：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- examples/App.vue --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VnButton</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VnButton</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VnInput</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VnInput</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>VnButton<span class="token punctuation">,</span> VnInput<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@verney-design/ui'</span><span class="token punctuation">;</span> <span class="token comment">// 引入组件库</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'==app==mounted'</span><span class="token punctuation">,</span> VnButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>npm run dev</code>启动项目测试是否引入组件成功；如果页面展示组件内容，即表示引入成功。</li></ul> <blockquote><p>正常情况下页面上应该是会展示组件内容的，同时也会看到button组件中调用<code>addFn</code>方法的<code>console</code>信息，说明在组件库和工具库的调用都是ok的~</p></blockquote> <p>组件引入成功后，我们就可以一边在<code>packages/</code>中开发组件和工具库，一边在<code>examples</code>项目中调试了~ 接下来就可以专注组件开发了~！！</p> <blockquote><p>之后就是继续其他组件的开发了，这里不再赘述，具体细节可查看代码~</p></blockquote> <h3 id="组件文档项目"><a href="#组件文档项目" class="header-anchor">#</a> 组件文档项目</h3> <blockquote><p>如果组件开发完毕，就需要一个组件库使用文档了，这里使用<a href="https://vitejs.cn/vitepress/" target="_blank" rel="noopener noreferrer">vitepress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来进行开发~</p></blockquote> <h4 id="初始化-3"><a href="#初始化-3" class="header-anchor">#</a> 初始化</h4> <ul><li><p>首先项目根目录下新建<code>docs</code>目录，进入该目录；</p></li> <li><p>安装vitepress: <code>pnpm install vitepress -D -w</code></p></li> <li><p>初始化：<code>pnpm init</code>, 生成<code>package.json</code>;</p></li> <li><p>创建<code>index.md</code>: <code>echo '# Hello VitePress' &gt; index.md</code></p></li> <li><p>pkg中添加命令：</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitepress dev&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 默认启动 index.md</span>
  <span class="token comment">// &quot;dev&quot;: &quot;vitepress dev src/index.md&quot;, // 可指定入口文件</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitepress build&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitepress serve&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>启动：<code>pnpm run dev</code>, 会默认启动一个端口，浏览器打开该服务则可以看到默认的 vitepress 页面；</li></ul> <blockquote><p>启动之后<code>docs</code>目录下会自动生成<code>.vitepress</code>配置文件夹~</p></blockquote> <h4 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h4> <blockquote><p>服务启动成功后，接下来就可以开始配置细节了，具体配置规则其实跟<code>vuepress</code>挺类似的~</p></blockquote> <ul><li><code>docs/index.md</code>中可以配置首页布局；</li></ul> <blockquote><p>使用<a href="https://vitejs.cn/vitepress/guide/frontmatter.html" target="_blank" rel="noopener noreferrer">Frontmatter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来进行配置的；</p></blockquote> <ul><li><code>.vitepress/config.ts</code>中配置页面顶部导航<code>nav</code>，左侧边栏<code>sidebar</code>，顶部<code>footer</code>等模块；</li></ul> <blockquote><p>具体配置信息参考这里<a href="https://vitejs.cn/vitepress/config/basics.html" target="_blank" rel="noopener noreferrer">config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// .vitepress/config.ts</span>

<span class="token keyword">import</span> nav <span class="token keyword">from</span> <span class="token string">'./configs/nav'</span> <span class="token comment">// 顶部导航配置信息</span>
<span class="token keyword">import</span> sidebar <span class="token keyword">from</span> <span class="token string">'./configs/sidebar'</span> <span class="token comment">// 左侧边栏配置信息</span>
<span class="token keyword">import</span> footer <span class="token keyword">from</span> <span class="token string">'./configs/footer'</span> <span class="token comment">// 底部footer配置信息</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'verney-vue-design'</span><span class="token punctuation">,</span> <span class="token comment">// 站点的标题</span>
  description<span class="token operator">:</span> <span class="token string">'verney-vue-design前端组件库'</span><span class="token punctuation">,</span> <span class="token comment">// 站点的描述,将作为&lt;meta&gt;标记渲染在页面HTML中</span>
  appearance<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许默认的颜色主题切换</span>
  base<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// base URL; 如果计划将站点部署到https://foo.github.io/bar/,那么需要设置base为'/bar/'</span>
<span class="token comment">//   lang: 'en-US', // 设置语言, 这个属性将作为&lt;html lang=&quot;en-US&quot;&gt;标记渲染到页面HTML中。</span>
<span class="token comment">// head: 额外的需要被注入到当前页面的HTML&lt;head&gt;中的标签,每个标签都可以以 [tagName, { attrName: attrValue }, innerHTML?] 的格式指定</span>
  head<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'link'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        rel<span class="token operator">:</span> <span class="token string">'icon'</span><span class="token punctuation">,</span>
        href<span class="token operator">:</span> <span class="token string">'/logo/favicon.svg'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 主题配置</span>
  themeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    logo<span class="token operator">:</span> <span class="token string">'/logo/favicon.svg'</span><span class="token punctuation">,</span> <span class="token comment">// 导航栏logo</span>
    nav<span class="token punctuation">,</span> <span class="token comment">// 顶部导航</span>
    sidebar<span class="token punctuation">,</span> <span class="token comment">// 侧边栏</span>
    footer <span class="token comment">// 页脚</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>具体配置信息见顶部源码，这里不再赘述~</p></blockquote> <p>当然也可以新建<code>vite.config.ts</code>文件进行打包启动配置，修改默认端口号什么的，就跟普通的<code>vite</code>项目一样~</p> <blockquote><p>如果要配置的话，前面初始化<code>examples</code>项目时已经在根目录下安装过<code>vite</code>了，所以这里直接在<code>docs/</code>下新建<code>vite.config.ts</code>即可~</p></blockquote> <h4 id="源码预览"><a href="#源码预览" class="header-anchor">#</a> 源码预览</h4> <blockquote><p>在<code>elment-plus</code>或者其他第三方组件库文档中都会有一个功能，就是组件预览及源码查看，接下来需要创建一个组件来实现这个功能~</p></blockquote> <ul><li>首先是引入组件：<code>pnpm install @verney-design/ui</code>, 下载后会在<code>pkg</code>中添加软连：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>

<span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@verney-design/ui&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:^1.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>然后在<code>.vitepress/theme/index.ts</code>进行全局注册：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> VerneyUI <span class="token keyword">from</span> <span class="token string">'@verney-design/ui'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">enhanceApp</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>app<span class="token operator">:</span> App<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 全局注册组件</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VerneyUI<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>之后就可以新建目录<code>demo/</code>，用于放置我们的组件代码示例了，如：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- demo/button.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vn-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vn-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>同时新建<code>demo/index.ts</code>，导出所有的组件代码示例文件~</p></blockquote> <ul><li>先安装一些会用到的第三方库：<code>pnpm install @vueuse/core prismjs @element-plus/icons-vue element-plus -S -w</code></li></ul> <blockquote><p><code>@vueuse/core</code>会提供一些工具函数，比如复制；<code>prismjs</code>可以添加代码高亮；<code>@element-plus/icons-vue</code>和<code>element-plus</code>在之后写预览组件的时候会用到~</p></blockquote> <ul><li>接着封装一个用于预览和查看源码的组件<code>vpDemo.vue</code>：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- components/vp-demo.vue --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- 组件预览 --&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ClientOnly</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demoComp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ClientOnly</span><span class="token punctuation">&gt;</span></span>

   <span class="token comment">&lt;!-- 源码查看 --&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decoded<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 引入所有组件代码示例 </span>
<span class="token keyword">import</span> demos <span class="token keyword">from</span> <span class="token string">'../../demo'</span><span class="token punctuation">;</span>

<span class="token comment">// 通过demoName获取当前demo组件</span>
<span class="token keyword">const</span> demoComp <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> demos<span class="token punctuation">[</span>props<span class="token punctuation">.</span>demoName<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 获取源码</span>
<span class="token keyword">const</span> decoded <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>sourceCode<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>同时将该组件在上面的<code>theme/index.ts</code>中进行注册，之后就可以在项目中直接用了~</p></blockquote> <p><strong>Q：那接下来在<code>md</code>文件中，怎么展示我们的 demo 组件，以及怎么展示 demo 源码呢？</strong></p> <blockquote><p>组件预览比较简单，拿到<code>demoComp</code>直接渲染即可，难的是源码的展示；虽说在<code>md</code>文档中可以直接添加demo源码，但不优雅，而且代码很容易重复且累赘；</p></blockquote> <p>我们可以约定一个语法规则，在模块加载的时候通过正则匹配拿到<code>demo</code>组件的路径和名称，同时也可以拿到<code>demo</code>源码；之后就可以通过改写模块属性，把源码内容转成字符串添加到模块中；之后在<code>vpDemo</code>组件中拿到源码字符串<code>sourceCode</code>，就可以进行展示了~</p> <ul><li>先看下<code>md</code>文档中的<code>vpDemo</code>组件的调用比较简单：</li></ul> <div class="language-md extra-class"><pre class="language-md"><code><span class="token comment">&lt;!-- ui/button.md --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vp-demo</span> <span class="token attr-name">source-code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ui:::button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">demo-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vp-demo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>这里我约定的语法规则是<code>source-code=&quot;ui:::xxx&quot;</code>, 注意，这个规则很重要，为避免代码编译冲突，约定之后最好就只用于组件预览场景使用~</p></blockquote> <ul><li>接着最重要的一步，写一个简单的<code>vite</code>插件，用于将所有md模块中的<code>source-code=&quot;ui:::xxx&quot;</code>提取出来，并通过路径获取源码信息：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// build/source-code.ts</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fsPromises <span class="token keyword">from</span> <span class="token string">'fs/promises'</span> <span class="token comment">// 异步读取文件</span>

<span class="token keyword">const</span> Prism <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs'</span><span class="token punctuation">)</span> <span class="token comment">// 引入代码高亮插件</span>
<span class="token keyword">const</span> loadLanguages <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'prismjs/components/index'</span><span class="token punctuation">)</span>

<span class="token function">loadLanguages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'markup'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token string">'javascript'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 限制语言类型</span>

<span class="token comment">// 代码示例目录</span>
<span class="token keyword">const</span> packagesPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../demo/'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">sourceCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 会在每个传入模块请求时被调用</span>
    <span class="token comment">// src: 源代码字符串，id: 模块的绝对路径</span>
    <span class="token keyword">async</span> <span class="token function">transform</span> <span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> mdFile <span class="token operator">=</span> <span class="token string">'.md'</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>mdFile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token comment">// 仅处理 .md 文件</span>

      <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">source-code=&quot;(.*)&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span> <span class="token comment">// 匹配 source-code=&quot;xxx&quot;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>src<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

    <span class="token comment">//   console.log('=====sourceCode',src, id, src.match(reg))</span>
   
      <span class="token comment">// 封装match方法：读取导入模块的源代码，遍历匹配到的 source-code=&quot;xxx&quot;</span>
      <span class="token comment">// 例：[ 'source-code=&quot;ui:::input&quot;','source-code=&quot;ui:::button&quot;' ]</span>
      <span class="token keyword">const</span> match <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">[</span>packageName<span class="token punctuation">,</span> compPath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sourceSplit</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token comment">// 获取组件名称</span>
        <span class="token comment">// console.log(packageName, compPath)</span>
        <span class="token comment">// const suffix = packageName.includes('ant') ? 'jsx' : 'vue'</span>
        <span class="token comment">// return fsPromises.readFile(path.resolve(packagesPath, `${packageName}/demo/${compPath}.${suffix}`), 'utf-8')</span>

        <span class="token comment">// 获取组件示例路径</span>
        <span class="token keyword">const</span> demoPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>packagesPath<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>compPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.vue</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token comment">// 读取组件示例源代码</span>
        <span class="token keyword">return</span> fsPromises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>demoPath<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">const</span> filesRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token comment">// 异步执行</span>

      <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment">// 将匹配到的 source-code=&quot;xxx&quot; 替换为 &lt;pre&gt;&lt;code&gt;xxx&lt;/code&gt;&lt;/pre&gt;  </span>
      <span class="token keyword">return</span> src<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=====replace'</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>packageName<span class="token punctuation">,</span> compPath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sourceSplit</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token keyword">const</span> compPathStrArr <span class="token operator">=</span> compPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> file <span class="token operator">=</span> filesRes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        i<span class="token operator">++</span>
        <span class="token comment">// 返回添加了 source-code 等属性的新的代码字符串，替换原来的 source-code=&quot;xxx&quot; 代码片段</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">source-code=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token function">wrap</span><span class="token punctuation">(</span>Prism<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">,</span> <span class="token string">'markup'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 将代码包裹在 &lt;pre&gt;&lt;code&gt;xxx&lt;/code&gt;&lt;/pre&gt; 中</span>
<span class="token keyword">const</span> <span class="token function-variable function">wrap</span> <span class="token operator">=</span> code <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;pre v-pre&gt;&lt;code&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/code&gt;&lt;/pre&gt;</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// source-code=&quot;ui:::input&quot; =&gt; ['ui', 'input']</span>
<span class="token keyword">function</span> <span class="token function">sourceSplit</span> <span class="token punctuation">(</span>_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*?source-code=&quot;(.*)&quot;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token comment">// 获取匹配参数</span>
<span class="token comment">//   console.log('=====sourceSplit', result)</span>
    <span class="token comment">/**
     * 例：result =&gt; 
            [
            'source-code=&quot;ui:::input&quot;',
            'ui:::input',
            index: 0,
            input: 'source-code=&quot;ui:::input&quot;',
            groups: undefined
            ]
    */</span>
  <span class="token keyword">const</span> originPath <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">''</span>
  <span class="token keyword">return</span> originPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':::'</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 导出插件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> sourceCode
</code></pre></div><blockquote><p>关于vite插件的开发，可参考<a href="https://cn.vitejs.dev/guide/api-plugin.html#universal-hooks" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 这里不再赘述~</p></blockquote> <ul><li>插件开发完毕，然后就可以直接引用了：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// vite.config.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>defineConfig<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> sourceCode <span class="token keyword">from</span> <span class="token string">'./build/source-code'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token punctuation">,</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">sourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>之后当<code>npm run dev</code>后，每次懒加载<code>md</code>文件时就会对源码中的<code>source-code=&quot;xxx&quot;</code>进行匹配，获取源码字符串信息~</p></blockquote> <p>这样，也就实现了组件的预览和源码查看的大致逻辑；之后也可以添加源码高亮，源码复制，全屏预览等功能，这里不再阐述，具体可查看代码~</p> <h4 id="样式隔离"><a href="#样式隔离" class="header-anchor">#</a> 样式隔离</h4> <blockquote><p>vitepress有自己的样式控制，同时引入的组件库也有自己的样式，所以在组件库文档项目中就可能存在样式覆盖的情况~</p></blockquote> <h3 id="脚手架项目"><a href="#脚手架项目" class="header-anchor">#</a> 脚手架项目</h3> <blockquote><p>项目搭建完成后，直接在<code>packages/</code>目录中创建<code>verney-cli</code>脚手架项目即可，之后就可以进行脚手架开发了，关于脚手架开发的具体流程放在：<a href="/blog/skills/vue/vue3-cli-repo.html">开发一个快速搭建vue3项目的脚手架</a>，这里不再赘述~</p></blockquote> <h2 id="项目目录结构"><a href="#项目目录结构" class="header-anchor">#</a> 项目目录结构</h2> <blockquote><p>到这里，项目搭建算是大致完成了，目前我们配置了工具库、组件库、组件预览、组件文档四个子项目，已经基本能满足组件开发的需求~</p></blockquote> <p>我搭建的<code>verney-design</code>组件库项目目录结构如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>└── docs <span class="token comment">// 组件文档项目</span>
    ├── <span class="token punctuation">.</span>vitepress  <span class="token comment">// vitepress配置信息</span>
    ├── build  <span class="token comment">// 打包配置信息</span>
    ├── demo  <span class="token comment">// 组件demo</span>
    ├── apps  <span class="token comment">// 项目目录</span>
    ├── pages  <span class="token comment">// md文档目录</span>
    ├── <span class="token keyword">public</span>  <span class="token comment">// 静态资源</span>
    ├── index<span class="token punctuation">.</span>md  <span class="token comment">// 文档首页</span>
    ├── <span class="token keyword">package</span><span class="token punctuation">.</span>json
    ├── vite<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ts  <span class="token comment">// vite配置</span>
└── examples <span class="token comment">// 组件预览项目</span>
    ├── App<span class="token punctuation">.</span>vue
    ├── index<span class="token punctuation">.</span>html
    ├── main<span class="token punctuation">.</span>ts
    ├── <span class="token keyword">package</span><span class="token punctuation">.</span>json
    ├── vite<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ts  <span class="token comment">// vite配置</span>
    ├── vue<span class="token punctuation">.</span>shim<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts  <span class="token comment">// ts类型声明</span>
└── packages
    ├── verney<span class="token operator">-</span>components  <span class="token comment">// 组件库项目</span>
        ├── src  <span class="token comment">// 组件目录</span>
            ├── input  <span class="token comment">// input组件</span>
            ├── button  <span class="token comment">// button组件</span>
            <span class="token operator">...</span>
            ├── index<span class="token punctuation">.</span>ts <span class="token comment">// 组件导出</span>
        ├── index<span class="token punctuation">.</span>ts  <span class="token comment">// 入口</span>
        ├── <span class="token keyword">package</span><span class="token punctuation">.</span>json
        ├── vite<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ts  <span class="token comment">// vite配置</span>
        <span class="token operator">...</span>
    ├── verney<span class="token operator">-</span>utils  <span class="token comment">// 工具库项目</span>
        ├── src    <span class="token comment">// 工具目录</span>
        ├── index<span class="token punctuation">.</span>ts   <span class="token comment">// 入口</span>
        ├── <span class="token keyword">package</span><span class="token punctuation">.</span>json <span class="token comment">// 组件库配置信息</span>
        <span class="token operator">...</span>
    ├── verney<span class="token operator">-</span>cli  <span class="token comment">// 脚手架项目</span>
        <span class="token operator">...</span>
└── <span class="token keyword">package</span><span class="token punctuation">.</span>json <span class="token comment">// 脚本配置文件</span>
├── pnpm<span class="token punctuation">.</span>workplace<span class="token punctuation">.</span>yaml <span class="token comment">// pnpm配置</span>
├── tsconfig<span class="token punctuation">.</span>json <span class="token comment">// ts配置</span>
</code></pre></div><h2 id="组件库发布"><a href="#组件库发布" class="header-anchor">#</a> 组件库发布</h2> <blockquote><p>当组件开发完毕，准备发布时，需要进行打包配置~</p></blockquote> <h3 id="组件打包"><a href="#组件打包" class="header-anchor">#</a> 组件打包</h3> <p>这里选择的是vite进行打包, 它提供了一个<a href="https://cn.vitejs.dev/guide/build#library-mode" target="_blank" rel="noopener noreferrer">库模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>专门用于打包库组件~</p> <ul><li>前面初始化<code>examples</code>项目时已经安装过<code>vite</code>了，所以这里直接在<code>components/</code>下新建<code>vite.config.ts</code>;</li></ul> <blockquote><p>这里我们选择打包<code>cjs(CommonJS)</code>和<code>esm(ESModule)</code>两种形式,<code>cjs</code>模式主要用于服务端引用(ssr),而<code>esm</code>就是我们现在经常使用的方式，它本身自带<code>treeShaking</code>而不需要额外配置按需引入~</p></blockquote> <ul><li><p>配置完成后，<code>package.json</code>中添加<code>&quot;build&quot;: &quot;vite build&quot;</code>打包命令；直接打包：<code>pnpm run build</code>；</p></li> <li><p>不出意外打包完成后，会在<code>components/dist</code>目录下生成<code>es</code>和<code>lib</code>两个目录；</p></li> <li><p>因为我们这是ts项目，所以还需要在打包的库里加入声明文件(<code>.d.ts</code>):</p></li></ul> <blockquote><p>到这里打包的组件库只能给<code>js</code>项目使用,在<code>ts</code>项目下运行会出现一些错误，而且使用的时候还会失去代码提示功能~</p></blockquote> <ol><li><p>安装：<code>pnpm i vite-plugin-dts -D -w</code></p></li> <li><p>修改<code>vite.config.ts</code>配置：</p></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> dts <span class="token keyword">from</span> <span class="token string">'vite-plugin-dts'</span>

plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">dts</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      entryRoot<span class="token operator">:</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
      outputDir<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist/es/src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist/lib/src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定使用的tsconfig.json为整个项目根目录下的</span>
      <span class="token comment">// 如果不配置,也可以在components下新建tsconfig.json</span>
      tsConfigFilePath<span class="token operator">:</span> <span class="token string">&quot;../../tsconfig.json&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="3"><li>执行打包命令你就会发现你的<code>es</code>和<code>lib</code>下就有了<code>d.ts</code>声明文件;</li></ol> <blockquote><p>其实现在大部分前端构建脚手架都支持 <code>esmodule</code> 了,而 <code>esmodule</code> 本身就支持按需加载,所以说组件库打包后的 es 格式它本身自带 <code>treeShaking</code>,而不需要额外配置按需引入~</p></blockquote> <ul><li>发布之前需要修改下<code>package.json</code>：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@verney-design/ui&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 包名称，设置前需在npm官网查询是否重名</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 版本号</span>
  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 这是一个公共包</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue3组件库~&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 描述</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/lib/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 组件库入口文件, 默认commonjs入口文件</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span><span class="token string">&quot;dist/es/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 如果环境支持ESM，构建工具会优先使用我们的module入口</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// files是需要发布到npm上的目录</span>
    <span class="token string">&quot;dist&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 关键词</span>
    <span class="token string">&quot;verney-design-ui&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vue3组件库&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 忽略 tree shaking 带来副作用的代码</span>
    <span class="token string">&quot;**/*.css&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhou&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 如果要发公共包，需要将协议改为MIT开源协议</span>
  <span class="token property">&quot;typings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/index.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 声明文件入口</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./dist/style.css&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/style.css&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 子目录别名，方便样式引入</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@verney-design/utils&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:^1.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>sideEffects</code>: 忽略 tree shaking 带来副作用的代码</li></ul> <blockquote><p>比如打包后组件代码中包含了:<code>import &quot;./xxx.css&quot;</code>, 这样会使得构建工具无法知道这段代码是否有副作用(也就是会不会用到其它引入的文件中的代码),所以构建的时候就会全量打包代码从而失去 esmodule 的自动按需引入功能。因此加上 sideEffects 字段就可以告诉构建工具这段代码不会产生副作用,可以放心的 <code>tree shaking</code>;</p></blockquote> <p><strong>注：</strong> 上面的 pkg 中<code>main</code>配置的是库的入口，这里一般指向的是打包后的js文件，但如果组件库不需要打包，可以直接指向其他文件：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/button.vue&quot;</span> <span class="token comment">// 比如这里可以直接指向某个组件</span>
<span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src&quot;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>对于某些不需要打包的库可以在<code>files</code>里配置需要发布到npm上的其他目录，或者不配置也行，<code>main</code>直接指向某个文件；这样其实相当于下载下来的npm包直接是访问的源码~</p></blockquote> <h3 id="组件发布"><a href="#组件发布" class="header-anchor">#</a> 组件发布</h3> <blockquote><p>这里默认发布到npm上，先不考虑发布到私有仓库的情况~</p></blockquote> <ul><li>首先需要将我们的项目<code>push</code>到<code>github</code>仓库上；</li></ul> <blockquote><p>如果不想提交到<code>github</code>仓库，可以下面发布的时候执行：<code>pnpm publish --no-git-checks</code>，但不建议~</p></blockquote> <ul><li><p>之后需要在<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上注册一个账号；</p></li> <li><p>如果发布像我们这种<code>@[org]/[child]</code>命名结构的包，需要先在 npm 上创建一个组织<code>Organization</code>，名称就是[org]；</p></li> <li><p><code>npm login</code>,输入账户密码登录，也需要输入邮箱，输入验证码~</p></li> <li><p><code>npm publish</code>，发布；成功后在npm官网刚创建的<a href="https://www.npmjs.com/settings/verney-design/packages" target="_blank" rel="noopener noreferrer">组织<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下面就能看到刚发布的包了~！</p></li></ul> <blockquote><p>如果发布的是公共包的话，需要执行: <code>pnpm publish --access public</code></p></blockquote> <blockquote><p>工具库和脚手架的发布跟这个流程差不多，都是先配置pkg文档，然后npm登录，发布~</p></blockquote> <p><strong>注意：组件库打包入口与开发入口不一致</strong></p> <blockquote><p>到这里可以发现，pkg文件中的main配置信息在开发和发布是不一样的：</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// &quot;main&quot;: &quot;index.ts&quot;, // 开发时的入口</span>
<span class="token comment">// 发布时入口</span>
<span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/lib/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 组件库入口文件, 默认commonjs入口文件</span>
<span class="token property">&quot;module&quot;</span><span class="token operator">:</span><span class="token string">&quot;dist/es/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 如果环境支持ESM，构建工具会优先使用我们的module入口</span>
</code></pre></div><blockquote><p>这里在发布和开发的时候需要注意一下~</p></blockquote> <p><strong>注：如果发布到自己公司的npm库，指定下npm地址即可：</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> --registry<span class="token operator">=</span>http://xxx login  <span class="token comment"># 登录</span>

<span class="token function">npm</span> --registry<span class="token operator">=</span>http://xxx publish  <span class="token comment"># 发布</span>

<span class="token function">npm</span> --registry<span class="token operator">=</span>http://xxx <span class="token function">install</span> pkgName  <span class="token comment"># 下载</span>
</code></pre></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <blockquote><p>组件库发布后，就可以跟其他第三方包一样直接安装使用了~</p></blockquote> <ul><li><p>安装：<code>pnpm install @verney-design/ui -S</code></p></li> <li><p>使用：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>VnButton<span class="token punctuation">,</span> VnInput<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@verney-design/ui'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@verney-design/ui/dist/style.css&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 引入css样式</span>
</code></pre></div><h2 id="组件文档部署"><a href="#组件文档部署" class="header-anchor">#</a> 组件文档部署</h2> <p><a href="https://cn.vitejs.dev/guide/static-deploy.html" target="_blank" rel="noopener noreferrer">Vite-部署静态站点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="部署vercel"><a href="#部署vercel" class="header-anchor">#</a> 部署Vercel</h3> <blockquote><p>vercel支持monorepo项目的部署，我之前总结过一篇关于<a href="/blog/more/vercel-deploy.html">vercel使用笔记</a>的博文，部署也比较简单，这里就不再赘述了</p></blockquote> <ul><li><p>github =&gt; settings =&gt; Applications =&gt; Vercel，新增<code>verney-vue-design</code>项目；</p></li> <li><p>之后进入到<a href="https://vercel.com/dashboard" target="_blank" rel="noopener noreferrer">vercel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>个人主页添加项目，按提示部署即可~</p></li></ul> <blockquote><p>注意：Settings中需要配置下deploy参数，不然直接部署会报错：</p></blockquote> <ol><li><code>Root Directory</code>选择<code>verney-vue-design/docs</code>;</li> <li><code>Framework Preset</code>选择<code>VitePress</code>, <code>Output Directory</code>填：<code>.vitepress/dist</code>;</li> <li><code>Install Command</code>填<code>pnpm install --no-frozen-lockfile</code></li></ol> <blockquote><p>部署成功后，直接项目每次<code>push</code>提交<code>vercel</code>都会自动部署~奈斯~😄</p></blockquote> <p><a href="https://verney-vue-design.vercel.app/" target="_blank" rel="noopener noreferrer">https://verney-vue-design.vercel.app/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="部署阿里云"><a href="#部署阿里云" class="header-anchor">#</a> 部署阿里云</h3> <blockquote><p>vercel已经很好用了，这里我就先不部署到自己的阿里云服务器上了~ 其实要部署的话也比较简单，配置一个自动部署的<code>git actions</code>工作流就可以，在<a href="/blog/more/github-actions.html">Github Actions自动部署</a>已经详细记录了自动部署的操作，这里不再赘述了~</p></blockquote> <h2 id="工程化配置"><a href="#工程化配置" class="header-anchor">#</a> 工程化配置</h2> <h3 id="代码提交规范"><a href="#代码提交规范" class="header-anchor">#</a> 代码提交规范</h3> <blockquote><p>接下来配置代码规范,样式规范以及代码提交规范~</p></blockquote> <h4 id="eslint"><a href="#eslint" class="header-anchor">#</a> Eslint</h4> <blockquote><p>ESLint 是一款用于查找并报告代码中问题的工具，并且支持部分问题自动修复。</p></blockquote> <ul><li><p>安装：<code>pnpm add eslint -D -w</code></p></li> <li><p>配置：<code>npx eslint --init</code>:</p></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code> verney-vue-design git:<span class="token punctuation">(</span>main<span class="token punctuation">)</span> ✗ npx eslint --init
You can also run this <span class="token builtin class-name">command</span> directly using <span class="token string">'npm init @eslint/config'</span><span class="token builtin class-name">.</span>
npx: <span class="token number">43</span> 安装成功，用时 <span class="token number">7.175</span> 秒
✔ How would you like to use ESLint? · problems
✔ What <span class="token builtin class-name">type</span> of modules does your project use? · esm
✔ Which framework does your project use? · vue
✔ Does your project use TypeScript? · No / Yes
✔ Where does your code run? · browser, <span class="token function">node</span>
✔ What <span class="token function">format</span> <span class="token keyword">do</span> you want your config <span class="token function">file</span> to be in? · JavaScript
The config that you've selected requires the following dependencies:

@typescript-eslint/eslint-plugin@latest eslint-plugin-vue@latest @typescript-eslint/parser@latest
✔ Would you like to <span class="token function">install</span> them now? · No / Yes
A config <span class="token function">file</span> was generated, but the config <span class="token function">file</span> itself may not follow your linting rules.
Successfully created .eslintrc.js <span class="token function">file</span> <span class="token keyword">in</span> /Users/zhouyuan10/test-code/verney-vue-design
</code></pre></div><blockquote><p>因为使用的是 <code>pnpm</code>,所以选择安装那些插件的时候我们选择了 <code>No</code>,这里我们用 <code>pnpm</code> 手动安装一下:</p></blockquote> <ul><li><p>手动安装：<code>pnpm i eslint-plugin-vue@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest -D -w</code></p></li> <li><p>可<code>.eslintrc.js</code>中添加规则：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 规则</span>
    <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">SwitchCase</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">quotes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'single'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">allowTemplateLiterals</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'vue/html-self-closing'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'warn'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token keyword">void</span><span class="token operator">:</span> <span class="token string">'any'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">normal</span><span class="token operator">:</span> <span class="token string">'any'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">'any'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'vue/script-indent'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">baseIndent</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">switchCase</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>新建<code>.eslintignore</code>，配置忽略校验目录；</p></li> <li><p>然后在pkg中添加<code>lint: eslint --ext .js,.jsx,.vue,.ts,.tsx --quiet examples</code>命令，执行<code>pnpm run lint</code>校验下<code>examples</code>目录下代码~</p></li></ul> <blockquote><p>按照上面配置的规则，会提示一些不规范的地方~</p></blockquote> <ul><li>再添加命令：<code>lint:fix: eslint --ext .js,.jsx,.vue,.ts,.tsx --fix --quiet examples</code>, 执行<code>pnpm run lint:fix</code>会自动修复；</li></ul> <p>但现在想实现<strong>保存自动格式化</strong>还需要安装<code>Prettier</code>, ESLint 经常结合 Prettier 一起使用才能体现它们的能力,Prettier 主要是对代码做格式化~</p> <h4 id="prettier"><a href="#prettier" class="header-anchor">#</a> Prettier</h4> <blockquote><p>Prettier是一款强大的代码格式化工具。</p></blockquote> <ul><li><p>安装：<code>pnpm add prettier -D -w</code></p></li> <li><p>新建<code>.prettierrc.js</code>， 配置；</p></li> <li><p>解决eslint和prettier冲突, 安装：<code>pnpm add eslint-config-prettier eslint-plugin-prettier -D -w</code></p></li></ul> <blockquote><p><code>eslint-config-prettier</code> 覆盖 eslint 本身规则; <code>eslint-plugin-prettier</code> 关闭 ESLint 中与 Prettier 中会发生冲突的规则~</p></blockquote> <ul><li><p><code>.eslintrc.js</code>的<code>extends</code>中添加 <code>prettier</code> 插件，也可以在<code>rules</code>添加<code>prettier</code>的规则；</p></li> <li><p>根目录新建<code>.vscode/settings.json</code>文件：</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token comment">// eslint配置</span>
  <span class="token property">&quot;eslint.run&quot;</span><span class="token operator">:</span> <span class="token string">&quot;onSave&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 保存的时候执行校验</span>
  <span class="token comment">// eslint 自动修复</span>
    <span class="token property">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>之后<code>vscode</code>重启项目，代码不规范的部分会高亮提示，<code>cmd + s</code>会自动修复~</li></ul> <p><strong>StyleLint</strong></p> <blockquote><p><a href="https://stylelint.io/" target="_blank" rel="noopener noreferrer">Stylelint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以帮助我们规范化 css 的书写，风格统一，减少错误；使用和配置跟 eslint 比较类似~</p></blockquote> <blockquote><p>由于Prettier也能格式化css代码，能暂时满足代码规范的需求，所以这里我先不配置stylelint，等以后再配置~</p></blockquote> <p>eslint可以对代码进行格式校验，prettier可以对代码进行格式化，但不能保证每个人提交的代码都是按照规范提交的，所以需要约定一些代码提交规范，保证代码提交风格的一致性，提升代码的可维护性~</p> <h4 id="husky"><a href="#husky" class="header-anchor">#</a> Husky</h4> <blockquote><p>Husky 可以在我们提交代码之前校验我们的代码是否符合我们配置的规范~</p></blockquote> <p><code>Husky</code>是一种工具, 让我们可以轻松地接入 <code>Git hooks</code> ，并在我们需要的某些阶段运行脚本，这些事件包括提交的不同阶段，例如在提交之前（<code>pre-commit</code>,提交之后（<code>post-commit</code>）。</p> <ul><li><p>安装：<code>pnpm i husky -D -w</code></p></li> <li><p>pkg中添加脚本命令：<code>prepare: husky install</code>；</p></li> <li><p>执行<code>npx husky install</code>, 项目根目录下会生成<code>.husky</code>目录；</p></li> <li><p>添加一个<code>lint</code>钩子：<code>.husky</code>目录下新建<code>pre-commit</code>，写入以下内容：</p></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

<span class="token function">pnpm</span> run lint
</code></pre></div><blockquote><p>这样就能在<code>pre-commit</code>阶段，也就是每次commit提交之前先执行eslint校验~</p></blockquote> <h4 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> CommitLint</h4> <blockquote><p>我们看开源项目的时候会看到它们的提交信息会有诸如<code>feat: 添加xxx,fix: 修复xxxbug</code>之类的信息,其实这些就是提交规范；为了利于其他同学分析你提交的代码，所以需要约定commit提交规范~</p></blockquote> <ul><li>安装：<code>pnpm install -D @commitlint/config-conventional @commitlint/cli -w</code></li></ul> <blockquote><p><code>@commitlint/config-conventional</code> 是一个规范配置,标识采用什么规范来执行消息校验, 这个默认是 <code>Angular</code> 的提交规范; <code>@commitlint/cli</code> 是一个使用 <code>lint</code> 规则来校验提交记录的命令行工具</p></blockquote> <ul><li>项目根目录下创建<code>.commitlintrc</code>，并写入配置：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@commitlint/config-conventional&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>.husky</code>下新建<code>commit-msg</code>文件：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

npx --no -- commitlint --edit <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
</code></pre></div><ul><li>之后随便提交一个不符合规范的commit，就会报错了；正确的提交格式是：<code>&lt;type&gt;(&lt;?scope&gt;): &lt;subject&gt;</code>, 如：<code>git commit -am&quot;feat: &quot;新增commitlint提交g规范&quot;&quot;</code></li></ul> <h4 id="lint-staged"><a href="#lint-staged" class="header-anchor">#</a> Lint-staged</h4> <blockquote><p>Husky 可以在<code>git-hooks</code>的代码提交之前阶段执行代码校验，CommitLint 约定了我们的代码commit规范；但每次提交代码的时候 <code>ESlint</code> 或 <code>Stylelint</code> 都会检查所有文件,而我们需要的是只让它们检测新增的文件,因此我们可以使用<code>lint-staged</code>来解决这个问题~</p></blockquote> <ul><li><p>安装：<code>pnpm add lint-staged -D -w</code></p></li> <li><p>pkg中添加命令：</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,jsx,ts,tsx,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint --ext .js,.jsx,.vue,.ts,.tsx --fix --quiet ./&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>修改<code>.husky/pre-commit</code>中的命令：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

<span class="token comment"># pnpm run lint</span>
<span class="token function">pnpm</span> run lint-staged
</code></pre></div><blockquote><p>配置完成后，每次<code>commit</code>之前就只会检测我们添加到暂存区的文件了~</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">总结</p> <ul><li>通过 <code>eslint</code> 完成对规则的限制</li> <li>通过 <code>prettier</code> 完成对格式化定义，以及使用 <code>eslint-config-prettier</code> 抹平与 <code>eslint</code> 自带格式化的冲突问题</li> <li>通过 <code>stylelint</code> 完成对 css 的检查和格式化</li> <li>通过 <code>husky</code> 添加 <code>pre-commit</code> 钩子，在代码提交之前进行校验</li> <li>通过 <code>commitLint</code>规范代码提交格式</li> <li>通过 <code>lint-staged</code> 完成只对暂存区代码的校验和格式化工作</li></ul></div> <blockquote><p>参考：</p></blockquote> <ul><li><a href="https://juejin.cn/post/7207769757571858490" target="_blank" rel="noopener noreferrer">从0搭建Vue3组件库(十一): 集成项目的编程规范工具链(ESlint+Prettier+Stylelint)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7236591682631745594" target="_blank" rel="noopener noreferrer">从0搭建Vue3组件库(十三):引入Husky规范git提交<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="添加vitest测试"><a href="#添加vitest测试" class="header-anchor">#</a> 添加Vitest测试</h3> <blockquote><p><a href="https://cn.vitest.dev/guide/" target="_blank" rel="noopener noreferrer">Vitest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是个高性能的前端单元测试框架,它的用法其实和 Jest 差不多,但是它的性能要优于 Jest 不少,还提供了很好的 ESM 支持,同时对于使用 vite 作为构建工具的项目来说有一个好处就是可以公用同一个配置文件vite.config.js。因此本项目将会使用 Vitest 作为测试框架。</p></blockquote> <ul><li><p>安装：<code>pnpm add vitest happy-dom c8 @vitest/coverage-v8 @vue/test-utils -D -w</code></p> <ul><li><a href="https://github.com/capricorn86/happy-dom" target="_blank" rel="noopener noreferrer">happy-dom<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 通过提供 Browser API 模拟浏览器环境，在测试的运行环境 node 下提供对 web 标准的模拟实现；</li> <li><a href="https://github.com/bcoe/c8" target="_blank" rel="noopener noreferrer">c8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 工具可以展示测试覆盖率,<code>@vitest/coverage-v8</code>是viteset提供的展示测试覆盖率的插件；</li> <li><a href="https://test-utils.vuejs.org/" target="_blank" rel="noopener noreferrer">@vue/test-utils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是 Vue.js 官方的单元测试实用工具库。</li></ul></li> <li><p><code>vite.config.ts</code>中添加配置：</p></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// packages/verney-components/vite.config.ts</span>

<span class="token comment">/// &lt;reference types=&quot;vitest&quot; /&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
        <span class="token operator">...</span>
        test<span class="token operator">:</span> <span class="token punctuation">{</span>
            environment<span class="token operator">:</span> <span class="token string">&quot;happy-dom&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>///</code>三斜线命令告诉编译器在编译过程中要引入的额外的文件</p></blockquote> <ul><li>pkg中添加测试命令：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 单元测试</span>
    <span class="token property">&quot;coverage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest run --coverage&quot;</span> <span class="token comment">// 查看测试覆盖率</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>然后可以新建<code>index.test.ts</code>测试命令是否生效：</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// packages/verney-components/src/index.test.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> describe<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> it <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vitest'</span><span class="token punctuation">;</span>

<span class="token comment">// describe 和 it 指示了在进行 case test:</span>
<span class="token comment">// describe 是对 case test 的描述，而 it 则是对 case test 的具体实现。</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'hello venney-ui-test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be hello venney-ui-test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// expect用于验证代码的行为和输出是否符合预期的方式</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token string">'venney-ui-test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'hello venney-ui-test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>添加之后执行<code>pnpm run test</code>和<code>pnpm run coverage</code>，看看测试是否生效~</p></blockquote> <ul><li>测试命令生效后，接着以<code>button</code>组件为例，添加组件测试用例；<code>button</code>组件目录下新建<code>__test__/button.test.ts</code>:</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// packages/verney-components/src/button/__tests__/button.test.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> describe<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> it <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vitest'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> button <span class="token keyword">from</span> <span class="token string">'../button.vue'</span><span class="token punctuation">;</span> <span class="token comment">// 引入button组件</span>

<span class="token comment">// 测试组件</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test button'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// case1: 测试组件是否正常渲染</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should render slot'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>button<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            slots<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'verney-button-test'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'verney-button-test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// case2: 当我们传入的type为primary的时候,期望组件的类名为vn-button__primary</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should have class'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>button<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            props<span class="token operator">:</span> <span class="token punctuation">{</span>
                type<span class="token operator">:</span> <span class="token string">'primary'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">classes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'vn-button__primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>可以看下<code>button.vue</code>组件的代码：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>verney-ui-button__wrapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buttonStyle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        button 组件
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> buttonProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types'</span><span class="token punctuation">;</span> <span class="token comment">// 导入组件类型</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span>buttonProps<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义组件属性</span>

<span class="token keyword">const</span> buttonStyle <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> props<span class="token punctuation">.</span>type <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vn-button__</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>可以看到上面测试用例传了<code>slot</code>和<code>type</code>属性分别测试了button组件的两种场景~</p></blockquote> <ul><li>添加完成后，执行<code>pnpm run test</code>:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> ✓ src<span class="token operator">/</span>index<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">ts</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 ✓ src<span class="token operator">/</span>button<span class="token operator">/</span>__tests__<span class="token operator">/</span>button<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">ts</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

 Test Files  <span class="token number">2</span> <span class="token function">passed</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">3</span> <span class="token function">passed</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
   Start at  <span class="token number">15</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">57</span>
   Duration  <span class="token number">469</span><span class="token function">ms</span> <span class="token punctuation">(</span>transform 130ms<span class="token punctuation">,</span> setup 0ms<span class="token punctuation">,</span> collect 168ms<span class="token punctuation">,</span> tests 16ms<span class="token punctuation">,</span> environment 255ms<span class="token punctuation">,</span> prepare 135ms<span class="token punctuation">)</span>


 <span class="token constant">PASS</span>  Waiting <span class="token keyword">for</span> file changes<span class="token operator">...</span>
       press h to show help<span class="token punctuation">,</span> press q to quit
</code></pre></div><blockquote><p>正常情况下，如果测试通过就会出现上面提示信息~</p></blockquote> <ul><li>接着看下测试覆盖率：<code>pnpm run coverage</code>:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>✓ src<span class="token operator">/</span>index<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">ts</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 ✓ src<span class="token operator">/</span>button<span class="token operator">/</span>__tests__<span class="token operator">/</span>button<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">ts</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

 Test Files  <span class="token number">2</span> <span class="token function">passed</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      Tests  <span class="token number">3</span> <span class="token function">passed</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
   Start at  <span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">20</span>
   Duration  <span class="token number">636</span><span class="token function">ms</span> <span class="token punctuation">(</span>transform 164ms<span class="token punctuation">,</span> setup 0ms<span class="token punctuation">,</span> collect 200ms<span class="token punctuation">,</span> tests 18ms<span class="token punctuation">,</span> environment 250ms<span class="token punctuation">,</span> prepare 196ms<span class="token punctuation">)</span>

 <span class="token operator">%</span> Coverage report from v8
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
File                   <span class="token operator">|</span> <span class="token operator">%</span> Stmts <span class="token operator">|</span> <span class="token operator">%</span> Branch <span class="token operator">|</span> <span class="token operator">%</span> Funcs <span class="token operator">|</span> <span class="token operator">%</span> Lines <span class="token operator">|</span> Uncovered Line #s 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
All files              <span class="token operator">|</span>   <span class="token number">46.37</span> <span class="token operator">|</span>    <span class="token number">45.45</span> <span class="token operator">|</span>    <span class="token number">12.5</span> <span class="token operator">|</span>   <span class="token number">46.37</span> <span class="token operator">|</span>                   
 verney<span class="token operator">-</span>components     <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>                   
  index<span class="token punctuation">.</span>ts             <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">12</span>              
 verney<span class="token operator">-</span>components<span class="token operator">/</span>src <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>                   
  index<span class="token punctuation">.</span>ts             <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">8</span>               
 <span class="token operator">...</span>ponents<span class="token operator">/</span>src<span class="token operator">/</span>button <span class="token operator">|</span>   <span class="token number">85.33</span> <span class="token operator">|</span>    <span class="token number">83.33</span> <span class="token operator">|</span>   <span class="token number">33.33</span> <span class="token operator">|</span>   <span class="token number">85.33</span> <span class="token operator">|</span>                   
  button<span class="token punctuation">.</span>vue           <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>      <span class="token number">100</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>                   
  index<span class="token punctuation">.</span>ts             <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span>               
  types<span class="token punctuation">.</span>ts             <span class="token operator">|</span>   <span class="token number">93.54</span> <span class="token operator">|</span>      <span class="token number">100</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">93.54</span> <span class="token operator">|</span> <span class="token number">24</span><span class="token operator">-</span><span class="token number">25</span>             
 <span class="token operator">...</span>mponents<span class="token operator">/</span>src<span class="token operator">/</span>input <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>                   
  index<span class="token punctuation">.</span>ts             <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">4</span>               
  input<span class="token punctuation">.</span>vue            <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">16</span>              
  types<span class="token punctuation">.</span>ts             <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>        <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">23</span>              
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
</code></pre></div><ul><li><code>%stmts</code> 是语句覆盖率（<code>statement coverage</code>）：是不是每个语句都执行了</li> <li><code>%Branch</code> 分支覆盖率（<code>branch coverage</code>）：是不是每个 <code>if</code> 代码块都执行了</li> <li><code>%Funcs</code> 函数覆盖率（<code>function coverage</code>）：是不是每个函数都调用了</li> <li><code>%Lines</code> 行覆盖率（<code>line coverage</code>）：是不是每一行都执行了</li></ul> <blockquote><p>以上就是引入 Vitest 的大致流程，其他组件的测试case写法跟 Button 组件的写法差不多~</p></blockquote> <blockquote><p>参考：</p></blockquote> <ul><li><a href="https://juejin.cn/post/7209924355803185209" target="_blank" rel="noopener noreferrer">从0搭建Vue3组件库(十二):引入现代前端测试框架 Vitest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="项目优化"><a href="#项目优化" class="header-anchor">#</a> 项目优化</h2> <blockquote><p>上面我们算是完整的走了一遍从项目创建到打包发布的全流程，但对于项目还有很多需要优化的地方，这里记录下优化的case~</p></blockquote> <h3 id="setup语法定义组件名"><a href="#setup语法定义组件名" class="header-anchor">#</a> setup语法定义组件名</h3> <p>以前我们在<code>setup</code>语法中给组件命名通常这样写：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>这样写没问题，但需要写两个<code>&lt;script&gt;</code>标签，不太优雅，可通过安装插件解决~</p></blockquote> <ul><li><p>安装插件：<code>pnpm add unplugin-vue-define-options -D -w</code></p></li> <li><p><code>vite.config.ts</code>中配置：</p></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&quot;@vitejs/plugin-vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// @ts-ignore</span>
<span class="token keyword">import</span> DefineOptions <span class="token keyword">from</span> <span class="token string">&quot;unplugin-vue-define-options/vite&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DefineOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>使用：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>测试按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">defineOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vn-button&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>       
</code></pre></div><h3 id="vue版本冲突"><a href="#vue版本冲突" class="header-anchor">#</a> Vue版本冲突</h3> <blockquote><p>因为本项目是采用的 <code>Monorepo</code> 代码组织方式，所以难免会出现依赖包重合（版本不同）的问题，比如整个项目即安装了<code>vue2</code>也安装了<code>vue3</code>，起项目时就可能会报错~</p></blockquote> <ul><li>根目录新建<code>.npmrc</code>:</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>shared-workspace-lockfile <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment"># 默认为true, 启用此选项，pnpm 会在工作空间的根目录中创建一个唯一的 pnpm-lock.yaml 文件</span>
</code></pre></div><blockquote><p>配置之后，在每一个子项目中都会生成一个<code>pnpm.lock.yaml</code>~</p></blockquote> <p><a href="https://pnpm.io/zh/next/npmrc#workspace-settings" target="_blank" rel="noopener noreferrer">link-workspace-packages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="组件文档ai对话"><a href="#组件文档ai对话" class="header-anchor">#</a> 组件文档AI对话</h2> <p>现在出了一个叫<a href="https://github.com/AirCodeLabs/documate" target="_blank" rel="noopener noreferrer">documate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的开源库，它可以给doc网站提供AI能力;</p> <p>配置的话比较简单，按这个流程操作就行：<a href="https://mp.weixin.qq.com/s/rCyPlUUczmk3uF7ut15ZXg" target="_blank" rel="noopener noreferrer">【黑科技】让你的 VitePress 文档站支持 AI 对话能力<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，需要提供自己的<code>OPEN_AI_KEY</code>~</p> <p><a href="https://documate.site/" target="_blank" rel="noopener noreferrer">https://documate.site/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://aircode.io/dashboard" target="_blank" rel="noopener noreferrer">Aircode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，一个在线编写和部署 Node.js 应用的平台</p> <h2 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h2> <blockquote><p>这里记录下以后打算做的todo~</p></blockquote> <h3 id="样式隔离-2"><a href="#样式隔离-2" class="header-anchor">#</a> 样式隔离</h3> <blockquote><p>不同UI库间在vitepress项目中会存在样式覆盖的情况~</p></blockquote> <ul><li><p>方案1：用<code>iframe</code>加载预览demo组件~</p></li> <li><p>方案2： shadow dom 的沙箱机制</p></li></ul> <p><a href="https://juejin.cn/post/7129805829892472845" target="_blank" rel="noopener noreferrer">完结篇！一步一步实现一个专业的前端组件库～<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="跨框架组件库"><a href="#跨框架组件库" class="header-anchor">#</a> 跨框架组件库</h3> <p>vitepress 是支持在 markdown 里直接写 vue3 代码，根据官网<a href="https://vitepress.dev/guide/using-vue" target="_blank" rel="noopener noreferrer">Using Vue in Markdown<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>介绍，md文件最终编译成vue3的组件形式。</p> <blockquote><p>从大体上看，我们可以简单理解成 <code>md</code>文件 即是 <code>.vue</code> 文件, 我们可以在里面写<code>html</code>、写<code>vue3</code>组件、写<code>script</code>、写<code>style</code>，灵活度非常高; 但目前 vitepress 好像只支持<code>vue3</code></p></blockquote> <p>Q: 那如何让 vitepress 支持引入 vue2组件呢？</p> <p><a href="https://juejin.cn/post/7126477752718327839" target="_blank" rel="noopener noreferrer">组件库——如何实现一个跨框架的组件库文档？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>跨框架方案</li></ul> <ol><li>Web Components：如京东的<code>Taro UI</code></li></ol> <p><a href="https://mp.weixin.qq.com/s/pGXN9tEfyu0hCM_KeF2kZg" target="_blank" rel="noopener noreferrer">如何实现跨框架（React、Vue、Solid）的前端组件库？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/opentiny/tiny-vue" target="_blank" rel="noopener noreferrer">Tiny Vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/opentiny/cross-framework-component" target="_blank" rel="noopener noreferrer">cross-framework-component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="2"><li><a href="https://mp.weixin.qq.com/s/XuEc1TnLuzMokylde4DkhQ" target="_blank" rel="noopener noreferrer">想要开发组件库？那你一定要提前了解一下这个神器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/BuilderIO/mitosis" target="_blank" rel="noopener noreferrer">Mitosis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <ul><li>封装Element-UI</li> <li>封装Element-Plus</li> <li>封装Ant-Design</li></ul> <h3 id="gulp管理组件库打包发布"><a href="#gulp管理组件库打包发布" class="header-anchor">#</a> gulp管理组件库打包发布</h3> <blockquote><p>打包一个组件库，我们可能要移除文件、copy文件，打包样式、打包组件、执行一些命令还有一键打包多个package等等都可以由gulp进行自定义流程的控制，非常的方便。</p></blockquote> <ul><li><a href="https://juejin.cn/post/7201132695623335991" target="_blank" rel="noopener noreferrer">使用 gulp 打包组件库并实现按需加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7201506099341983801" target="_blank" rel="noopener noreferrer">使用 release-it 实现自动管理发布组件库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="组件库自动发布"><a href="#组件库自动发布" class="header-anchor">#</a> 组件库自动发布</h3> <blockquote><p>现在组件库和工具库都是手动发布的，等有时间写个脚本让它们自动发布~</p></blockquote> <p><a href="https://github.com/MrWeilian/much-more-design/blob/main/scripts/release.ts" target="_blank" rel="noopener noreferrer">https://github.com/MrWeilian/much-more-design/blob/main/scripts/release.ts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Q: 还有<code>组件库打包入口与开发入口不一致</code>,这个问题看是否可以自动配置？</p> <h2 id="备注"><a href="#备注" class="header-anchor">#</a> 备注</h2> <ul><li>packages内部的库更新后，如何同步更新到其他库？</li></ul> <blockquote><p>添加<code>workspace:^1.0.0</code>后，本地修改就能够自动更新</p></blockquote> <ul><li>组件库怎么兼容不同项目的版本问题？比如组件库开发的react版本是<code>v.17+</code>,但有些项目的react是<code>v15+</code>或<code>v18+</code></li></ul> <p><strong>部署发布相关：</strong></p> <ol><li>monorepo项目里面的子项目如果要发布，进到相应子项目目录下，如果是组件库，先<code>run build</code>打包，打包完成执行<code>npm publish</code>发布命令即可单独发布子项目, 不需要修改依赖配置；</li> <li>子项目如果要部署，如果是在<code>verney-vue-design</code>项目内执行，不需要修改依赖的<code>workplace</code>配置，直接<code>run build</code>, pnpm 会处理依赖关系；打包完成将 dist 放在相应的服务上即可访问；</li> <li>比如当组件库和文档都有更新时：</li></ol> <ul><li><code>docs</code>文档项目要上线vercel，首先会把整个项目<code>verney-vue-design</code>提交，之后vercel在打包docs项目时，会按照配置好的<code>workplace</code>依赖关系直接获取组件项目最新的修改，即不需要将组件发布，即可在文档中看到最新的修改；</li> <li>但如果是在其他项目中用到了组件库，就需要先将组件库发布，然后在其他项目中重新下载依赖才可以看到最新的修改~</li></ul> <p><a href="https://pnpm.io/zh/pnpm-cli" target="_blank" rel="noopener noreferrer">pnpm命令<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-sh extra-class"><pre class="language-sh"><code>
<span class="token function">pnpm</span> run -C packages/element-plus build <span class="token comment"># -C &lt;path&gt;, --dir &lt;path&gt;: 将 &lt;path&gt; 设置为 pnpm 的运行目录，而不是当前目录。</span>

<span class="token function">pnpm</span> <span class="token function">add</span> vite --F examples <span class="token comment"># pnpm add 是 pnpm 中安装依赖包的命令， --F examples 是指定依赖安装到 examples 子工程中</span>
<span class="token comment"># 注意：examples 是取 examples 子工程中 package.json 中 name 字段的值，而不是 examples 子工程文件夹的名称。</span>
<span class="token function">pnpm</span> <span class="token function">add</span> react --filter pkg1<span class="token punctuation">(</span>项目名<span class="token punctuation">)</span> <span class="token comment"># --filter &lt;package_name&gt;,可以用来对特定的package进行某些操作。 --filter 参数跟着的是package下的 package.json 的 name 字段，并不是目录名。</span>

<span class="token function">pnpm</span> <span class="token function">add</span> react -w  <span class="token comment"># 将依赖包安装到工程的根目录下，作为所有 package 的公共依赖。</span>
<span class="token function">pnpm</span> <span class="token function">add</span> react -wD  <span class="token comment"># 会装到 pacakage.json 中的 devDependencies</span>
</code></pre></div><h2 id="报错记录"><a href="#报错记录" class="header-anchor">#</a> 报错记录</h2> <ul><li><code>pnpm run build</code>打包组件库时报错: <code>SyntaxError: Unexpected reserved word</code></li></ul> <blockquote><p>node版本问题，升级到<code>v16+</code>试试~</p></blockquote> <ul><li><code>examples</code> 项目中全局引入组件后直接使用<code>VnInput</code>组件报错：</li></ul> <p><code>Failed to resolve component: VnInput If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.</code></p> <blockquote><p>组件<code>name</code>为<code>vn-input</code>，改为<code>&lt;vn-input /&gt;</code>使用即可~</p></blockquote> <ul><li>添加<code>commitlint</code>后执行<code>git commit</code>提交提示：<code>The '.husky/commit-msg' hook was ignored because it's not set as executable.</code>, 代码提交格式校验没生效~</li></ul> <blockquote><p>执行<code>chmod ug+x .husky/*</code>后再提交即可; 参考：<a href="https://github.com/typicode/husky/issues/1177" target="_blank" rel="noopener noreferrer">hook was ignored because it's not set as executable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="收藏"><a href="#收藏" class="header-anchor">#</a> 收藏</h2> <ul><li><a href="https://www.logosc.cn/logo/favicon" target="_blank" rel="noopener noreferrer">免费Favicon.ico图标在线生成器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><p><a href="https://juejin.cn/post/7117886038126624805" target="_blank" rel="noopener noreferrer">使用Vite和TypeScript带你从零打造一个属于自己的Vue3组件库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/column/7118932817119019015" target="_blank" rel="noopener noreferrer">Vite+TypeScript从零搭建Vue3组件库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/7120893568553582622" target="_blank" rel="noopener noreferrer">快上车！从零开始搭建一个属于自己的组件库！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <p>项目参考：</p> <ul><li><a href="https://github.com/element-plus/element-plus" target="_blank" rel="noopener noreferrer">element-plus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/MrWeilian/much-more-design" target="_blank" rel="noopener noreferrer">much-more-design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/qddidi/easyest" target="_blank" rel="noopener noreferrer">easyest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://gitee.com/geeksdidi/kittyui" target="_blank" rel="noopener noreferrer">kittyui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blog/tags/?tag=%E7%BB%84%E4%BB%B6%E5%BA%93" title="标签">#组件库</a><a href="/blog/tags/?tag=vitepress" title="标签">#vitepress</a><a href="/blog/tags/?tag=monorepo" title="标签">#monorepo</a><a href="/blog/tags/?tag=vite" title="标签">#vite</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/13/2024, 9:15:06 PM</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/more/node-deploy.html"><div>
            Vue+Node实现可视化部署工具
            <!----></div></a> <span class="date">01-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/tool/vscode-plugins.html"><div>
            VSCode插件开发笔记
            <!----></div></a> <span class="date">01-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/skills/vue/vue3-cli-repo.html"><div>
            开发一个快速搭建vue3项目的脚手架
            <!----></div></a> <span class="date">12-13</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2024
    <span>一苇 | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal"><img src="/blog/images/icp.png" width="20" height="20" alt="公网备案"/>京ICP备2021006935号-2</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><!----><div></div></div></div>
    <script src="/blog/assets/js/app.76fa57e6.js" defer></script><script src="/blog/assets/js/3.a2a245ac.js" defer></script><script src="/blog/assets/js/149.0e52c725.js" defer></script><script src="/blog/assets/js/4.245b4373.js" defer></script>
  </body>
</html>

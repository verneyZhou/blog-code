(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{715:function(s,t,n){"use strict";n.r(t);var a=n(8),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"nginx的安装与配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的安装与配置"}},[s._v("#")]),s._v(" nginx的安装与配置")]),s._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/c3294887c6b6",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mac上搭建nginx教程"),n("OutboundLink")],1)]),s._v(" "),n("ul",[n("li",[s._v("安装")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("brew "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mac上通过brew进行安装")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认是安装到 /usr/local/Cellar/ 目录下")]),s._v("\n➜  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/Cellar/nginx\n➜  nginx "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.17")]),s._v(".3_1\n\n\n  ~ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" nginx  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过which 找到nginx所在路径")]),s._v("\n/usr/local/bin/nginx\n➜  ~ ll /usr/local/bin/nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该路径指向的实际运行文件位于哪里~")]),s._v("\nlrwxr-xr-x  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" admin  admin    34B  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":43 /usr/local/bin/nginx -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/Cellar/nginx/1.17.3_1/bin/nginx\n")])])]),n("ul",[n("li",[s._v("启动")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装后命令行直接输入即可启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx: [emerg] bind() to 0.0.0.0:8080 failed (48: Address already in use)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx: [emerg] bind() to 0.0.0.0:8089 failed (48: Address already in use)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx: [emerg] bind() to 0.0.0.0:443 failed (48: Address already in use)")]),s._v("\n")])])]),n("h2",{attrs:{id:"修改配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),n("hr"),s._v(" "),n("ol",[n("li",[s._v("修改"),n("code",[s._v("nginx.conf")]),s._v("文件")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  nginx的配置文件位于/usr/local/etc/目录下~")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/etc/nginx/nginx.conf "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开nginx.conf文件")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  修改")]),s._v("\nuser admin owner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# admin为电脑用户名")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在结尾大括号之前添加；")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /Users/admin/upload/upload.conf 是额外的配置文件")]),s._v("\ninclude /Users/admin/upload/upload.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("添加 /Users/admin/upload/upload.conf 文件，配置如下：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  http配置")]),s._v("\nserver\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  charset utf-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 字符编码类型")]),s._v("\n  listen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8089")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口号(这里自定义端口为8089，原nginx.conf配置中默认端口是8080)")]),s._v("\n  server_name http_host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义name")]),s._v("\n  root /Users/admin/upload/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 资源文件的路径！！！")]),s._v("\n  autoindex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否打开索引，一般线上资源为为off")]),s._v("\n  add_header Cache-Control "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 缓存控制：不使用缓存")]),s._v("\n  location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 路由：/ 表示监听所有路由")]),s._v("\n    add_header Access-Control-Allow-Origin *"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跨域处理：一般上线时*要改为具体域名~")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  https配置")]),s._v("\nserver\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  listen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" default ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https的默认端口")]),s._v("\n  server_name https_host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  root /Users/admin/upload/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  autoindex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  add_header Cache-Control "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    add_header Access-Control-Allow-Origin *"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   证书和密钥得先在阿里云上购买域名，申请ssl证书后，下载到本地，然后重命令，放到 /Users/admin/upload/https/ 目录下~")]),s._v("\n  ssl_certificate /Users/admin/upload/https/verneyzhou-code.cn.pem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 证书")]),s._v("\n  ssl_certificate_key /Users/admin/upload/https/verneyzhou-code.cn.key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密钥")]),s._v("\n  \n  \n  ssl_session_timeout  5m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 超时时间 5min")]),s._v("\n  ssl_protocols  SSLv3 TLSv1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_ciphers  ALL:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ADH:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_prefer_server_ciphers  on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("h2",{attrs:{id:"启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),n("hr"),s._v(" "),n("ul",[n("li",[n("strong",[s._v("启动")])])]),s._v(" "),n("blockquote",[n("p",[s._v("命令行输入"),n("code",[s._v("sudo nginx")]),s._v("启动")])]),s._v(" "),n("ol",[n("li",[s._v("启动之后浏览器输入："),n("code",[s._v("http://localhost:8080")]),s._v("能访问到默认的位于"),n("code",[s._v("/usr/local/Cellar/nginx/1.17.3_1/html/")]),s._v("下的资源：")])]),s._v(" "),n("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/images/project/nginx001.png"),width:"auto"}}),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("输入："),n("code",[s._v("http://localhost:8089")]),s._v("则能访问到我们自己配置的位于 "),n("code",[s._v("/Users/admin/upload/")]),s._v(" 下的资源：")])]),s._v(" "),n("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/images/project/nginx002.png"),width:"auto"}}),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("输入："),n("code",[s._v("https://localhost")]),s._v("也能访问我们自己配置的位于 "),n("code",[s._v("/Users/admin/upload/")]),s._v(" 下的资源：")])]),s._v(" "),n("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/images/project/nginx003.png"),width:"auto"}}),s._v(" "),n("blockquote",[n("p",[s._v("提示不安全是因为ssl证书是跟域名绑定的，这里输入的是localhost提示不安全是正常的~")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("代理域名")])])]),s._v(" "),n("ol",[n("li",[s._v("接下来可通过"),n("code",[s._v("switchHosts")]),s._v(" 将 本地ip代理到配置文件中ssl证书对应的域名：")])]),s._v(" "),n("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/images/project/nginx004.png"),width:"auto"}}),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("也可通过命令行直接修改：")])]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/hosts "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mac根目录下etc一般保存着电脑的host配置文件")]),s._v("\n")])])]),n("p",[s._v("现在在浏览器输入："),n("code",[s._v("https://www.verneyzhou-code.cn/")]),s._v(" 就可以访问到本地 "),n("code",[s._v("/Users/admin/upload/")]),s._v(" 下的资源：")]),s._v(" "),n("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/images/project/nginx005.png"),width:"auto"}}),s._v(" "),n("blockquote",[n("p",[s._v("这样就不会提示不安全~")])]),s._v(" "),n("h2",{attrs:{id:"常见命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见命令"}},[s._v("#")]),s._v(" 常见命令")]),s._v(" "),n("hr"),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx -s stop "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止nginx服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx -s reload "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nginx -t "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否有语法错误 / 查看nginx安装目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx安装目录")]),s._v("\n\n:set nu  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当vim nginx.conf 打开配置文件后可输入此命令显示行数")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://www.verneyzhou-code.cn:18082/user/login -X POST -d "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username=sam&password=123456"')]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终端调用接口")]),s._v("\n")])])]),n("h2",{attrs:{id:"常见问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),n("hr"),s._v(" "),n("blockquote",[n("p",[s._v("暂无~")])]),s._v(" "),n("fix-link",{attrs:{label:"Back",href:"/project/vue-node-admin/"}})],1)}),[],!1,null,null,null);t.default=e.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Turbopack初印象 | 一苇</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/icons/favicon.ico">
    <link rel="manifest" href="/blog/js/mainfest.json">
    <link rel="stylesheet" href="/blog/styles/css/style.css">
    <script type="utf-8" src="/blog/js/disable-user-zoom.js"></script>
    <meta name="description" content="这是阿沐的博客哦~">
    <meta name="Author" content="一苇">
    <meta rel="keywords" content="verneyzhou,阿沐,一苇,前端,docs.verneyzhou-code.cn,博客,fe,IT,技术">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.61668f40.css" as="style"><link rel="preload" href="/blog/assets/js/app.0f95228c.js" as="script"><link rel="preload" href="/blog/assets/js/3.a2a245ac.js" as="script"><link rel="preload" href="/blog/assets/js/81.d5890383.js" as="script"><link rel="preload" href="/blog/assets/js/4.245b4373.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b54d0f20.js"><link rel="prefetch" href="/blog/assets/js/100.756dbdde.js"><link rel="prefetch" href="/blog/assets/js/101.4166e909.js"><link rel="prefetch" href="/blog/assets/js/102.6d4c2645.js"><link rel="prefetch" href="/blog/assets/js/103.57dc8e76.js"><link rel="prefetch" href="/blog/assets/js/104.3e18ca8e.js"><link rel="prefetch" href="/blog/assets/js/105.59219ef0.js"><link rel="prefetch" href="/blog/assets/js/106.4b828c0e.js"><link rel="prefetch" href="/blog/assets/js/107.878a0660.js"><link rel="prefetch" href="/blog/assets/js/108.26952ee4.js"><link rel="prefetch" href="/blog/assets/js/109.385fafd9.js"><link rel="prefetch" href="/blog/assets/js/11.c503bf7b.js"><link rel="prefetch" href="/blog/assets/js/110.eb935c10.js"><link rel="prefetch" href="/blog/assets/js/111.d5b11fd3.js"><link rel="prefetch" href="/blog/assets/js/112.fdabdec2.js"><link rel="prefetch" href="/blog/assets/js/113.6a60abb8.js"><link rel="prefetch" href="/blog/assets/js/114.e8f5e502.js"><link rel="prefetch" href="/blog/assets/js/115.9d6fffad.js"><link rel="prefetch" href="/blog/assets/js/116.06a088bc.js"><link rel="prefetch" href="/blog/assets/js/117.74f98383.js"><link rel="prefetch" href="/blog/assets/js/118.f6884090.js"><link rel="prefetch" href="/blog/assets/js/119.261d9cce.js"><link rel="prefetch" href="/blog/assets/js/12.68619fb6.js"><link rel="prefetch" href="/blog/assets/js/120.d9e40ad4.js"><link rel="prefetch" href="/blog/assets/js/121.bc47b0a3.js"><link rel="prefetch" href="/blog/assets/js/122.82981b13.js"><link rel="prefetch" href="/blog/assets/js/123.62d44726.js"><link rel="prefetch" href="/blog/assets/js/124.d84e078c.js"><link rel="prefetch" href="/blog/assets/js/125.4dec074a.js"><link rel="prefetch" href="/blog/assets/js/126.0f8f5bcd.js"><link rel="prefetch" href="/blog/assets/js/127.dd9cf3e3.js"><link rel="prefetch" href="/blog/assets/js/128.dbb4cefd.js"><link rel="prefetch" href="/blog/assets/js/129.2296d8f0.js"><link rel="prefetch" href="/blog/assets/js/13.ff968c95.js"><link rel="prefetch" href="/blog/assets/js/130.43e1edce.js"><link rel="prefetch" href="/blog/assets/js/131.c78c2c45.js"><link rel="prefetch" href="/blog/assets/js/132.7dd1c26f.js"><link rel="prefetch" href="/blog/assets/js/133.2cc1367f.js"><link rel="prefetch" href="/blog/assets/js/134.c01f5483.js"><link rel="prefetch" href="/blog/assets/js/135.ab76f652.js"><link rel="prefetch" href="/blog/assets/js/136.d0af8220.js"><link rel="prefetch" href="/blog/assets/js/137.769ddd61.js"><link rel="prefetch" href="/blog/assets/js/138.2cca46fc.js"><link rel="prefetch" href="/blog/assets/js/139.431ebb31.js"><link rel="prefetch" href="/blog/assets/js/14.58e62b1d.js"><link rel="prefetch" href="/blog/assets/js/140.745cad36.js"><link rel="prefetch" href="/blog/assets/js/141.e3329fdf.js"><link rel="prefetch" href="/blog/assets/js/142.a7fda092.js"><link rel="prefetch" href="/blog/assets/js/143.939e54b5.js"><link rel="prefetch" href="/blog/assets/js/144.7c8292e3.js"><link rel="prefetch" href="/blog/assets/js/145.3437fb76.js"><link rel="prefetch" href="/blog/assets/js/146.96bbb72e.js"><link rel="prefetch" href="/blog/assets/js/147.6bfd1681.js"><link rel="prefetch" href="/blog/assets/js/148.a62113e4.js"><link rel="prefetch" href="/blog/assets/js/149.6c8830f7.js"><link rel="prefetch" href="/blog/assets/js/15.046a4928.js"><link rel="prefetch" href="/blog/assets/js/150.f4553ad6.js"><link rel="prefetch" href="/blog/assets/js/151.96f9178a.js"><link rel="prefetch" href="/blog/assets/js/152.5cb2ffb2.js"><link rel="prefetch" href="/blog/assets/js/153.0093d1a8.js"><link rel="prefetch" href="/blog/assets/js/154.554284df.js"><link rel="prefetch" href="/blog/assets/js/155.20296fb5.js"><link rel="prefetch" href="/blog/assets/js/156.a3c58c60.js"><link rel="prefetch" href="/blog/assets/js/157.8ff73c11.js"><link rel="prefetch" href="/blog/assets/js/158.5a6edb29.js"><link rel="prefetch" href="/blog/assets/js/159.60e92b6d.js"><link rel="prefetch" href="/blog/assets/js/16.aad2418a.js"><link rel="prefetch" href="/blog/assets/js/160.21c1a2a3.js"><link rel="prefetch" href="/blog/assets/js/161.8727e7a1.js"><link rel="prefetch" href="/blog/assets/js/162.6950cf71.js"><link rel="prefetch" href="/blog/assets/js/163.3b84b985.js"><link rel="prefetch" href="/blog/assets/js/164.5e24aa17.js"><link rel="prefetch" href="/blog/assets/js/165.08f6be99.js"><link rel="prefetch" href="/blog/assets/js/166.87adcee8.js"><link rel="prefetch" href="/blog/assets/js/167.fc3e6988.js"><link rel="prefetch" href="/blog/assets/js/168.6f2dc582.js"><link rel="prefetch" href="/blog/assets/js/169.64c4fbe6.js"><link rel="prefetch" href="/blog/assets/js/17.cc61cb56.js"><link rel="prefetch" href="/blog/assets/js/170.5224b044.js"><link rel="prefetch" href="/blog/assets/js/171.7695d1ab.js"><link rel="prefetch" href="/blog/assets/js/172.80ba3673.js"><link rel="prefetch" href="/blog/assets/js/173.2cea669f.js"><link rel="prefetch" href="/blog/assets/js/174.97ea86c0.js"><link rel="prefetch" href="/blog/assets/js/175.fcd9dd3a.js"><link rel="prefetch" href="/blog/assets/js/176.69779443.js"><link rel="prefetch" href="/blog/assets/js/177.e9915783.js"><link rel="prefetch" href="/blog/assets/js/178.8c2c452f.js"><link rel="prefetch" href="/blog/assets/js/179.79e26858.js"><link rel="prefetch" href="/blog/assets/js/18.3d26e7a4.js"><link rel="prefetch" href="/blog/assets/js/180.dee04beb.js"><link rel="prefetch" href="/blog/assets/js/181.1e64222a.js"><link rel="prefetch" href="/blog/assets/js/182.1ad3f445.js"><link rel="prefetch" href="/blog/assets/js/183.1aefb498.js"><link rel="prefetch" href="/blog/assets/js/184.d357ee66.js"><link rel="prefetch" href="/blog/assets/js/185.5ad07fc7.js"><link rel="prefetch" href="/blog/assets/js/186.3f8a60e6.js"><link rel="prefetch" href="/blog/assets/js/187.19f86e8d.js"><link rel="prefetch" href="/blog/assets/js/188.75afe9d8.js"><link rel="prefetch" href="/blog/assets/js/189.c46097bc.js"><link rel="prefetch" href="/blog/assets/js/19.a34628b9.js"><link rel="prefetch" href="/blog/assets/js/190.681b28d2.js"><link rel="prefetch" href="/blog/assets/js/191.264f721d.js"><link rel="prefetch" href="/blog/assets/js/192.3b249a12.js"><link rel="prefetch" href="/blog/assets/js/193.24521816.js"><link rel="prefetch" href="/blog/assets/js/194.3d065c35.js"><link rel="prefetch" href="/blog/assets/js/195.0f4c3881.js"><link rel="prefetch" href="/blog/assets/js/196.dabf1015.js"><link rel="prefetch" href="/blog/assets/js/197.e9ad0ceb.js"><link rel="prefetch" href="/blog/assets/js/198.f1abb7d4.js"><link rel="prefetch" href="/blog/assets/js/199.6561e896.js"><link rel="prefetch" href="/blog/assets/js/20.d7300073.js"><link rel="prefetch" href="/blog/assets/js/200.02925058.js"><link rel="prefetch" href="/blog/assets/js/21.a2131c93.js"><link rel="prefetch" href="/blog/assets/js/22.5cb6d5b8.js"><link rel="prefetch" href="/blog/assets/js/23.be1dd041.js"><link rel="prefetch" href="/blog/assets/js/24.fa534a08.js"><link rel="prefetch" href="/blog/assets/js/25.3f3fefdf.js"><link rel="prefetch" href="/blog/assets/js/26.0d85913f.js"><link rel="prefetch" href="/blog/assets/js/27.ee2a790f.js"><link rel="prefetch" href="/blog/assets/js/28.63191c38.js"><link rel="prefetch" href="/blog/assets/js/29.57418bd0.js"><link rel="prefetch" href="/blog/assets/js/30.5a20e92b.js"><link rel="prefetch" href="/blog/assets/js/31.c1600861.js"><link rel="prefetch" href="/blog/assets/js/32.bd925f65.js"><link rel="prefetch" href="/blog/assets/js/33.aefdd21a.js"><link rel="prefetch" href="/blog/assets/js/34.4db629ab.js"><link rel="prefetch" href="/blog/assets/js/35.fccd851c.js"><link rel="prefetch" href="/blog/assets/js/36.4b61e107.js"><link rel="prefetch" href="/blog/assets/js/37.57ec2f3b.js"><link rel="prefetch" href="/blog/assets/js/38.29752a9f.js"><link rel="prefetch" href="/blog/assets/js/39.75cc18af.js"><link rel="prefetch" href="/blog/assets/js/40.28c2824c.js"><link rel="prefetch" href="/blog/assets/js/41.9564a4e6.js"><link rel="prefetch" href="/blog/assets/js/42.fc61156c.js"><link rel="prefetch" href="/blog/assets/js/43.b716e9bd.js"><link rel="prefetch" href="/blog/assets/js/44.12b59335.js"><link rel="prefetch" href="/blog/assets/js/45.67841dea.js"><link rel="prefetch" href="/blog/assets/js/46.db7ce530.js"><link rel="prefetch" href="/blog/assets/js/47.80689722.js"><link rel="prefetch" href="/blog/assets/js/48.8fa637f6.js"><link rel="prefetch" href="/blog/assets/js/49.b343e1d0.js"><link rel="prefetch" href="/blog/assets/js/5.f9c6355e.js"><link rel="prefetch" href="/blog/assets/js/50.7652f697.js"><link rel="prefetch" href="/blog/assets/js/51.3dc4a085.js"><link rel="prefetch" href="/blog/assets/js/52.8587e4b0.js"><link rel="prefetch" href="/blog/assets/js/53.772c2349.js"><link rel="prefetch" href="/blog/assets/js/54.af501cc2.js"><link rel="prefetch" href="/blog/assets/js/55.c66a9bf8.js"><link rel="prefetch" href="/blog/assets/js/56.8a9d9cdf.js"><link rel="prefetch" href="/blog/assets/js/57.10ce37b8.js"><link rel="prefetch" href="/blog/assets/js/58.46bfcefc.js"><link rel="prefetch" href="/blog/assets/js/59.fd423a7c.js"><link rel="prefetch" href="/blog/assets/js/6.9db196de.js"><link rel="prefetch" href="/blog/assets/js/60.31a8d24d.js"><link rel="prefetch" href="/blog/assets/js/61.ab71b7de.js"><link rel="prefetch" href="/blog/assets/js/62.01d86161.js"><link rel="prefetch" href="/blog/assets/js/63.7d893fc9.js"><link rel="prefetch" href="/blog/assets/js/64.24cc5ce1.js"><link rel="prefetch" href="/blog/assets/js/65.1c1de76e.js"><link rel="prefetch" href="/blog/assets/js/66.fd0ee3c5.js"><link rel="prefetch" href="/blog/assets/js/67.46f0cf1d.js"><link rel="prefetch" href="/blog/assets/js/68.ccf3a10f.js"><link rel="prefetch" href="/blog/assets/js/69.19ed83bc.js"><link rel="prefetch" href="/blog/assets/js/7.2475bca8.js"><link rel="prefetch" href="/blog/assets/js/70.d33adeae.js"><link rel="prefetch" href="/blog/assets/js/71.eeb0386e.js"><link rel="prefetch" href="/blog/assets/js/72.7c7f6691.js"><link rel="prefetch" href="/blog/assets/js/73.335f10f0.js"><link rel="prefetch" href="/blog/assets/js/74.c8d29fd8.js"><link rel="prefetch" href="/blog/assets/js/75.43cd5cc8.js"><link rel="prefetch" href="/blog/assets/js/76.6007cc06.js"><link rel="prefetch" href="/blog/assets/js/77.a1998918.js"><link rel="prefetch" href="/blog/assets/js/78.4d3cfee6.js"><link rel="prefetch" href="/blog/assets/js/79.eeb36f42.js"><link rel="prefetch" href="/blog/assets/js/8.b142448f.js"><link rel="prefetch" href="/blog/assets/js/80.5a8fc4ea.js"><link rel="prefetch" href="/blog/assets/js/82.f96e0264.js"><link rel="prefetch" href="/blog/assets/js/83.f855f660.js"><link rel="prefetch" href="/blog/assets/js/84.e8bd6a27.js"><link rel="prefetch" href="/blog/assets/js/85.f15ee1d6.js"><link rel="prefetch" href="/blog/assets/js/86.481ce80f.js"><link rel="prefetch" href="/blog/assets/js/87.61f91bdb.js"><link rel="prefetch" href="/blog/assets/js/88.7071fdf7.js"><link rel="prefetch" href="/blog/assets/js/89.d019b6e9.js"><link rel="prefetch" href="/blog/assets/js/9.d54eac7f.js"><link rel="prefetch" href="/blog/assets/js/90.5d3cfa2c.js"><link rel="prefetch" href="/blog/assets/js/91.5bc1b88b.js"><link rel="prefetch" href="/blog/assets/js/92.7948e720.js"><link rel="prefetch" href="/blog/assets/js/93.e0092b06.js"><link rel="prefetch" href="/blog/assets/js/94.8f37d05a.js"><link rel="prefetch" href="/blog/assets/js/95.25060aa4.js"><link rel="prefetch" href="/blog/assets/js/96.f6b5ebee.js"><link rel="prefetch" href="/blog/assets/js/97.971caaa4.js"><link rel="prefetch" href="/blog/assets/js/98.bf253950.js"><link rel="prefetch" href="/blog/assets/js/99.0d1d725b.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.381052ad.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.61668f40.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/icons/apple-touch-icon.png" alt="一苇" class="logo"> <span class="site-name can-hide">一苇</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link router-link-active">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="images/poster03.jpeg"> <div class="blogger-info"><h3></h3> <span>光阴缝隙，时间盛典。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link router-link-active">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Turbopack初印象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/more/turbopack.html#简介" class="sidebar-link">简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#turbo" class="sidebar-link">Turbo</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#why-turbopack" class="sidebar-link">Why Turbopack?</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#核心概念" class="sidebar-link">核心概念</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#turbo-引擎" class="sidebar-link">Turbo 引擎</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#compiling-by-request-按请求编译" class="sidebar-link">Compiling by Request（按请求编译）</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#turbopack-vs-vite" class="sidebar-link">Turbopack vs Vite</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#dev-server-startup-time" class="sidebar-link">Dev server startup time</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#code-updates" class="sidebar-link">Code updates</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#turbopack-vs-webpack" class="sidebar-link">Turbopack vs Webpack</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#dev-server-startup-time-2" class="sidebar-link">Dev server startup time</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#code-updates-2" class="sidebar-link">Code updates</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#实践" class="sidebar-link">实践</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#展望" class="sidebar-link">展望</a></li></ul></li><li><a href="/blog/more/turbopack.html#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#vercel" class="sidebar-link">Vercel</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#monorepo" class="sidebar-link">Monorepo</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#turborepo" class="sidebar-link">Turborepo</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#rush" class="sidebar-link">Rush</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#lerna" class="sidebar-link">Lerna</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#swc" class="sidebar-link">SWC</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#rust" class="sidebar-link">Rust</a></li><li class="sidebar-sub-header"><a href="/blog/more/turbopack.html#deno" class="sidebar-link">Deno</a></li></ul></li><li><a href="/blog/more/turbopack.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/blog/categories/?category=more" title="分类" data-v-0c557b5e>more</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>阿沐</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2023-06-02</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Turbopack初印象<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="turbopack初印象"><a href="#turbopack初印象" class="header-anchor">#</a> Turbopack初印象</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <blockquote><p>22 年 10 月 25 日，Next.js 13 正式发布。同时，Vercel 还推出并开源了下一代打包工具：Turbopack。Turbopack 是针对 JavaScript 和 TypeScript 优化的增量打包工具，由 Webpack 的创建者 Tobias Koppers 和 Next.js 团队使用 Rust 编写。</p></blockquote> <p>Turbopack 是由 Vercel 公司（也就是维护 next.js 项目背后的公司）出品的打包工具，适用于 JavaScript 和 TypeScript 项目，底层使用 Rust 语言编写。 Turbopack 被 vercel 公司定义为 webpack 的后继，而不是替代品。</p> <p>Turbopack 性能的秘诀有两个：<strong>高度优化的机器代码和低层级增量计算引擎</strong>，可以缓存到单个函数的级别。它的架构吸取了 Turborepo 和 Google 的 Bazel 等工具的经验教训，它们都专注于使用缓存来避免重复执行相同的工作。</p> <blockquote><p>Turbopack 之所以如此之快，是因为它建立在一个可重用的 Rust 库之上，该库支持增量计算，称为 <strong>Turbo 引擎</strong>。其工作原理是：在 Turbopack 驱动的程序中，可以将某些函数标记为“to be remembered”。当这些函数被调用时，Turbo 引擎会记住它们被调用的内容，以及它们返回的内容，然后将其保存在内存缓存中。</p></blockquote> <p>而这种速度的实现机制是由 Rust 的高效率和 Turbopack 主打的<strong>增量打包引擎</strong>共同实现的。 Rust 是系统级的编程语言，以高效著称，对标 c/c++，但是更安全，不容易发生内存泄露。 Turbopack 主打的增量打包引擎，可以把已经打包好的代码进行缓存，后面只打包新加入的代码，这个缓存级别可以达到单个函数级。</p> <h3 id="turbo"><a href="#turbo" class="header-anchor">#</a> Turbo</h3> <p>Turbopack 是建立在 Turbo 之上的，Turbo 是基于 Rust 的开源、增量记忆化框架。Turbo 可以缓存程序中任何函数的结果。当程序再次运行时，函数将不会重新运行，除非它的参数改变了。这种粒度的架构使您的程序能够在函数级别跳过大量工作。</p> <blockquote><p>目前，Turbo引擎将缓存存储在内存中，这意味着缓存的时间与运行它的进程一样长，这对开发服务器来说是很好的，不必每次运行都由服务器进行处理。默认情况下，Next v13 会启动 Turbo引擎的缓存，如果手动取消开发服务器缓存，那么Turbo缓存也会被清空。</p></blockquote> <blockquote><p>在未来，官方还计划将这个缓存持久化到文件系统或者像 Turborepo 那样的远程缓存中，这将意味着 Turbopack 可以在不同的运行和机器上记住所做的工作。这种方法使得 Turbopack 在处理应用程序的增量更新时非常快，开发服务器进而将对变化作出迅速的反应。</p></blockquote> <p><strong>请求级编译</strong>：Turbopack 足够智能，可以只编译请求的代码。这意味着如果浏览器请求 HTML，就只会编译 HTML，而不会编译 HTML 引用的任何内容。如果浏览器需要 CSS，将只编译 CSS，而不编译其引用的图片，Turbopack 甚至知道不编译 source map，除非 Chrome DevTools 是打开的。通过请求级编译，减少了请求的数量，性能方面改进显着。</p> <h3 id="why-turbopack"><a href="#why-turbopack" class="header-anchor">#</a> Why Turbopack?</h3> <p><a href="https://turbo.build/pack/docs/why-turbopack" target="_blank" rel="noopener noreferrer">why-turbopack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>当我们开始创建Turbopack时，我们想要解决一个问题。我们一直在为Next.js进行速度改进。我们迁移了几个基于JS的工具。Babel，不再需要。Terser，不再需要。我们的下一个目标是另一个基于JS的工具，webpack。</p></blockquote> <p>用什么替换它成为我们的目标。但是用什么呢？</p> <p>新一代本地速度打包程序正在出现，例如esbuild和swc。但是经过对市场上打包程序的评估，我们决定建立自己的打包程序。为什么？</p> <ul><li><strong>打包(Turbopack) VS 原生ESM(Vite)</strong></li></ul> <p>在开发模式 (development mode) 下，Vite 不会打包应用源代码，而是利用浏览器原生的 ES Module 系统。由于只需要转换一个单文件，启动速度非常快。但是，一旦项目庞大，模块间的依赖关系变得非常复杂，浏览器中大量的请求可能导致启动时间变慢。因此，如果浏览器能够在尽可能少的网络请求中获取所需的代码，就会更快。</p> <p>Turbopack 使用 Rust 编写，打包性能非常好。在生产环境 (production mode) 下，它跳过了打包过程，只打包开发环境下的代码。</p> <ul><li><strong>Increment Computation (增量计算)</strong></li></ul> <p>有两种方法可以使进程更快：<strong>做更少的工作或并行工作</strong>。我们知道，如果我们想要创建最快的打包程序，我们需要在这两个杠杆上下功夫。
我们决定创建一个可重用的 <strong>Turbo 构建引擎</strong>，用于分布式和增量行为。Turbo 引擎的工作方式类似于函数调用的调度器，允许函数调用在所有可用的核心上并行执行。</p> <p>Turbo 引擎还缓存它调度的所有函数的结果，这意味着它永远不需要重复执行相同的工作。简而言之，它以最大速度完成最少的工作。</p> <ul><li><strong>Vite and esbuild</strong></li></ul> <p>其他工具对“做更少的工作”采取了不同的态度。Vite 在开发模式下使用原生 ESM 来最小化工作量。我们决定不采取这种方法，原因如上所述。
在幕后，Vite 在许多任务中使用 esbuild。esbuild 是一个打包工具 - 一个非常快的打包工具。它不强制您使用原生 ESM。但是，出于以下几个原因，我们决定不采用 esbuild。</p> <ol><li>esbuild 的代码是针对一个任务进行超级优化 - 快速打包。它<strong>没有 HMR</strong>，而我们不想从我们的开发服务器中失去它。</li> <li>esbuild 是一个极快的打包工具，但它<strong>没有太多的缓存</strong>。这意味着即使这项工作的速度是原生的，您仍将一遍又一遍地做同样的工作。</li></ol> <blockquote><p>Evan Wallace 将 esbuild 称为下一代打包工具的概念验证。我们认为他是对的。我们认为，一个<strong>由 Rust 驱动的具有增量计算功能的打包工具</strong>可以在更大规模上表现得比 esbuild 更好。</p></blockquote> <ul><li><strong>惰性打包</strong></li></ul> <p>早期版本的Next.js尝试在开发模式下捆绑整个Web应用程序。我们很快意识到这种“急切”的方法不太理想。现代版本的Next.js仅捆绑开发服务器请求的页面。例如，如果您转到<code>localhost：3000</code>，它将仅捆绑<code>pages/index.jsx</code>以及它导入的模块。</p> <p>这种更“懒惰”的方法（仅在绝对必要时捆绑资产）对于快速开发服务器至关重要。原生ESM处理此过程而无需太多魔法-您请求一个模块，该模块请求其他模块。但是，出于上述原因，我们想构建一个打包器。</p> <blockquote><p>esbuild没有“懒惰”打包的概念-除非您专门针对某些入口点，否则它是全包或无包。</p></blockquote> <p>Turbopack的开发模式<strong>根据收到的请求构建应用程序的导入和导出的最小图形，并仅捆绑必要的最小代码</strong>。在<a href="https://turbo.build/pack/docs/core-concepts" target="_blank" rel="noopener noreferrer">核心概念文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中了解更多信息。</p> <p>这种策略使Turbopack在首次启动开发服务器时非常快速。我们仅计算呈现页面所需的代码，然后将其一次性发送到浏览器中。在大规模情况下，这最终比原生ESM快得多。</p> <p>我们的目标是：</p> <ol><li><strong>构建一个打包工具</strong>。在处理大型应用程序时，打包工具的性能优于原生ESM。</li> <li><strong>使用增量计算</strong>。Turbo 引擎将其纳入 Turbopack 架构的核心，最大化速度并最小化工作量。</li> <li><strong>优化我们的开发服务器的启动时间</strong>。为此，我们构建了一个惰性资产图，仅计算所请求的资产。</li></ol> <p>这就是为什么我们选择构建 Turbopack 的原因。</p> <h3 id="核心概念"><a href="#核心概念" class="header-anchor">#</a> 核心概念</h3> <p><a href="https://turbo.build/pack/docs/core-concepts" target="_blank" rel="noopener noreferrer">core-concepts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="turbo-引擎"><a href="#turbo-引擎" class="header-anchor">#</a> Turbo 引擎</h4> <p>Turbopack 之所以如此快速，是因为它建立在 Rust 的可重用库之上，该库使用增量计算技术称为 Turbo 引擎。以下是其工作原理：</p> <ul><li><strong>Function-level caching（函数级缓存）</strong></li></ul> <p>在 Turbo 引擎驱动的程序中，您可以将某些函数标记为“需要记住”。当调用这些函数时，Turbo 引擎将记住它们的<strong>调用方式和返回值</strong>。然后将其保存在内存缓存中。</p> <p>以下是在打包程序中可能看起来像的简化示例：</p> <img src="/blog/images/more/turbo-engine-first-run01.webp" width="auto" class="zoom-custom-imgs"> <p>我们首先调用<code>readFile</code>来读取两个文件，<code>api.ts</code>和<code>sdk.ts</code>。然后将这些文件捆绑在一起，拼接在一起，最终得到<code>fullBundle</code>。所有这些函数调用的结果都会保存在缓存中以供以后使用。</p> <p>假设我们正在运行开发服务器。您在计算机上保存了<code>sdk.ts</code>文件。Turbopack接收到文件系统事件，并知道它需要重新计算<code>readFile(&quot;sdk.ts&quot;)</code>:</p> <img src="/blog/images/more/turbo-engine-second-run02.webp" width="auto" class="zoom-custom-imgs"> <p>由于 <code>sdk.ts</code> 的结果已经改变，我们需要再次打包它，然后再次连接它。</p> <p>关键是，<code>api.ts</code> 没有改变。由于之前的缓存仍然存在，我们的 <code>readFile('api.ts')</code> 就不需要重新打包计算了，直接调用缓存结果。</p> <p>现在想象一下在一个真正的打包程序中，有成千上万的文件需要读取和执行转换。思维模式是相同的。通过记住函数调用的结果，不重新执行已经完成的工作，可以节省大量的工作量。</p> <ul><li><strong>The cache</strong></li></ul> <p>Turbo 引擎目前将其缓存存储在内存中。这意味着缓存将持续与运行它的进程一样长 - 这对于开发服务器非常有效。在 Next v13 中运行 <code>next dev --turbo</code> 时，您将启动 Turbo 引擎的缓存。当您取消开发服务器时，缓存将被清除。</p> <p>在未来，我们计划将此缓存持久化 - 要么到文件系统，要么到像 Turborepo 这样的远程缓存。这将意味着 Turbopack 可以记住跨运行和机器完成的工作。</p> <ul><li>本地持久化</li></ul> <blockquote><p>根据作者的想法，未来编译结果不仅仅缓存在内存当中，还会本地持久化。本地持久化的意义是什么？在实际的生产环境中， 中大型的项目往往都需要打包 15 分钟甚至更久，编译结果持久化可以节省大量的打包时间。假设项目里有 50 个页面，本次迭代只修改了其中 10 个页面，Webpack 打包会全量重新打包 50 个页面，而 Turbopack 只需重新打包 10 个被修改的页面，未修改的 40 个页面直接从硬盘读取上一次打包结果，打包效率则得到非常大的提升。</p></blockquote> <h4 id="compiling-by-request-按请求编译"><a href="#compiling-by-request-按请求编译" class="header-anchor">#</a> Compiling by Request（按请求编译）</h4> <blockquote><p>本地开发时，Webpack 启动时要全量编译所有文件，这使得启动项目或者切换分支后需要花费大量的时间重新打包编译。而 Turbopack 则采用按需编译的方式。</p></blockquote> <p>Turbo引擎有助于在开发服务器上提供极快的更新，但还有另一个重要的指标需要考虑 - 启动时间。您的开发服务器启动得越快，您就能越快地开始工作。</p> <p>让一个过程变快有两种方法 - <strong>更快地工作，或者做更少的工作</strong>。对于启动开发服务器，减少工作量的方法是只编译启动所需的代码。</p> <ul><li><strong>page-level compilation （页面级编译）</strong></li></ul> <p>2-3年前的 Next.js 版本在显示开发服务器之前会编译整个应用程序。在 Next.js 13 中，我们开始仅编译您请求的页面上的代码。</p> <p>这是更好的，但并不完美。当您导航到<code>/users</code>时，我们将捆绑所有客户端和服务器模块、动态导入的模块以及引用的CSS和图像。这意味着如果您页面的大部分被隐藏或隐藏在选项卡后面，我们仍然会编译它。</p> <ul><li><strong>Request-level compilation （请求级编译）</strong></li></ul> <p>Turbopack 足够智能，只编译你请求的代码。这意味着如果浏览器请求 HTML，我们只编译 HTML - 而不是 HTML 引用的任何内容。</p> <p>如果浏览器需要一些 CSS，我们将只编译 CSS - 而不编译引用的图像。Turbopack 甚至知道除非你的 Chrome DevTools 打开，否则不编译 source maps。</p> <p>通过请求级编译，减少了请求的数量，性能方面改进显着。</p> <h3 id="turbopack-vs-vite"><a href="#turbopack-vs-vite" class="header-anchor">#</a> Turbopack vs Vite</h3> <blockquote><p>Vite是一个非常快速的（非）打包工具，Web开发社区对它非常兴奋，我们也是。Vite提高了Web开发的标准，展示了Web未来的可能性。如果我们要构建一个打包工具，它必须至少与（已经令人印象深刻的）Vite表现一样出色，以验证我们的努力。我们很自豪地说，我们做到了。</p></blockquote> <p><a href="https://turbo.build/pack/docs/comparisons/vite" target="_blank" rel="noopener noreferrer">comparisons-vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="dev-server-startup-time"><a href="#dev-server-startup-time" class="header-anchor">#</a> Dev server startup time</h4> <p>Vite 是一个非打包工具，这意味着它不会对你的代码进行打包处理，而是直接将每个模块发送到浏览器。这意味着浏览器会处理模块之间的依赖关系。</p> <p>表面上看，这似乎是一场不公平的战斗。Turbopack 对你的应用程序进行打包处理，这意味着在将代码发送到浏览器之前需要进行更多的工作。</p> <p>但事实证明，Turbopack 可以比浏览器更快地处理这些工作。通过预打包，我们可以比 Vite 的原生 ESM 系统节省大量时间。</p> <p>这意味着 Turbopack 的开发服务器启动比 Vite 更快。在一个包含 1,000 个模块的应用程序中，Vite 需要1.8秒才能启动。Turbopack 启动时间为1.5秒-比 Vite 快1.2倍。</p> <p>在大型应用程序中，这种差异保持一致。在一个包含 30,000 个模块的应用程序中，Turbopack 启动时间比 Vite 快1.4倍。</p> <p>请注意，Vite 在这些基准测试中使用了官方的 SWC 插件（在新标签页中打开），这不是默认配置。</p> <h4 id="code-updates"><a href="#code-updates" class="header-anchor">#</a> Code updates</h4> <p>Vite的开发速度非常快，因为它具有快速刷新功能。当你更新一个文件时，Vite使用它的Native ESM系统将更新后的模块发送给浏览器，并执行一些魔术将其集成到现有的模块图中。</p> <p>在turbpack中，我们发现对于Fast Refresh，我们根本不需要做任何捆绑工作。我们可以用类似于Vite的方式发送更新。实际上——更有效率一点:turbpack直接通过WebSocket发送更改过的模块，根本不需要做任何绑定。</p> <p>在包含1000个模块的应用程序中，turbpack对文件更改的响应速度比Vite快3.8倍。</p> <h3 id="turbopack-vs-webpack"><a href="#turbopack-vs-webpack" class="header-anchor">#</a> Turbopack vs Webpack</h3> <blockquote><p>webpack 已经被下载超过 30 亿次，成为当今最常用的 JavaScript 打包工具。然而，我们发现它的基于 JavaScript 的架构已经达到了极限。我们已经构建了 Turbopack 作为 webpack 的继任者：<strong>速度更快，但同样灵活和可扩展</strong>。</p></blockquote> <p><a href="https://turbo.build/pack/docs/comparisons/webpack" target="_blank" rel="noopener noreferrer">comparisons-webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="dev-server-startup-time-2"><a href="#dev-server-startup-time-2" class="header-anchor">#</a> Dev server startup time</h4> <p>我们发现 webpack 的主要问题是<strong>开发服务器的启动时间</strong>。如果您在某个页面中导入了许多模块并在浏览器中打开该页面，则初始编译将需要几秒钟。如果您在开发环境中更改路由，则必须再次等待类似的编译以获取新页面。</p> <p>我们设计 Turbopack 尽可能懒惰，只在请求时执行所需工作。在开发服务器中，这意味着在传入请求时，我们仅执行用户请求的工作。不再对按需加载的代码进行不必要的捆绑。</p> <p>这意味着 Turbopack 的开发服务器启动比 webpack 快得多。使用 webpack 作为内部机制的 Next.js 12 可以在 1,000 模块应用程序中启动构建服务器，耗时 3.6s。Turbopack 可以在 1.5s 到 2.5 倍更快的速度启动。</p> <h4 id="code-updates-2"><a href="#code-updates-2" class="header-anchor">#</a> Code updates</h4> <p>随着我们持续优化 webpack，我们发现快速刷新的速度存在一个性能瓶颈。在大约有 2,000 个组件的情况下，我们能够产生的最佳速度是 500 毫秒。在 Next.js 12 中，这是一个巨大的成就。以前，这个过程需要大约 10 秒钟。</p> <p>通过 Turbopack，我们实现了我们的目标：快速刷新的性能保持接近恒定，无论您的应用程序大小如何。它不是根据应用程序大小进行缩放，而是根据所做更改的大小进行缩放。</p> <p>在一个有 1,000 个模块的应用程序中，Turbopack 可以比 webpack 更快地响应文件更改 5.6 倍。在一个有 30,000 个模块的应用程序中，这个速度是 webpack 的 217.3 倍。</p> <h3 id="实践"><a href="#实践" class="header-anchor">#</a> 实践</h3> <p>Turbopack目前还处于alpha版本，只是Next 13提供的技术支持。按照官方文档所述，我们只需执行如下命令即可完成Turbopack项目的初始化。</p> <p><a href="https://turbo.build/pack/docs" target="_blank" rel="noopener noreferrer">快速上手<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Next.js + Nest.js + TurboPack 全栈项目：<a href="https://juejin.cn/post/7220327699385532471" target="_blank" rel="noopener noreferrer">打造属于你自己的 Mac（Next.js+Nest.js TS全栈项目）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="展望"><a href="#展望" class="header-anchor">#</a> 展望</h3> <p>目前，Turbopack还处于alpha阶段，只能在 Next.js v13 中使用。未来，Turbopack将发布独立的 CLI、插件 API，以及开启对Svelte 和 Vue等框架的支持。并且，Turbopack 将用于 Next.js 13 Dev server。它将为闪电般快速的 HMR 提供动力，并将原生支持 React 服务端组件，以及 TypeScript、JSX、CSS 等。Webpack 用户还可以期待使用 Turbopack 进入基于 Rust 的未来的增量迁移路径。</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="vercel"><a href="#vercel" class="header-anchor">#</a> Vercel</h3> <p><a href="https://vercel.com" target="_blank" rel="noopener noreferrer">Vercel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是由 Guillermo Rauch 创立的云服务公司，前身为 Zeit，有 <a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、Node.js 的 websocket 框架 socket.io 和 MongoDB 客户端 <a href="http://www.mongoosejs.net/" target="_blank" rel="noopener noreferrer">Mongoose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等知名开源项目为大众所知。Next.js 为了实现后端渲染，重度使用了 JS 生态中的打包构建工具 webpack。</p> <p><a href="https://github.com/vercel" target="_blank" rel="noopener noreferrer">https://github.com/vercel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://vercel.com/docs/concepts/get-started" target="_blank" rel="noopener noreferrer">Vercel快速上手<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="monorepo"><a href="#monorepo" class="header-anchor">#</a> Monorepo</h3> <ul><li>Monolith</li></ul> <blockquote><p><strong>单仓库巨石应用</strong>， 一个 Git 仓库维护着项目代码，随着迭代业务复杂度的提升，项目代码会变得越来越多，越来越复杂，大量代码构建效率也会降低，最终导致了单体巨石应用，这种代码管理方式称之为 Monolith。</p></blockquote> <ul><li>MultiRepo</li></ul> <blockquote><p><strong>多仓库多模块应用</strong>，于是将项目拆解成多个业务模块，并在多个 Git 仓库管理，模块解耦，降低了巨石应用的复杂度，每个模块都可以独立编码、测试、发版，代码管理变得简化，构建效率也得以提升，这种代码管理方式称之为 MultiRepo。</p></blockquote> <ul><li>MonoRepo</li></ul> <blockquote><p>单仓库多模块应用，随着业务复杂度的提升，模块仓库越来越多，MultiRepo这种方式虽然从业务上解耦了，但增加了项目工程管理的难度，随着模块仓库达到一定数量级，会有几个问题：跨仓库代码难共享；分散在单仓库的模块依赖管理复杂（底层模块升级后，其他上层依赖需要及时更新，否则有问题）；增加了构建耗时。于是将多个项目集成到一个仓库下，共享工程配置，同时又快捷地共享模块代码，成为趋势，这种代码管理方式称之为 MonoRepo。</p></blockquote> <p>Monorepo 的概念最早是由 Google 提出并实践的，随着各种技术的发展和超级应用的出现，人们开始考虑怎么才能将所有的小应用都集成在一个大项目中，特别是在这些项目互相影响时，而在实现过程中，工程师们最关注的两点就是：<strong>项目功能分离 和 避免重复代码</strong>。</p> <p>在 Monorepo 中，我们可以对每个拆离出来的项目进行一套单独的配置，他们彼此之间互不影响，但是又可以通过总体的配置来互相结合和引用，从而达到协作的效果。</p> <ol><li>代码复用非常简单</li></ol> <blockquote><p>我们只需要将复用频率高的代码，单独抽离出来成为一个 shared 之类的项目，那么其他所有的项目都只需要直接引用这个项目下的代码就可以了。而不用将这个项目重新打包，再在其他项目中使用。</p></blockquote> <ol start="2"><li>简化依赖管理</li></ol> <blockquote><p>由于我们是在同一个项目下，因此对于第三方依赖的管理也会简化很多，像是之前多个项目可能有一些相同的第三方依赖包，每个项目都需要下载一遍，而我们使用 Monorepo 的框架重构项目之后，这些依赖包就可以避免重复下载，同时也能通过配置在不同的项目之间复用。</p></blockquote> <ol start="3"><li>构建部署</li></ol> <blockquote><p>构建性 Monorepo 工具可以配置依赖项目的构建优先级，可以实现一次命令完成所有的部署。</p></blockquote> <ol start="4"><li>工程配置</li></ol> <blockquote><p>多项目在一个仓库，工程配置一致，代码质量标准及风格也很容易一致。</p></blockquote> <ol start="5"><li>开发迭代</li></ol> <blockquote><p>多个项目都在一个仓库中，可看到相关项目全貌，编码非常方便；代码复用高，方便进行代码重构；依赖调试方便，依赖包迭代场景下，借助工具自动 npm link，直接使用最新版本依赖，简化了操作流程。</p></blockquote> <p><strong>技术实现方案</strong></p> <blockquote><p>项目代码仓库越来越庞大，工作流（int、构建、单元测试、集成测试）也会越来越慢；专门针对这样的场景进行极致的性能优化的工具应运而生；适用于包非常多、代码体积非常大的 Monorepo 项目。</p></blockquote> <h4 id="turborepo"><a href="#turborepo" class="header-anchor">#</a> Turborepo</h4> <p><a href="https://turbo.build/repo" target="_blank" rel="noopener noreferrer">Turborepo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 Vercel 团队开源的高性能构建代码仓库系统，允许开发者使用不同的构建系统。</p> <p><a href="https://turbo.build/repo/docs/getting-started/create-new" target="_blank" rel="noopener noreferrer">Quickstart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>构建加速思路：</p> <ol><li>Multiple Running Task：构建任务并行进行，构建顺序交给开发者配置</li> <li>Cache、Remote Cache：通过缓存 及 远程缓存，减少构建时间</li></ol> <p>具体构建思路可参考官方文档：<a href="https://turbo.build/repo/docs/core-concepts/monorepos/running-tasks" target="_blank" rel="noopener noreferrer">Running Tasks in a Monorepo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://turbo.build/repo/docs/core-concepts/caching" target="_blank" rel="noopener noreferrer">Caching Tasks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="rush"><a href="#rush" class="header-anchor">#</a> Rush</h4> <blockquote><p>Rush 是微软开发的可扩展的 Monorepo 工具及解决方案。早期，只提供了 Rush 作为构建调取器，其余事项交给用户灵活的选择任意构建工具链，由于过于灵活带来了很大的选型及维护成本，后来成立了 Rush Stack 来提供了一套可复用的解决方案，涵盖多项目的构建、测试、打包和发布，实现了更强大的工作流。</p></blockquote> <p><a href="https://rushstack.io/zh-cn/" target="_blank" rel="noopener noreferrer">Rush Stack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="lerna"><a href="#lerna" class="header-anchor">#</a> Lerna</h4> <blockquote><p>Lerna 是 Babel 为实现 Monorepo 开发的工具；最擅长管理依赖关系和发布；优化了多包工作流，解决了多包依赖、发版手动维护版本等问题；Lerna 不提供构建、测试等任务，工程能力较弱，项目中往往需要基于它进行顶层能力的封装。</p></blockquote> <ol><li>为单个包或多个包运行命令 (lerna run)</li> <li>管理依赖项 (lerna bootstrap)</li> <li>发布依赖包，处理版本管理，并生成变更日志 (lerna publish)</li></ol> <p>参考：</p> <ul><li><a href="https://juejin.cn/post/7215886869199896637" target="_blank" rel="noopener noreferrer">带你了解更全面的 Monorepo - 优劣、踩坑、选型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/513171061" target="_blank" rel="noopener noreferrer">Monorepo---让跨项目合作像搭积木一样简单<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="swc"><a href="#swc" class="header-anchor">#</a> SWC</h3> <blockquote><p>swc(Speedy Web Compiler) 是用 Rust 实现的一套 TypeScript/JavaScript compiler，性能较 babel/ts 快 5～20 倍。</p></blockquote> <p>大部分 Webpack 的项目编译都是使用 Babel 编译和转换，由于 Babel 本身也是使用 Javascript 编写，转换效率并不理想，而 Turbopack 原生使用 SWC 作为编译器。SWC 是一款 Rust 编写的 Javascript 代码编译器，官方宣称其编译速度是 Babel 的20倍（ Webpack 也可以使用SWC）。</p> <p><a href="https://github.com/swc-project/swc" target="_blank" rel="noopener noreferrer">https://github.com/swc-project/swc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://swc.rs/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="rust"><a href="#rust" class="header-anchor">#</a> Rust</h3> <blockquote><p>Rust 速度惊人且内存利用率极高。由于没有运行时和垃圾回收，它能够胜任对性能要求特别高的服务，可以在嵌入式设备上运行，还能轻松和其他语言集成。</p></blockquote> <p><a href="https://www.rust-lang.org/zh-CN/" target="_blank" rel="noopener noreferrer">https://www.rust-lang.org/zh-CN/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Rust 是由 Mozilla 主导开发的通用、编译型编程语言。设计准则为 “安全、并发、实用”，支持函数式、并发式、过程式以及面向对象的编程风格。Deno 使用 Rust 语言来封装 V8 引擎，通过 libdeno 绑定，我们就可以在 JavaScript 中调用隔离的功能。</p> <h3 id="deno"><a href="#deno" class="header-anchor">#</a> Deno</h3> <blockquote><p>Deno 是一个简单、先进且安全的 JavaScript 和 TypeScript 运行时环境，其基于 V8 引擎并采用 Rust 编程语言构建；跟 Node 比较类似~</p></blockquote> <p><a href="https://www.denojs.cn/" target="_blank" rel="noopener noreferrer">Deno中文网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://juejin.cn/post/6844904162321252360" target="_blank" rel="noopener noreferrer">了不起的 Deno 入门与实战<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><p><a href="https://juejin.cn/post/7220301128990212154" target="_blank" rel="noopener noreferrer">Turbopack初印象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="http://zoo.zhengcaiyun.cn/blog/article/turbopack" target="_blank" rel="noopener noreferrer">初识Turbopack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/SHyGq7siczG5TPIBB3HQ0Q" target="_blank" rel="noopener noreferrer">前端又开撕了：用Rust写的Turbopack，比Vite快10倍？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://segmentfault.com/a/1190000041341813" target="_blank" rel="noopener noreferrer">Vercel 与 Next.js：开源全明星团队背后的商业逻辑<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/7158791870796169230" target="_blank" rel="noopener noreferrer">比 Webpack 快 700 倍、比 Vite 快 10 倍的打包器 Turbopack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.csdn.net/gtLBTNq9mr3/article/details/127680877" target="_blank" rel="noopener noreferrer">尤雨溪：Turbopack真的比Vite快10倍吗？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blog/tags/?tag=Turbopack" title="标签">#Turbopack</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/6/2023, 7:44:05 PM</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/more/github-actions.html"><div>
            Github Actions自动部署
            <!----></div></a> <span class="date">09-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/project/mono-react-project.html"><div>
            MonoRepo——React项目实践
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/more/jenkins-deploy.html"><div>
            Jenkins前端自动化部署
            <!----></div></a> <span class="date">08-10</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>一苇 | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal"><img src="/blog/images/icp.png" width="20" height="20" alt="公网备案"/>京ICP备2021006935号-2</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><!----><div></div></div></div>
    <script src="/blog/assets/js/app.0f95228c.js" defer></script><script src="/blog/assets/js/3.a2a245ac.js" defer></script><script src="/blog/assets/js/81.d5890383.js" defer></script><script src="/blog/assets/js/4.245b4373.js" defer></script>
  </body>
</html>

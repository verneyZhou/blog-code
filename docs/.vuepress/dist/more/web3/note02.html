<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web3入门-实践篇 | 一苇</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/icons/favicon.ico">
    <link rel="manifest" href="/blog/js/mainfest.json">
    <link rel="stylesheet" href="/blog/styles/css/style.css">
    <script type="utf-8" src="/blog/js/disable-user-zoom.js"></script>
    <meta name="description" content="这是阿沐的博客哦~">
    <meta name="Author" content="一苇">
    <meta rel="keywords" content="verneyzhou,阿沐,一苇,前端,docs.verneyzhou-code.cn,博客,fe,IT,技术">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.61668f40.css" as="style"><link rel="preload" href="/blog/assets/js/app.07c9fec8.js" as="script"><link rel="preload" href="/blog/assets/js/3.a2a245ac.js" as="script"><link rel="preload" href="/blog/assets/js/88.7071fdf7.js" as="script"><link rel="preload" href="/blog/assets/js/4.245b4373.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.a9e52aed.js"><link rel="prefetch" href="/blog/assets/js/100.ad35b061.js"><link rel="prefetch" href="/blog/assets/js/101.ac9e5029.js"><link rel="prefetch" href="/blog/assets/js/102.16a9a8e0.js"><link rel="prefetch" href="/blog/assets/js/103.caa157f6.js"><link rel="prefetch" href="/blog/assets/js/104.3e18ca8e.js"><link rel="prefetch" href="/blog/assets/js/105.a5dd02c7.js"><link rel="prefetch" href="/blog/assets/js/106.4b828c0e.js"><link rel="prefetch" href="/blog/assets/js/107.b336030e.js"><link rel="prefetch" href="/blog/assets/js/108.be061940.js"><link rel="prefetch" href="/blog/assets/js/109.aee5ed5f.js"><link rel="prefetch" href="/blog/assets/js/11.c503bf7b.js"><link rel="prefetch" href="/blog/assets/js/110.0ec777cb.js"><link rel="prefetch" href="/blog/assets/js/111.deced91b.js"><link rel="prefetch" href="/blog/assets/js/112.fdabdec2.js"><link rel="prefetch" href="/blog/assets/js/113.cdfd38f4.js"><link rel="prefetch" href="/blog/assets/js/114.6ec0e736.js"><link rel="prefetch" href="/blog/assets/js/115.0893ab84.js"><link rel="prefetch" href="/blog/assets/js/116.404ee8fe.js"><link rel="prefetch" href="/blog/assets/js/117.5de970f4.js"><link rel="prefetch" href="/blog/assets/js/118.328e12ba.js"><link rel="prefetch" href="/blog/assets/js/119.6b414771.js"><link rel="prefetch" href="/blog/assets/js/12.06f5d794.js"><link rel="prefetch" href="/blog/assets/js/120.db669f9a.js"><link rel="prefetch" href="/blog/assets/js/121.e2682bfc.js"><link rel="prefetch" href="/blog/assets/js/122.65d64dbd.js"><link rel="prefetch" href="/blog/assets/js/123.c207d603.js"><link rel="prefetch" href="/blog/assets/js/124.d15fa68e.js"><link rel="prefetch" href="/blog/assets/js/125.4dec074a.js"><link rel="prefetch" href="/blog/assets/js/126.690a3d94.js"><link rel="prefetch" href="/blog/assets/js/127.1566956e.js"><link rel="prefetch" href="/blog/assets/js/128.9085def5.js"><link rel="prefetch" href="/blog/assets/js/129.1467f48a.js"><link rel="prefetch" href="/blog/assets/js/13.b8ba6830.js"><link rel="prefetch" href="/blog/assets/js/130.9a8b6b82.js"><link rel="prefetch" href="/blog/assets/js/131.c78c2c45.js"><link rel="prefetch" href="/blog/assets/js/132.0dd6e0ce.js"><link rel="prefetch" href="/blog/assets/js/133.763cb3cd.js"><link rel="prefetch" href="/blog/assets/js/134.c01f5483.js"><link rel="prefetch" href="/blog/assets/js/135.1a2f1d85.js"><link rel="prefetch" href="/blog/assets/js/136.2a5f1b57.js"><link rel="prefetch" href="/blog/assets/js/137.d6055675.js"><link rel="prefetch" href="/blog/assets/js/138.7e622d6d.js"><link rel="prefetch" href="/blog/assets/js/139.1f935558.js"><link rel="prefetch" href="/blog/assets/js/14.af682e8e.js"><link rel="prefetch" href="/blog/assets/js/140.051a5152.js"><link rel="prefetch" href="/blog/assets/js/141.e3329fdf.js"><link rel="prefetch" href="/blog/assets/js/142.5512076f.js"><link rel="prefetch" href="/blog/assets/js/143.1ec337c6.js"><link rel="prefetch" href="/blog/assets/js/144.f2251ef4.js"><link rel="prefetch" href="/blog/assets/js/145.3437fb76.js"><link rel="prefetch" href="/blog/assets/js/146.a7b31c4e.js"><link rel="prefetch" href="/blog/assets/js/147.3cc8e885.js"><link rel="prefetch" href="/blog/assets/js/148.b1507e1c.js"><link rel="prefetch" href="/blog/assets/js/149.e35da13a.js"><link rel="prefetch" href="/blog/assets/js/15.e0f3979f.js"><link rel="prefetch" href="/blog/assets/js/150.dfc8c76e.js"><link rel="prefetch" href="/blog/assets/js/151.ae2fd7df.js"><link rel="prefetch" href="/blog/assets/js/152.a7376201.js"><link rel="prefetch" href="/blog/assets/js/153.93a9317a.js"><link rel="prefetch" href="/blog/assets/js/154.175cf9a5.js"><link rel="prefetch" href="/blog/assets/js/155.7c9785ed.js"><link rel="prefetch" href="/blog/assets/js/156.0282bdc8.js"><link rel="prefetch" href="/blog/assets/js/157.25f81c7a.js"><link rel="prefetch" href="/blog/assets/js/158.eccb37d9.js"><link rel="prefetch" href="/blog/assets/js/159.4c355ed2.js"><link rel="prefetch" href="/blog/assets/js/16.3ee40a8a.js"><link rel="prefetch" href="/blog/assets/js/160.94e077fb.js"><link rel="prefetch" href="/blog/assets/js/161.eb5ffc76.js"><link rel="prefetch" href="/blog/assets/js/162.23d751c6.js"><link rel="prefetch" href="/blog/assets/js/163.c80f21ab.js"><link rel="prefetch" href="/blog/assets/js/164.b16f2865.js"><link rel="prefetch" href="/blog/assets/js/165.f53b159e.js"><link rel="prefetch" href="/blog/assets/js/166.10750116.js"><link rel="prefetch" href="/blog/assets/js/167.90a6c559.js"><link rel="prefetch" href="/blog/assets/js/168.322e1048.js"><link rel="prefetch" href="/blog/assets/js/169.b1e52fae.js"><link rel="prefetch" href="/blog/assets/js/17.81f8937d.js"><link rel="prefetch" href="/blog/assets/js/170.da92790a.js"><link rel="prefetch" href="/blog/assets/js/171.220b5b50.js"><link rel="prefetch" href="/blog/assets/js/172.1493cc65.js"><link rel="prefetch" href="/blog/assets/js/173.bc9bf937.js"><link rel="prefetch" href="/blog/assets/js/174.1ad2d9fd.js"><link rel="prefetch" href="/blog/assets/js/175.07328d2d.js"><link rel="prefetch" href="/blog/assets/js/176.539278f3.js"><link rel="prefetch" href="/blog/assets/js/177.bdaef503.js"><link rel="prefetch" href="/blog/assets/js/178.06d40ce5.js"><link rel="prefetch" href="/blog/assets/js/179.a8d2460d.js"><link rel="prefetch" href="/blog/assets/js/18.58a7b3ca.js"><link rel="prefetch" href="/blog/assets/js/180.acb7e178.js"><link rel="prefetch" href="/blog/assets/js/181.04230a04.js"><link rel="prefetch" href="/blog/assets/js/182.2bae84da.js"><link rel="prefetch" href="/blog/assets/js/183.1aefb498.js"><link rel="prefetch" href="/blog/assets/js/184.aae32a59.js"><link rel="prefetch" href="/blog/assets/js/185.5194e169.js"><link rel="prefetch" href="/blog/assets/js/186.3f8a60e6.js"><link rel="prefetch" href="/blog/assets/js/187.19f86e8d.js"><link rel="prefetch" href="/blog/assets/js/188.75afe9d8.js"><link rel="prefetch" href="/blog/assets/js/189.bbf10e7f.js"><link rel="prefetch" href="/blog/assets/js/19.4facbfcd.js"><link rel="prefetch" href="/blog/assets/js/190.f0753b6c.js"><link rel="prefetch" href="/blog/assets/js/191.4fe8aa98.js"><link rel="prefetch" href="/blog/assets/js/192.8d7ef6bf.js"><link rel="prefetch" href="/blog/assets/js/193.465cd98e.js"><link rel="prefetch" href="/blog/assets/js/194.11092fca.js"><link rel="prefetch" href="/blog/assets/js/195.a4f0d47c.js"><link rel="prefetch" href="/blog/assets/js/196.dabf1015.js"><link rel="prefetch" href="/blog/assets/js/197.e9ad0ceb.js"><link rel="prefetch" href="/blog/assets/js/198.f1abb7d4.js"><link rel="prefetch" href="/blog/assets/js/199.6561e896.js"><link rel="prefetch" href="/blog/assets/js/20.c69c50ee.js"><link rel="prefetch" href="/blog/assets/js/200.02925058.js"><link rel="prefetch" href="/blog/assets/js/21.d36db816.js"><link rel="prefetch" href="/blog/assets/js/22.aa826409.js"><link rel="prefetch" href="/blog/assets/js/23.fdb82899.js"><link rel="prefetch" href="/blog/assets/js/24.9c7a84ee.js"><link rel="prefetch" href="/blog/assets/js/25.aef2c75d.js"><link rel="prefetch" href="/blog/assets/js/26.3e3cbaca.js"><link rel="prefetch" href="/blog/assets/js/27.09b82b4f.js"><link rel="prefetch" href="/blog/assets/js/28.47f73845.js"><link rel="prefetch" href="/blog/assets/js/29.7eda190b.js"><link rel="prefetch" href="/blog/assets/js/30.136a4618.js"><link rel="prefetch" href="/blog/assets/js/31.c1600861.js"><link rel="prefetch" href="/blog/assets/js/32.964dbed2.js"><link rel="prefetch" href="/blog/assets/js/33.54b1d113.js"><link rel="prefetch" href="/blog/assets/js/34.4db629ab.js"><link rel="prefetch" href="/blog/assets/js/35.fccd851c.js"><link rel="prefetch" href="/blog/assets/js/36.4b61e107.js"><link rel="prefetch" href="/blog/assets/js/37.57ec2f3b.js"><link rel="prefetch" href="/blog/assets/js/38.29752a9f.js"><link rel="prefetch" href="/blog/assets/js/39.75cc18af.js"><link rel="prefetch" href="/blog/assets/js/40.28c2824c.js"><link rel="prefetch" href="/blog/assets/js/41.9564a4e6.js"><link rel="prefetch" href="/blog/assets/js/42.91f6d891.js"><link rel="prefetch" href="/blog/assets/js/43.b716e9bd.js"><link rel="prefetch" href="/blog/assets/js/44.a3c65dbb.js"><link rel="prefetch" href="/blog/assets/js/45.62602816.js"><link rel="prefetch" href="/blog/assets/js/46.db7ce530.js"><link rel="prefetch" href="/blog/assets/js/47.39b634bf.js"><link rel="prefetch" href="/blog/assets/js/48.3e02495b.js"><link rel="prefetch" href="/blog/assets/js/49.b343e1d0.js"><link rel="prefetch" href="/blog/assets/js/5.f9c6355e.js"><link rel="prefetch" href="/blog/assets/js/50.02654870.js"><link rel="prefetch" href="/blog/assets/js/51.508610ea.js"><link rel="prefetch" href="/blog/assets/js/52.8587e4b0.js"><link rel="prefetch" href="/blog/assets/js/53.772c2349.js"><link rel="prefetch" href="/blog/assets/js/54.dceb3c84.js"><link rel="prefetch" href="/blog/assets/js/55.b6c5e568.js"><link rel="prefetch" href="/blog/assets/js/56.f3649d8f.js"><link rel="prefetch" href="/blog/assets/js/57.db204c08.js"><link rel="prefetch" href="/blog/assets/js/58.05567cee.js"><link rel="prefetch" href="/blog/assets/js/59.208c9eb8.js"><link rel="prefetch" href="/blog/assets/js/6.9db196de.js"><link rel="prefetch" href="/blog/assets/js/60.31a8d24d.js"><link rel="prefetch" href="/blog/assets/js/61.86d9151c.js"><link rel="prefetch" href="/blog/assets/js/62.22c9a5bf.js"><link rel="prefetch" href="/blog/assets/js/63.56d96fe2.js"><link rel="prefetch" href="/blog/assets/js/64.24cc5ce1.js"><link rel="prefetch" href="/blog/assets/js/65.78f53722.js"><link rel="prefetch" href="/blog/assets/js/66.fd0ee3c5.js"><link rel="prefetch" href="/blog/assets/js/67.b962d643.js"><link rel="prefetch" href="/blog/assets/js/68.5faa2f5c.js"><link rel="prefetch" href="/blog/assets/js/69.91e84aee.js"><link rel="prefetch" href="/blog/assets/js/7.bbc1a47a.js"><link rel="prefetch" href="/blog/assets/js/70.594379e0.js"><link rel="prefetch" href="/blog/assets/js/71.de1aa836.js"><link rel="prefetch" href="/blog/assets/js/72.2aa72a71.js"><link rel="prefetch" href="/blog/assets/js/73.6ebb152b.js"><link rel="prefetch" href="/blog/assets/js/74.1e5ced20.js"><link rel="prefetch" href="/blog/assets/js/75.42650e07.js"><link rel="prefetch" href="/blog/assets/js/76.3b79fc70.js"><link rel="prefetch" href="/blog/assets/js/77.c30ea800.js"><link rel="prefetch" href="/blog/assets/js/78.c1ff86f4.js"><link rel="prefetch" href="/blog/assets/js/79.21e4acaa.js"><link rel="prefetch" href="/blog/assets/js/8.7ca5bcb9.js"><link rel="prefetch" href="/blog/assets/js/80.5bee662d.js"><link rel="prefetch" href="/blog/assets/js/81.cdd99cd8.js"><link rel="prefetch" href="/blog/assets/js/82.94998af0.js"><link rel="prefetch" href="/blog/assets/js/83.f855f660.js"><link rel="prefetch" href="/blog/assets/js/84.31640995.js"><link rel="prefetch" href="/blog/assets/js/85.ca4960fe.js"><link rel="prefetch" href="/blog/assets/js/86.d630b6a3.js"><link rel="prefetch" href="/blog/assets/js/87.838e1edc.js"><link rel="prefetch" href="/blog/assets/js/89.2627c1c2.js"><link rel="prefetch" href="/blog/assets/js/9.ec25f2ab.js"><link rel="prefetch" href="/blog/assets/js/90.ad5271ed.js"><link rel="prefetch" href="/blog/assets/js/91.48371907.js"><link rel="prefetch" href="/blog/assets/js/92.151045b8.js"><link rel="prefetch" href="/blog/assets/js/93.6fbcc77a.js"><link rel="prefetch" href="/blog/assets/js/94.fec3895c.js"><link rel="prefetch" href="/blog/assets/js/95.729004de.js"><link rel="prefetch" href="/blog/assets/js/96.20d668b4.js"><link rel="prefetch" href="/blog/assets/js/97.017f8b9c.js"><link rel="prefetch" href="/blog/assets/js/98.5a463e71.js"><link rel="prefetch" href="/blog/assets/js/99.1c2ec226.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.381052ad.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.61668f40.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/icons/apple-touch-icon.png" alt="一苇" class="logo"> <span class="site-name can-hide">一苇</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link router-link-active">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link router-link-active">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="images/poster03.jpeg"> <div class="blogger-info"><h3></h3> <span>光阴缝隙，时间盛典。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link router-link-active">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link router-link-active">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Web3入门-实践篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/more/web3/note02.html#名词解释" class="sidebar-link">名词解释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#solidity" class="sidebar-link">Solidity</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#openzeppelin" class="sidebar-link">OpenZeppelin</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#remix-ide" class="sidebar-link">Remix IDE</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#truffle" class="sidebar-link">Truffle</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#ganache" class="sidebar-link">Ganache</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#hardhat" class="sidebar-link">Hardhat</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#metamask" class="sidebar-link">MetaMask</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#web3-js" class="sidebar-link">Web3.js</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#ethers-js" class="sidebar-link">Ethers.js</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#quasar" class="sidebar-link">Quasar</a></li></ul></li><li><a href="/blog/more/web3/note02.html#实操一-hardhat开发智能合约" class="sidebar-link">实操一：Hardhat开发智能合约</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#流程" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#其他命令" class="sidebar-link">其他命令</a></li></ul></li><li><a href="/blog/more/web3/note02.html#实操二-vue中调用计数合约" class="sidebar-link">实操二：Vue中调用计数合约</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#流程-2" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/more/web3/note02.html#实操三-ganache编写计数合约" class="sidebar-link">实操三：Ganache编写计数合约</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#流程-3" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#总结-2" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/more/web3/note02.html#实操四-truffle开发智能合约" class="sidebar-link">实操四：Truffle开发智能合约</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#流程-4" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/blog/more/web3/note02.html#总结-3" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/more/web3/note02.html#实操五-hardhat-quasar-demo" class="sidebar-link">实操五：hardhat-quasar-demo</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/more/web3/note02.html#收藏" class="sidebar-link">收藏</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/more/web3/note02.html#项目收藏" class="sidebar-link">项目收藏</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/blog/categories/?category=more" title="分类" data-v-0c557b5e>more</a></li><li data-v-0c557b5e><a href="/blog/categories/?category=web3" title="分类" data-v-0c557b5e>web3</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>阿沐</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-07-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Web3入门-实践篇<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="web3入门-实践篇"><a href="#web3入门-实践篇" class="header-anchor">#</a> Web3入门-实践篇</h1> <h2 id="名词解释"><a href="#名词解释" class="header-anchor">#</a> 名词解释</h2> <h3 id="solidity"><a href="#solidity" class="header-anchor">#</a> Solidity</h3> <blockquote><p>Solidity是最主要的、最常用的智能合约开发语言。Solidity适用于大多数智能合约平台，如Ethereum、Avalanche、Moonbeam、Polygon、BSC，等等。这是由于大多数区块链都采用了以太坊虚拟机（EVM），而solidity就是为其而生的。在目前排名前十的Defi项目中，有九个使用solidity作为他们的主要编程语言。</p></blockquote> <p>受 C++、Python 和 JavaScript 的影响，Solidity 继承了这些语言的所有优点，成为智能合约开发最常用的编程语言。</p> <p>来自世界各地的开发者选择 Solidity 是因为它的可访问性、精确性和极高的灵活性，在区块链行业受到高度重视。从 Uniswap 到 Chainlink，整个 DeFi 领域都是在 Solidity 的帮助下构建的。大多数项目都选择它进行智能合约开发，这也难怪它简洁、定义明确、易于学习和使用。</p> <p><a href="https://learnblockchain.cn/docs/solidity/" target="_blank" rel="noopener noreferrer">Solidity 最新(0.8.0)中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>关于Solidity的入门学习笔记已经记录在我的另一篇博客<a href="./solidity-learn01">Solidity入门笔记</a>里了，这里不再赘述~</p> <h3 id="openzeppelin"><a href="#openzeppelin" class="header-anchor">#</a> OpenZeppelin</h3> <blockquote><p>Openzeppelin是一套已经写好的智能合约，<a href="https://www.openzeppelin.com/" target="_blank" rel="noopener noreferrer">OpenZeppelin的智能合约代码库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是以太坊开发者的宝库，OpenZeppelin代码库包含了经过社区审查的ERC代币标准、安全协议以及很多的辅助工具库，这些代码可以帮助开发者专注业务逻辑的，而无需重新发明轮子。</p></blockquote> <ul><li><a href="https://zhuanlan.zhihu.com/p/142240709" target="_blank" rel="noopener noreferrer">OpenZeppelin 7个最常使用的合约<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="remix-ide"><a href="#remix-ide" class="header-anchor">#</a> Remix IDE</h3> <blockquote><p>您可以使用 <a href="https://remix.ethereum.org/" target="_blank" rel="noopener noreferrer">Remix IDE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 使事情变得更容易，尤其是如果您是新手。您可以使用它直接从浏览器创建、修改和执行智能合约。Remix IDE 是编写和玩弄智能合约的完美环境 。如果您使用 Remix IDE，则无需安装 Ganache 和 Truffle。</p></blockquote> <blockquote><p>Truffle 和  Remix IDE 都允许您测试和部署合约，但 truffle 可以用作项目中的构建依赖项，而 remix 更像是一个编辑器。</p></blockquote> <p>目前尝试 Solidity 编程的最好的方式是使用 Remix。Remix 是一个基于 Web 浏览器的 IDE，它可以让你编写 Solidity 智能合约，然后部署并运行该智能合约。</p> <p>当部署完一个合约时，Remix就会出现与之交互的按钮。选择solidity版本、编译、运行solidity测试等都很容易。</p> <p><a href="https://blog.csdn.net/qq_43175651/article/details/120239196" target="_blank" rel="noopener noreferrer">新版Remix界面使用教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903593498116104" target="_blank" rel="noopener noreferrer">使用Remix编译和部署以太坊智能合约<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">remix的合约如何部署钱包？</p> <ol><li>先找一个有足够余额的账户：启动 Gache 软件，选择 quick start, 会自动生成10个账户，每个账户100ETH；且生成RPC SERVER：<code>HTTP://127.0.0.1:7545</code></li> <li>钱包中添加以上网络，链id填1337, 之后导入账户，上面10个选一个就行，导入私钥；</li> <li>remix中合约开发完成，选择<code>Inject web3</code>,会自动加载出MetaMask的当前账户，第一次加载时钱包会弹框：是否确认连接<code>emix.ethereum.org</code>？选择当前账户，连接即可；之后点击<code>Deploy</code>部署，调起钱包，确认，即完成部署；部署完成后会在remix界面的<code>Deployed Contracts</code>看到部署后的详情，能看到部署后的<strong>合约地址</strong>；</li> <li>之后前端添加合约地址和合约<code>ABI</code>，即可调用该合约的方法~</li></ol> <blockquote><p>ABI 全称是 Application Binary Interface，它就是合约接口的描述.</p></blockquote></div> <p><a href="https://segmentfault.com/a/1190000040657797" target="_blank" rel="noopener noreferrer">Remix开发部署智能合约<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/qq_40261606/article/details/123249473" target="_blank" rel="noopener noreferrer">使用Ganache，web3js和remix在个人区块链上部署并调用合约<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="truffle"><a href="#truffle" class="header-anchor">#</a> Truffle</h3> <blockquote><p>一个使用以太坊虚拟机编译和测试智能合约的开发环境，Truffle 拥有超过 150 万的下载量，是开发区块链应用程序的最受欢迎的工具。</p></blockquote> <p>Truffle是最先出现的框架之一，最初是Consensys的一部分，从Consensys剥离出来，然后又合并回Consensys。它是一个基于js的框架，包含了Ganache（甚至像brownie这样的框架也使用它）、Drizzle和现在最新的truffle teams等工具。Truffle是所有框架中历史影响最大的，你可以看到他们对行业的影响，很多框架都采用了Truffle的实践做法。</p> <p>几年来，Truffle一直都是默认开发框架，这不是没有理由的。它确实是一个十分强大的框架，为许多其他框架树立了行业标准。现在使用这个平台的项目非常多，Truffle还可以很轻松地实现与姊妹工具Drizzle和Ganache集成。</p> <p><a href="https://trufflesuite.com/ganache/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://learnblockchain.cn/docs/truffle/" target="_blank" rel="noopener noreferrer">Truffle 中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ganache"><a href="#ganache" class="header-anchor">#</a> Ganache</h3> <blockquote><p><a href="https://trufflesuite.com/ganache/" target="_blank" rel="noopener noreferrer">Ganache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为您提供了一个本地区块链环境来测试您的智能合约。无论你在这个本地区块链上做什么，都会保留在你的 PC 上。</p></blockquote> <p>Ganache是一个运行着区块链的图形应用程序，即提供了一个可用于测试目的区块链。 它默认运行在<code>127.0.0.1:7545</code>上。Ganache是一个运行在本地的个人区块链，适用于以太坊的开发者。</p> <blockquote><p>Ganache在内存中模拟了一个区块链，因此每次Ganache关闭之后，区块链会丢失。</p></blockquote> <p>下载 Ganache 软件，启动，会生成一个本地的测试区块链网络。</p> <h3 id="hardhat"><a href="#hardhat" class="header-anchor">#</a> Hardhat</h3> <p><a href="https://hardhat.org/" target="_blank" rel="noopener noreferrer">Hardhat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>框架，是一个以太坊DApp开发的本地集成开发套件。经常与之对比的是<a href="https://trufflesuite.com/" target="_blank" rel="noopener noreferrer">Truffle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。相比其它作为web3基础设施的开发工具，Hardhat 更加轻量，采用插件化的思想，非常适合作为新手dapp开发入门的工具。</p> <p>现在，hardhat框架是最主要的智能合约开发框架。Hardhat是一个基于js和solidity的开发框架，可以快速提升你的应用程序的开发速度。</p> <p>Truffle 和 Hardhat 都是在以太坊区块链上编写智能合约的开发环境，这些工具允许开发者: <strong>编译合约、测试合约、部署合约、调试合约</strong>。</p> <p><a href="https://learnblockchain.cn/article/1356" target="_blank" rel="noopener noreferrer">Hardhat 入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://cloud.tencent.com/developer/article/1794419" target="_blank" rel="noopener noreferrer">Hardhat框架官方教程【以太坊开发】<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="metamask"><a href="#metamask" class="header-anchor">#</a> MetaMask</h3> <p>MetaMask是一个以太坊生态下的钱包，可以管理你的账户，支持多种网络。</p> <ul><li><a href="https://metamask.io/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://metamask.io/download/" target="_blank" rel="noopener noreferrer">官方下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 可能需要翻墙才能下载~</li> <li><a href="https://docs.metamask.io/guide/" target="_blank" rel="noopener noreferrer">MetaMask Docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>MetaMask是在浏览器中与dapps进行交互的最简单方法，可以连接到以太坊网络而无需在浏览器的计算机上运行完整节点。 它可以连接到以太坊主网以及任何一个测试网(Ropsten，Kovan和Rinkeby) 或者本地如Ganache或Truffle Develop创建的区块链。</p> <p><strong>chrome浏览器中使用</strong></p> <blockquote><p>本质上是一个 Chrome 扩展程序，可让您从浏览器连接到以太坊区块链网络。</p></blockquote> <ol><li>官方下载需要翻墙，可在github中下载压缩包，<a href="https://github.com/MetaMask/metamask-extension/releases" target="_blank" rel="noopener noreferrer">下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 解压</li> <li>chrome浏览器输入：chrome://extensions/, 加载已解压扩展程序</li></ol> <ul><li><p><a href="https://zhuanlan.zhihu.com/p/33791793" target="_blank" rel="noopener noreferrer">以太坊轻钱包MetaMask详细图文教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://baijiahao.baidu.com/s?id=1730149256112668052" target="_blank" rel="noopener noreferrer">元宇宙入门攻略：2022年新版MetaMask（小狐狸钱包）安装及注册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>浏览器中暂时禁用MetaMask</p></li></ul> <blockquote><p>点击小狐狸头像 》 管理扩展程序 》 禁用；（重新开启的话需要输入密码）</p></blockquote> <h3 id="web3-js"><a href="#web3-js" class="header-anchor">#</a> Web3.js</h3> <blockquote><p><a href="https://web3.tryblockchain.org/" target="_blank" rel="noopener noreferrer">Web3.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 JavaScript 库，允许您的 Web 应用程序从客户端（前端）与以太坊区块链交互。</p></blockquote> <p><a href="https://learnblockchain.cn/docs/web3.js/" target="_blank" rel="noopener noreferrer">web3.js 中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ethers-js"><a href="#ethers-js" class="header-anchor">#</a> Ethers.js</h3> <blockquote><p><a href="https://learnblockchain.cn/docs/ethers.js/" target="_blank" rel="noopener noreferrer">Ethers.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 Web3.js 是 JavaScript 库，是一个轻量级的web3.js替代品, 允许您的 Web 应用程序从客户端（前端）与以太坊区块链交互。该库包含 JavaScript 和 TypeScript 中的实用程序函数，以及以太坊钱包的所有功能。</p></blockquote> <p>ethers.js库旨在为以太坊区块链及其生态系统提供一个小而完整的 JavaScript API 库 它最初是与 ethers.io 一起使用，现在已经扩展为更通用的库。</p> <p>ethers.js 对比使用 web3.js 代码量更少，接口也更简洁，推荐优先使用 ethers.js 。</p> <div class="custom-block tip"><p class="custom-block-title">ethers.js 有四个模块，构成应用程序编程界面 (API)。</p> <ul><li><code>Ethers.provider</code>：封装与以太坊区块链的连接。它可以用于签发查询和发送已签名的交易，这将改变区块链的状态。</li> <li><code>Ethers.contract</code>：部署智能合约并与它交互。具体来说，该模块中的函数用于侦听从智能合约发射的事件、调用智能合约提供的函数、获取有关智能合约的信息，以及部署智能合约。</li> <li><code>Ethers.utils</code>：提供用于格式化数据和处理用户输入的实用程序函数。</li> <li><code>Ethers.wallets</code>：使你可以与现有钱包（以太坊地址）建立连接、创建新钱包以及对交易签名。</li></ul></div> <ul><li><p><code>Provider = new ethers.providers.Web3Provider(window.ethereum)</code>：Provider（在ethers中）是一个为以太坊网络连接提供抽象的类。它提供对区块链及其状态的只读访问。</p></li> <li><p><code>signer = Provider.getSigner()</code>: 签名者是一个（通常）以某种方式直接或间接访问私钥的类，它可以签署消息和交易以授权网络向您的帐户收取以太币，执行操作。</p></li> <li><p><code>Contract = new ethers.Contract(contractAddress, abi, signer)</code>: 合约是一种抽象，表示与以太坊网络上特定合约的连接，因此应用程序可以像使用普通 JavaScript 对象一样使用它。</p></li></ul> <p><a href="https://github.com/ethers-io/ethers.js" target="_blank" rel="noopener noreferrer">github地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://docs.ethers.io/v5/api/" target="_blank" rel="noopener noreferrer">ethers v5 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://learnblockchain.cn/article/3675" target="_blank" rel="noopener noreferrer">21个基于ethers的Dapp常用工具函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://learnblockchain.cn/article/1851" target="_blank" rel="noopener noreferrer">以太坊 JavaScript 库：web3.js 与 ethers.js 比较（第一部分）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/shebao3333/article/details/102490747" target="_blank" rel="noopener noreferrer">Ethers.js中文教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="quasar"><a href="#quasar" class="header-anchor">#</a> Quasar</h3> <blockquote><p><a href="https://quasar.dev/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，基于Vue 的前端框架，对于Typescript 有良好的类型支持。</p></blockquote> <h2 id="实操一-hardhat开发智能合约"><a href="#实操一-hardhat开发智能合约" class="header-anchor">#</a> 实操一：Hardhat开发智能合约</h2> <blockquote><p>实现了用 Hardhat 编写一个简单的读写合约，部署到区块链的本地网络上，并使用 MetaMask 进行交易。</p></blockquote> <p>技术栈：<code>Hardhat + Solidity + MetaMask</code></p> <p>参考：<a href="https://baijiahao.baidu.com/s?id=1727989741134662012" target="_blank" rel="noopener noreferrer">web3开发DApp项目入门教程（2022年最新）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h3> <ul><li><strong>初始化</strong>：创建一个目录 <code>hardhat-demo</code>, 进到这个目录里，执行<code>npx hardhat init</code>,一路回车；</li></ul> <blockquote><p>node版本<code>v14+</code>~</p></blockquote> <ul><li><strong>本地启动</strong>：<code>npx hardhat node</code></li></ul> <blockquote><p>按照 <code>hardhat.config.js</code> 中声明的配置，<strong>启动区块链网络一个本地节点</strong>。在每次启动时，默认会提供 20 个钱包账户和私钥，每个钱包提供 10000 个 ETH 做测试。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// hardhat.config.js</span>

<span class="token comment">// 声明依赖</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;dotenv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 声明 Hardhat 启动时执行的任务，下面这个任务的作用是打印账户的信息</span>
<span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&quot;accounts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Prints the list of accounts&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">taskArgs<span class="token punctuation">,</span> hre</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> hre<span class="token punctuation">.</span>ethers<span class="token punctuation">.</span><span class="token function">getSigners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> account <span class="token keyword">of</span> accounts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 声明配置项</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">solidity</span><span class="token operator">:</span> <span class="token string">&quot;0.8.4&quot;</span><span class="token punctuation">,</span> <span class="token comment">// solidity 编译器的版本</span>
  <span class="token literal-property property">networks</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 网络配置情况，下面可以添加多个网络的配置 </span>
    <span class="token literal-property property">localhost</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 本地网络</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://127.0.0.1:8545&quot;</span>  <span class="token comment">// 本地网络的 url    </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hardhat</span><span class="token operator">:</span> <span class="token punctuation">{</span>     <span class="token comment">// Hardhat 网络配置     </span>
      <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token number">31337</span><span class="token punctuation">,</span>      <span class="token comment">// 链 ID，默认 31337      </span>
      <span class="token literal-property property">gasPrice</span><span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span>      <span class="token comment">// gas 价格，默认 auto    </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// rinkeby: {    // rinkeby 网络         </span>
    <span class="token comment">//   url: &quot;https://eth-rinkeby.alchemyapi.io/v2/123abc123abc123abc123abc123abcde&quot;, // rinkeby 结点的 url </span>
    <span class="token comment">//   accounts: [privateKey1, privateKey2, ...]  // 使用的账户列表    </span>
    <span class="token comment">// },</span>
    <span class="token literal-property property">ropsten</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ROPSTEN_URL</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">accounts</span><span class="token operator">:</span>
        process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PRIVATE_KEY</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token punctuation">[</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">gasReporter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">enabled</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REPORT_GAS</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">&quot;USD&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">etherscan</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">apiKey</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ETHERSCAN_API_KEY</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置合约路径</span>
  <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token string">&quot;contracts&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><ul><li><strong>MetaMask钱包添加本地网络</strong></li></ul> <ol><li>Chrome浏览器下载安装Metamask插件;</li></ol> <blockquote><p>具体下载方法上面<a href="#metamask">名词解释</a>中有说明~</p></blockquote> <ol start="2"><li>通过助记词生成账户；</li></ol> <blockquote><p>接下来可以通过助记词的方式，生成一个新账户；也可以通过粘贴私钥的方式，导入你原有的账户；切记：<strong>一定要记住助记词！！！</strong></p></blockquote> <ol start="3"><li>添加本地启动的本地区块链网络节点；</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>网络名称：LocalHost_8545 <span class="token comment">// 自定义</span>
<span class="token constant">RPC_URL</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8545</span> <span class="token comment">// 上方启动的本地节点</span>
链<span class="token constant">ID</span><span class="token operator">:</span> <span class="token number">31337</span> <span class="token comment">// </span>
货币符号：<span class="token constant">ETH</span>
</code></pre></div><ol start="4"><li>通过私钥导入测试账户</li></ol> <blockquote><p>创建成功后，点击右上角头像，通过私钥导入账户，从生成的20个测试账户中随便导入一个即可~</p></blockquote> <ul><li><strong>编写一个简单的读写合约</strong>：<code>Greeter.sol</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// contracts/Greeter.sol</span>

<span class="token comment">//SPDX-License-Identifier: Unlicense</span>
pragma solidity <span class="token operator">^</span><span class="token number">0.8</span><span class="token number">.0</span><span class="token punctuation">;</span> <span class="token comment">// 声明 licensepragma solidity ^0.8.0;</span>

<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 导入其它智能合约文件: 是 Hardhat 框架自带的，是一个用于方便调试的合约文件</span>

<span class="token comment">// 定义一个合约，合约名字叫 Greeter</span>
contract Greeter <span class="token punctuation">{</span>
    string <span class="token keyword">private</span> greeting<span class="token punctuation">;</span> <span class="token comment">// 这个合约的一个私有变量</span>

    <span class="token comment">// 合约的构造函数, 当且仅当合约被部署时，会被执行一次</span>
    <span class="token comment">// memory：和 storage 关键字相反，代表了变量只会临时放在内存中，不会存储在合约的状态中；</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">string memory _greeting</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Deploying a Greeter with greeting:&quot;</span><span class="token punctuation">,</span> _greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
        greeting <span class="token operator">=</span> _greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 可以被外部调用的合约方法，view 声明了这是个只读方法, 不会改变合约的状态</span>
    <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> view <span class="token function">returns</span> <span class="token punctuation">(</span><span class="token parameter">string memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这是一个写方法，会改变合约的状态，且外部调用时会消耗 gas</span>
    <span class="token keyword">function</span> <span class="token function">setGreeting</span><span class="token punctuation">(</span><span class="token parameter">string memory _greeting</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Changing greeting from '%s' to '%s'&quot;</span><span class="token punctuation">,</span> greeting<span class="token punctuation">,</span> _greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
        greeting <span class="token operator">=</span> _greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>部署合约</strong>：<code>npx hardhat run scripts/deploy.js --network localhost</code></li></ul> <blockquote><p>执行 <code>scripts/deploy.js</code> 中的 <code>main</code> 方法，<strong>把合约部署到了本地网络上</strong>，并且打印出了 <code>Greeter</code> 这个合约的部署地址。<strong>每次部署生成的地址都不同</strong></p></blockquote> <p>到这步为止，我们的 <code>Greeter</code> 合约就成功在本地网络上部署好了，也成功使用 <code>MetaMask</code> 钱包，进行了本地网络连接、测试账户导入。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// scripts/deploy.js</span>

<span class="token comment">/**
 *  作用：是将刚才的 Greeter.sol 智能合约编译并部署到链上。
 */</span>

<span class="token keyword">const</span> hre <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;hardhat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 声明依赖库</span>

<span class="token comment">// 定义 main 函数, 获取合约 </span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> Greeter <span class="token operator">=</span> <span class="token keyword">await</span> hre<span class="token punctuation">.</span>ethers<span class="token punctuation">.</span><span class="token function">getContractFactory</span><span class="token punctuation">(</span><span class="token string">&quot;Greeter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 部署合约，并得到一个合约的实例 Greeter</span>

  <span class="token comment">// Greeter 这个合约像是一个类，而每次部署得到的 greeter 像是 new 了一个类的对象。因此每次部署，都会生成出不同的对象，得到的合约地址也就不同。</span>
  <span class="token keyword">const</span> greeter <span class="token operator">=</span> <span class="token keyword">await</span> Greeter<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Hardhat! hello, World! Hello Web3!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> greeter<span class="token punctuation">.</span><span class="token function">deployed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待合约部署完成</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Greeter deployed to:&quot;</span><span class="token punctuation">,</span> greeter<span class="token punctuation">.</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印日志，记录合约的地址</span>
<span class="token punctuation">}</span>

<span class="token comment">// 执行 main 函数</span>
<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="其他命令"><a href="#其他命令" class="header-anchor">#</a> 其他命令</h3> <ul><li><code>npx hardhat test</code></li></ul> <blockquote><p>用于执行单元测试，在示例中，也就是运行了 <code>test/sample_test.js</code>;</p></blockquote> <blockquote><p>当执行 npx hardhat test 命令时，会内置创建 hardhat 网络，并在 hardhat 网络上完成合约部署、方法调用等，不会部署在 localhost 网络上。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// test/sample_test.js</span>

<span class="token comment">/**
 * 单元测试文件
 */</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> expect <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;chai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引入依赖</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ethers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;hardhat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// describe 和 it 指示了在进行 case test</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Greeter&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;Should return the new greeting once it's changed&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 这里和 scripts/deploy.js 中的代码一样， 也是获取合约 + 部署合约 + 等待部署完成</span>
    <span class="token keyword">const</span> Greeter <span class="token operator">=</span> <span class="token keyword">await</span> ethers<span class="token punctuation">.</span><span class="token function">getContractFactory</span><span class="token punctuation">(</span><span class="token string">&quot;Greeter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> greeter <span class="token operator">=</span> <span class="token keyword">await</span> Greeter<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> greeter<span class="token punctuation">.</span><span class="token function">deployed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 测试点 1 : greeter.greet()的返回结果应该等于 Hello, world!1111</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 执行合约的写方法</span>
    <span class="token keyword">const</span> setGreetingTx <span class="token operator">=</span> <span class="token keyword">await</span> greeter<span class="token punctuation">.</span><span class="token function">setGreeting</span><span class="token punctuation">(</span><span class="token string">&quot;Hola, mundo!11111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// wait until the transaction is mined</span>
    <span class="token keyword">await</span> setGreetingTx<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 测试点 2</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">&quot;Hola, mundo!11111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li><code>npx hardhat console</code></li></ul> <blockquote><p>启动一个控制台程序，方便交互式输入输出。例如输入 config 查看配置情况</p></blockquote> <ul><li><code>npx hardhat compile</code></li></ul> <blockquote><p>在执行 <code>npx hardhat run scripts/deploy.js --network localhost</code> 部署合约的时候，其实 <code>hardhat</code> 偷偷帮你做了一件事情：<strong>编译</strong>;</p></blockquote> <blockquote><p>执行 <code>npx hardhat compile</code> 命令, 会在根目录下生成 <code>artifacts</code> 和 <code>cache</code> 目录；<code>cache</code> 是编译出来的缓存文件夹，`artifacts`` 目录下的文件由源文件编译而来。</p></blockquote> <ul><li><code>npx hardhat clean</code></li></ul> <blockquote><p>这个命令和 <code>npx hardhat compile</code> 的作用恰好相反，是把编译出来的文件清理一下.</p></blockquote> <ul><li><code>npx hardhat help</code></li></ul> <blockquote><p>这条命令会展示 npx hardhat 系列命令的用法</p></blockquote> <h2 id="实操二-vue中调用计数合约"><a href="#实操二-vue中调用计数合约" class="header-anchor">#</a> 实操二：Vue中调用计数合约</h2> <blockquote><p>继续刚才的实操一项目，在里面添加计数合约；前端新建<code>vue</code>项目，实现合约的调用~</p></blockquote> <p>技术栈：<code>@vue/cli + ethers</code></p> <p>学习参考：</p> <ul><li><a href="https://www.bilibili.com/video/BV1qL4y1M7nZ" target="_blank" rel="noopener noreferrer">solidity与vue进行前端交互<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/weixin_42582423/article/details/124402614" target="_blank" rel="noopener noreferrer">前端VUE使用web3调用小狐狸（metamask）和合约（ERC20）交互<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>项目参考：<a href="https://github.com/kasoqian/hardhat-vue-demo" target="_blank" rel="noopener noreferrer">hardhat-vue-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="流程-2"><a href="#流程-2" class="header-anchor">#</a> 流程</h3> <p><strong>vue项目搭建</strong></p> <ul><li><p><code>npm install -g @vue/cli</code></p></li> <li><p><code>vue create vue-web3-demo</code></p></li> <li><p><code>npm i ethers</code></p></li></ul> <p><strong><code>Greeter.sol</code>中添加计数方法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// contracts/Greeter.sol</span>

<span class="token comment">//SPDX-License-Identifier: Unlicense</span>
pragma solidity <span class="token operator">^</span><span class="token number">0.8</span><span class="token number">.0</span><span class="token punctuation">;</span> <span class="token comment">// 声明 licensepragma solidity ^0.8.0;</span>

<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 导入其它智能合约文件: 是 Hardhat 框架自带的，是一个用于方便调试的合约文件</span>

<span class="token comment">// 定义一个合约，合约名字叫 Greeter</span>
contract Greeter <span class="token punctuation">{</span>
    string <span class="token keyword">private</span> greeting<span class="token punctuation">;</span> <span class="token comment">// 这个合约的一个私有变量</span>
    uint256 counts<span class="token punctuation">;</span> <span class="token comment">// 声明了一个名为 counts 的状态变量，其类型为 uint (256位无符号整数）</span>

    <span class="token comment">// 合约的构造函数, 当且仅当合约被部署时，会被执行一次</span>
    <span class="token comment">// memory：和 storage 关键字相反，代表了变量只会临时放在内存中，不会存储在合约的状态中；</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">string memory _greeting</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Deploying a Greeter with greeting:&quot;</span><span class="token punctuation">,</span> _greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
        greeting <span class="token operator">=</span> _greeting<span class="token punctuation">;</span>
        counts <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 可以被外部调用的合约方法，view 声明了这是个只读方法, 不会改变合约的状态</span>
    <span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> view <span class="token function">returns</span> <span class="token punctuation">(</span><span class="token parameter">string memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这是一个写方法，会改变合约的状态，且外部调用时会消耗 gas</span>
    <span class="token keyword">function</span> <span class="token function">setGreeting</span><span class="token punctuation">(</span><span class="token parameter">string memory _greeting</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Changing greeting from '%s' to '%s'&quot;</span><span class="token punctuation">,</span> greeting<span class="token punctuation">,</span> _greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
        greeting <span class="token operator">=</span> _greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
    计数方法
     */</span>
    <span class="token comment">//  获取计数</span>
     <span class="token keyword">function</span> <span class="token function">countGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> view <span class="token function">returns</span> <span class="token punctuation">(</span><span class="token parameter">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> counts<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">function</span> <span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
         counts <span class="token operator">++</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>参照实操一的<code>npx hardhat run scripts/deploy.js --network localhost</code>方法，将合约部署到链上~</p> <p><strong>引入合约abi</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/contract.js</span>

<span class="token comment">// 合约编译之后生成的abi结构</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> contractABI <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">inputs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'countAdd'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">outputs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stateMutability</span><span class="token operator">:</span> <span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;function&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">inputs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stateMutability</span><span class="token operator">:</span> <span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;constructor&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">inputs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'countGet'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">outputs</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 输出</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">internalType</span><span class="token operator">:</span> <span class="token string">&quot;uint256&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 类型</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;uint256&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stateMutability</span><span class="token operator">:</span> <span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;function&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 链上地址, hardhat每次部署后都会生成这样一个地址</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> contractAddress <span class="token operator">=</span> <span class="token string">&quot;0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>合约调用</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- scr/App.vue --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!userAddress<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>用户地址：{{userAddress}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>当前计数：{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>add<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
     
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>ethers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ethers'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>contractABI<span class="token punctuation">,</span> contractAddress<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./contract'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">userAddress</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">checkLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用Metamask 钱包，metamask 钱包会在每个网页js 上下文注入一个全局对像，也就是window.ethereum，以方便每一个dapp 应用与区块链交互。</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>ethereum<span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ethereum<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ethereum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请安装 metamask钱包~'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 调起浏览器的metamask钱包      </span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>account<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Provider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'eth_requestAccounts'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266' 获取到钱包地址</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>userAddress <span class="token operator">=</span> account<span class="token punctuation">;</span>
      

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">Provider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>Web3Provider</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 合约</span>
    <span class="token function">Contract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Provider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> signer <span class="token operator">=</span> Provider<span class="token punctuation">.</span><span class="token function">getSigner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取用户</span>
      <span class="token comment">// 生成合约实例</span>
      <span class="token keyword">const</span> Contract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span>contractAddress<span class="token punctuation">,</span> contractABI<span class="token punctuation">,</span> signer<span class="token punctuation">)</span>
      <span class="token keyword">return</span> Contract<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 获取计数</span>
    <span class="token keyword">async</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Contract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">countGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 增加计数</span>
    <span class="token keyword">async</span> <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Contract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用add方法，在metamask中执行交易</span>
      <span class="token keyword">await</span> tx<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待tx执行完毕</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更新</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上就完成了在<code>vue</code>项目中一个计数合约的简单调用，每次调用<code>countAdd</code>方法时钱包都会弹窗提醒用户手动确认交易，每次交易都会消耗一定金额的eth，可在钱包界面查看到每次的交易记录~</p> <p>前端启动服务后，项目初始化, 第一次调用钱包实例<code>ethereum</code>会弹窗提示是否连接前端服务连接，选择连接即可~</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>实操一和实操二两个例子结合在一起，总结一下，大致流程如下：</p> <ol><li><p>服务端使用 <code>Hardhat</code> 创建项目，并启动区块链本地网络节点；</p></li> <li><p>通过<code>MetaMask</code>钱包连接这个本地网络，通过私钥导入上一步启动本地网络时生成的测试账户；</p></li> <li><p>服务端使用<code>Solidity</code>编写合约，并编译部署，每次编译部署会生成合约地址，<code>abi</code>等信息；</p></li> <li><p>前端通过<code>Vue</code>新建项目，并通过<code>ethers.js</code>连接钱包，这样就能连接上钱包上的本地区块链网络；</p></li></ol> <blockquote><p>MetaMask的优势在于可以管理多个网络，只要我们浏览器上安装该插件，就可以访问区块链的测试、线上、本地等网络~</p></blockquote> <ol start="5"><li><p>前端连接上钱包，拿到服务端部署合约后生成的合约地址、<code>abi</code>等信息，就可以生成合约实例；</p></li> <li><p>之后就可以调用服务端编写的合约方法了，每次的交易都能在钱包上看到~</p></li></ol> <h2 id="实操三-ganache编写计数合约"><a href="#实操三-ganache编写计数合约" class="header-anchor">#</a> 实操三：Ganache编写计数合约</h2> <blockquote><p>使用 Ganache 启动本地区块链网络；并用 Remix 编写一个简单的计数合约，编译；本地通过 Web3.js 部署合约，并完成调用~</p></blockquote> <p>技术栈：<code>Ganache + Web3.js + Remix IDE</code></p> <p>参考：<a href="https://blog.csdn.net/qq_40261606/article/details/123249473" target="_blank" rel="noopener noreferrer">使用Ganache，web3js和remix在个人区块链上部署并调用合约<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="流程-3"><a href="#流程-3" class="header-anchor">#</a> 流程</h3> <ul><li>安装 <a href="https://trufflesuite.com/ganache/" target="_blank" rel="noopener noreferrer">Ganache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 软件</li></ul> <blockquote><p>启动 Ganache, 选择 quick start, 会自动启动本地网络RPC SERVER：<code>HTTP://127.0.0.1:7545</code>，同时生成10个可供使用的测试账号，每个有100ETH;</p></blockquote> <ul><li><p>创建项目，项目根目录下安装web3: <code>npm --registry http://registry.npm.taobao.org install web3</code></p></li> <li><p>项目初始化：<code>npm init -y</code></p></li> <li><p>项目根目录下新建<code>index.js</code>，先尝试连接 Ganache 启动的本地网络，获取测试账号</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> localhost <span class="token operator">=</span> <span class="token string">&quot;http://127.0.0.1:7545&quot;</span>
<span class="token keyword">var</span> Web3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;web3&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Web3<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>HttpProvider</span><span class="token punctuation">(</span>localhost<span class="token punctuation">)</span><span class="token punctuation">)</span>
web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;账户列表地址：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>终端输入<code>node index.js</code>，可看到10个地址都被打印出来了~</p> <ul><li>编写合约：浏览器打开<a href="https://remix.ethereum.org" target="_blank" rel="noopener noreferrer">remix IDE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，写一个简单的计数合约<code>Count.sol</code>，编译；编辑成功后可以在 <code>Compilation Details</code> 中查看合约<code>ABI、WEB3DEPLOY</code>等详细信息；</li></ul> <blockquote><p>关于 remix 的使用可以参考上面名词解释中的说明~</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//SPDX-License-Identifier: Unlicense</span>
pragma solidity <span class="token operator">^</span><span class="token number">0.8</span><span class="token number">.0</span><span class="token punctuation">;</span> <span class="token comment">// 声明 licensepragma solidity ^0.8.0;</span>

<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 导入其它智能合约文件: 是 Hardhat 框架自带的，是一个用于方便调试的合约文件</span>


contract Count <span class="token punctuation">{</span>
    uint256 counts<span class="token punctuation">;</span> <span class="token comment">// 声明了一个名为 counts 的状态变量，其类型为 uint (256位无符号整数）</span>

    <span class="token comment">// 合约的构造函数, 当且仅当合约被部署时，会被执行一次</span>
    <span class="token comment">// memory：和 storage 关键字相反，代表了变量只会临时放在内存中，不会存储在合约的状态中；</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        counts <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Deploying a Count with counts:&quot;</span><span class="token punctuation">,</span> counts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
    计数方法
     */</span>
    <span class="token comment">//  获取计数</span>
     <span class="token keyword">function</span> <span class="token function">countGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> view <span class="token function">returns</span> <span class="token punctuation">(</span><span class="token parameter">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;======counts get&quot;</span><span class="token punctuation">,</span> counts<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> counts<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">function</span> <span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;======countAdd&quot;</span><span class="token punctuation">,</span> counts<span class="token punctuation">)</span><span class="token punctuation">;</span>
         counts <span class="token operator">++</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><ul><li>将<code>WEB3DEPLOY</code>里面的代码复制到<code>index.js</code>中，把里面的<code>web3.eth.accounts[0]</code>替换为我们自己的地址<code>account_1</code>(在Ganache给我们的十个账户中随便选一个就行):</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>

<span class="token comment">/**
 * 尝试一下获取Ganache中给予我们的十个账户地址
 */</span>
<span class="token keyword">var</span> localhost <span class="token operator">=</span> <span class="token string">&quot;http://127.0.0.1:7545&quot;</span>
<span class="token keyword">var</span> Web3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;web3&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Web3<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>HttpProvider</span><span class="token punctuation">(</span>localhost<span class="token punctuation">)</span><span class="token punctuation">)</span>
web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;账户列表地址：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印出 Ganache 中生成的地址</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">var</span> account_1 <span class="token operator">=</span> <span class="token string">'0x02E4b829695efaa8026b558B9f97a9ff38923A53'</span><span class="token punctuation">;</span> <span class="token comment">// 在Ganache给我们的十个账户中随便选一个就行</span>

<span class="token comment">/**
 * 
 * 以下代码为remix上编译Count.sol后 WEB3DEPLOY 中的代码~
 * 执行 node index.js 可将 Count.sol 部署到 Ganache 上
 */</span>
<span class="token keyword">var</span> storageContract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;inputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;retrieve&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;internalType&quot;</span><span class="token operator">:</span><span class="token string">&quot;uint256&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;uint256&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;stateMutability&quot;</span><span class="token operator">:</span><span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;inputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;internalType&quot;</span><span class="token operator">:</span><span class="token string">&quot;uint256&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;num&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;uint256&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;store&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;stateMutability&quot;</span><span class="token operator">:</span><span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> storage <span class="token operator">=</span> storageContract<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">'0x608060405234801561001057600080fd5b50610150806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c80632e64cec11461003b5780636057361d14610059575b600080fd5b610043610075565b60405161005091906100d9565b60405180910390f35b610073600480360381019061006e919061009d565b61007e565b005b60008054905090565b8060008190555050565b60008135905061009781610103565b92915050565b6000602082840312156100b3576100b26100fe565b5b60006100c184828501610088565b91505092915050565b6100d3816100f4565b82525050565b60006020820190506100ee60008301846100ca565b92915050565b6000819050919050565b600080fd5b61010c816100f4565b811461011757600080fd5b5056fea26469706673582212209a159a4f3847890f10bfb87871a61eba91c5dbf5ee3cf6398207e292eee22a1664736f6c63430008070033'</span><span class="token punctuation">,</span> 
     <span class="token literal-property property">arguments</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//  from: web3.eth.accounts[0], </span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> account_1<span class="token punctuation">,</span> <span class="token comment">// 替换为account_1 </span>
     <span class="token literal-property property">gas</span><span class="token operator">:</span> <span class="token string">'4700000'</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> contract</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> contract<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> contract<span class="token punctuation">.</span>address <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Contract mined! address: '</span> <span class="token operator">+</span> contract<span class="token punctuation">.</span>address <span class="token operator">+</span> <span class="token string">' transactionHash: '</span> <span class="token operator">+</span> contract<span class="token punctuation">.</span>transactionHash<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><blockquote><p>执行 <code>node index.js</code>后终端打印出交易地址，即表示部署成功~</p></blockquote> <ul><li><p>这时点击 <code>Ganache</code> 点击最上方的<code>BLOCKS</code>再点最上方生成的块即可看到交易的信息，可以看到<code>TX HASH</code>的地址和我们输出的地址一样，说明我们的合约已经在<code>Ganache</code>上部署成功了，接下来我们就可以拿到上面的合约地址调用合约了~</p></li> <li><p>调用合约：根目录下新建<code>main.js</code>, 将我们刚刚部署号的合约地址<code>contractAddress</code>，<code>data</code>(从<code>WEB3DEPLOY</code>中复制出来的代码里面)以及<code>ABI</code>加到我们的代码里:</p></li></ul> <blockquote><p>合约地址可在 Ganache 的交易信息里看到: <code>CREATED CONTRACT ADDRESS</code>~</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>


<span class="token keyword">var</span> localhost <span class="token operator">=</span> <span class="token string">&quot;http://127.0.0.1:7545&quot;</span> <span class="token comment">// Ganache启动后的地址</span>

<span class="token keyword">var</span> account_1 <span class="token operator">=</span> <span class="token string">'0x02E4b829695efaa8026b558B9f97a9ff38923A53'</span><span class="token punctuation">;</span> <span class="token comment">// 在Ganache给我们的十个账户中随便选一个就行</span>

<span class="token keyword">var</span> contractAddress <span class="token operator">=</span> <span class="token string">&quot;0xc2543D152826eCC8D5372d91558b26dFB6cB8eaf&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 部署合约后在Ganache中生成的合约地址</span>

<span class="token comment">// 可在remix上编译后复制</span>
<span class="token keyword">var</span> contractABI <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;stateMutability&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;constructor&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;countAdd&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;stateMutability&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;function&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;countGet&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token string-property property">&quot;internalType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uint256&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uint256&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;stateMutability&quot;</span><span class="token operator">:</span> <span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;function&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token comment">// 可在remix上编译后复制</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&quot;0x608060405234801561001057600080fd5b50600080819055506100636040518060400160405280601e81526020017f4465706c6f79696e67206120436f756e74207769746820636f756e74733a000081525060005461006860201b6100851760201c565b610215565b610106828260405160240161007e92919061017b565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505061010a60201b60201c565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b600061013e826101ab565b61014881856101b6565b93506101588185602086016101d1565b61016181610204565b840191505092915050565b610175816101c7565b82525050565b600060408201905081810360008301526101958185610133565b90506101a4602083018461016c565b9392505050565b600081519050919050565b600082825260208201905092915050565b6000819050919050565b60005b838110156101ef5780820151818401526020810190506101d4565b838111156101fe576000848401525b50505050565b6000601f19601f8301169050919050565b6102f5806102246000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806310cfb2b41461003b578063b62d26e914610045575b600080fd5b610043610063565b005b61004d61007c565b60405161005a91906101c2565b60405180910390f35b60008081548092919061007590610236565b9190505550565b60008054905090565b61011d828260405160240161009b929190610192565b6040516020818303038152906040527f9710a9d0000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8381831617835250505050610121565b5050565b60008151905060006a636f6e736f6c652e6c6f679050602083016000808483855afa5050505050565b6000610155826101dd565b61015f81856101e8565b935061016f818560208601610203565b610178816102ae565b840191505092915050565b61018c816101f9565b82525050565b600060408201905081810360008301526101ac818561014a565b90506101bb6020830184610183565b9392505050565b60006020820190506101d76000830184610183565b92915050565b600081519050919050565b600082825260208201905092915050565b6000819050919050565b60005b83811015610221578082015181840152602081019050610206565b83811115610230576000848401525b50505050565b6000610241826101f9565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156102745761027361027f565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000601f19601f830116905091905056fea26469706673582212204ec17c557a47d14a36b6bdf98911d991ced44306502500b4ea2d7614e192278364736f6c63430008070033&quot;</span>



<span class="token keyword">var</span> Web3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;web3&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 连接 Ganache 上的本地区块链</span>
<span class="token keyword">var</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Web3<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>HttpProvider</span><span class="token punctuation">(</span>localhost<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 连接部署到 Ganache 上的合约地址, 生成合约实例</span>
<span class="token keyword">var</span> Storage_Contract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span>contractABI<span class="token punctuation">,</span> contractAddress<span class="token punctuation">)</span>

<span class="token comment">// 传入参数</span>
Storage_Contract<span class="token punctuation">.</span>options<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>



<span class="token comment">// 调用合约的 countAdd 方法</span>
Storage_Contract<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">countAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">from</span> <span class="token operator">:</span> account_1<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;=====countAdd &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用合约的 countGet 方法</span>
Storage_Contract<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">countGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">from</span> <span class="token operator">:</span> account_1<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;=====countGet&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><blockquote><p>执行 <code>node main.js</code>，打印出正确结果，则表示合约调用成功~</p></blockquote> <h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h3> <p>总结一下，大致流程就是：</p> <ol><li>使用<code>Ganache</code>启动本地区块链网络；</li> <li>使用<code>Remix</code>编写合约，并编译；</li> <li>项目中通过<code>Web3.js</code>连接<code>Ganache</code>启动的本地网络，拿到<code>Remix</code>中合约编译后的<code>ABI</code>等信息，生成合约实例；</li> <li>然后就可以在项目中调用合约方法了，并能在 <code>Ganache</code> 上看到交易信息~</li></ol> <h2 id="实操四-truffle开发智能合约"><a href="#实操四-truffle开发智能合约" class="header-anchor">#</a> 实操四：Truffle开发智能合约</h2> <blockquote><p>使用 truffle 框架开发智能合约，前端通过 vue 实现对合约的调用~</p></blockquote> <p>技术栈：<code>Truffle + Solidity + @vue/cli + Web3.js + MetaMask</code></p> <p>参考： <a href="https://learnblockchain.cn/2019/12/20/vue-dapp" target="_blank" rel="noopener noreferrer">如何使用Vue.js 开发以太坊DApp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="流程-4"><a href="#流程-4" class="header-anchor">#</a> 流程</h3> <p><strong>创建 Vue 项目</strong></p> <ul><li><p><code>npm install -g @vue/cli</code></p></li> <li><p><code>vue create truffle-vue-dapp</code></p></li> <li><p><code>cd truffle-vue-dapp</code></p></li> <li><p><code>npm run serve</code></p></li></ul> <p><strong>初始化 truffle</strong></p> <ul><li><p><code>npm install -g truffle</code></p></li> <li><p><code>truffle init</code></p></li></ul> <p><strong>与众筹合约交互</strong></p> <blockquote><p>现在来编写JavaScript逻辑部分，前端界面与合约进行交互时，需要使用到 truffle-contract 及 web3</p></blockquote> <ul><li><code>npm install --save truffle-contract web3</code></li></ul> <p>MetaMask 和 Ganache 搭配使用: 探测 MetaMask 注入的 web3</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Web3 <span class="token keyword">from</span> <span class="token string">&quot;web3&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 检查新版MetaMask</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    App<span class="token punctuation">.</span>web3Provider <span class="token operator">=</span> window<span class="token punctuation">.</span>ethereum<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 请求用户账号授权</span>
      <span class="token keyword">await</span> window<span class="token punctuation">.</span>ethereum<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 用户拒绝了访问</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;User denied account access&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 老版 MetaMask</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>web3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    App<span class="token punctuation">.</span>web3Provider <span class="token operator">=</span> window<span class="token punctuation">.</span>web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">// 如果没有注入的web3实例，回退到使用 Ganache</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    App<span class="token punctuation">.</span>web3Provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>HttpProvider</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:7545'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span>App<span class="token punctuation">.</span>web3Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
  web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">accs</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> accs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 获取账户</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>关于项目实践的其他细节，这里不再赘述，具体可看上方参考链接~</p> <p>这里有另一个的实践项目<a href="https://www.it1129.com/2022/03/09/truffle-ganache-%e4%b8%8e-quasar-vue-typescript-web3-js-%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba/" target="_blank" rel="noopener noreferrer">truffle_start_kit<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可供参考，使用技术栈：<code>Truffle + Solidity + web3.js + Ganache + Quasar + ts</code>，Quasar其实就是 Vue 的框架，这里用的是 Vue3~ 大致实现原理都比较类似~</p> <h3 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> 总结</h3> <p>大致流程和实操一、二类似，就是这里是使用 Truffle 框架搭建的项目：</p> <ol><li>首先服务端使用 Truffle 搭建项目，使用 Solidity 编写合约;</li> <li>Truffle 本身并没有以太坊测试环境，需要下载 ganache 以太访本地测试网络: <code>http://127.0.0.0.1:7545</code>, 之后在 MetaMask 钱包中添加该测试网络，导入测试账户私钥；</li> <li>之后就可以在服务端通过编译合约，生成合约 abi 与 类型声明文件；部署合约到上述测试网络上；</li> <li>前端通过 <code>Web.js</code> 钱包，并调用合约方法，交易信息可以在钱包上看到~</li></ol> <h2 id="实操五-hardhat-quasar-demo"><a href="#实操五-hardhat-quasar-demo" class="header-anchor">#</a> 实操五：hardhat-quasar-demo</h2> <blockquote><p>这是一个服务端用 Hardhat, 客户端使用 Quasar 搭建的 web3 项目，相关笔记放在另一篇博文<a href="./hardhat-quasar-demo">hardhat-quasar-demo项目搭建笔记</a>了，这里不再赘述~</p></blockquote> <h2 id="收藏"><a href="#收藏" class="header-anchor">#</a> 收藏</h2> <ul><li><a href="https://learnblockchain.cn/" target="_blank" rel="noopener noreferrer">登链社区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://faucet.metamask.io/" target="_blank" rel="noopener noreferrer">https://faucet.metamask.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://learnblockchain.cn/docs/solidity/" target="_blank" rel="noopener noreferrer">Solidity 中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/459165804" target="_blank" rel="noopener noreferrer">2022十大智能合约开发工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.etherscan.com/" target="_blank" rel="noopener noreferrer">cn.etherscan.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.it1129.com/" target="_blank" rel="noopener noreferrer">专注区块链开发与应用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="项目收藏"><a href="#项目收藏" class="header-anchor">#</a> 项目收藏</h2> <ul><li><a href="https://github.com/QuintionTang/vue-game-dapp" target="_blank" rel="noopener noreferrer">vue-game-dapp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <a href="/more/web3/" class="fix-link" data-v-84d70020>Back</a></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blog/tags/?tag=web3" title="标签">#web3</a><a href="/blog/tags/?tag=%E5%8C%BA%E5%9D%97%E9%93%BE" title="标签">#区块链</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/11/2023, 10:29:38 AM</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/more/github-actions.html"><div>
            Github Actions自动部署
            <!----></div></a> <span class="date">09-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/project/mono-react-project.html"><div>
            MonoRepo——React项目实践
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/more/jenkins-deploy.html"><div>
            Jenkins前端自动化部署
            <!----></div></a> <span class="date">08-10</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>一苇 | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal"><img src="/blog/images/icp.png" width="20" height="20" alt="公网备案"/>京ICP备2021006935号-2</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><!----><div></div></div></div>
    <script src="/blog/assets/js/app.07c9fec8.js" defer></script><script src="/blog/assets/js/3.a2a245ac.js" defer></script><script src="/blog/assets/js/88.7071fdf7.js" defer></script><script src="/blog/assets/js/4.245b4373.js" defer></script>
  </body>
</html>

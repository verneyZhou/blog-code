<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack4迁移webpack5 | 一苇</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="manifest" href="/js/mainfest.json">
    <link rel="stylesheet" href="/styles/css/style.css">
    <script type="utf-8" src="/js/disable-user-zoom.js"></script>
    <meta name="description" content="这是阿沐的博客哦~">
    <meta name="Author" content="一苇">
    <meta rel="keywords" content="verneyzhou,阿沐,一苇,前端,docs.verneyzhou-code.cn,博客,fe,IT,技术">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.3c92d36b.css" as="style"><link rel="preload" href="/assets/js/app.d9800c43.js" as="script"><link rel="preload" href="/assets/js/3.a2a245ac.js" as="script"><link rel="preload" href="/assets/js/150.dfc8c76e.js" as="script"><link rel="preload" href="/assets/js/4.245b4373.js" as="script"><link rel="prefetch" href="/assets/js/10.0b6c1152.js"><link rel="prefetch" href="/assets/js/100.fcf083e6.js"><link rel="prefetch" href="/assets/js/101.ac9e5029.js"><link rel="prefetch" href="/assets/js/102.e7a0064c.js"><link rel="prefetch" href="/assets/js/103.57dc8e76.js"><link rel="prefetch" href="/assets/js/104.821fb263.js"><link rel="prefetch" href="/assets/js/105.0d3ac0ed.js"><link rel="prefetch" href="/assets/js/106.ecea04f6.js"><link rel="prefetch" href="/assets/js/107.03ddf2b5.js"><link rel="prefetch" href="/assets/js/108.f2ac7726.js"><link rel="prefetch" href="/assets/js/109.6171f122.js"><link rel="prefetch" href="/assets/js/11.3616a892.js"><link rel="prefetch" href="/assets/js/110.0fbde3f7.js"><link rel="prefetch" href="/assets/js/111.027a49ec.js"><link rel="prefetch" href="/assets/js/112.971dbd5c.js"><link rel="prefetch" href="/assets/js/113.1cadb4c2.js"><link rel="prefetch" href="/assets/js/114.38bf848b.js"><link rel="prefetch" href="/assets/js/115.30c376f0.js"><link rel="prefetch" href="/assets/js/116.3937d882.js"><link rel="prefetch" href="/assets/js/117.e55ee5f2.js"><link rel="prefetch" href="/assets/js/118.458a0b90.js"><link rel="prefetch" href="/assets/js/119.c0def90a.js"><link rel="prefetch" href="/assets/js/12.b43cd623.js"><link rel="prefetch" href="/assets/js/120.8d39a535.js"><link rel="prefetch" href="/assets/js/121.16c8dae5.js"><link rel="prefetch" href="/assets/js/122.637a2edd.js"><link rel="prefetch" href="/assets/js/123.1f01825f.js"><link rel="prefetch" href="/assets/js/124.31dee079.js"><link rel="prefetch" href="/assets/js/125.fa948787.js"><link rel="prefetch" href="/assets/js/126.690a3d94.js"><link rel="prefetch" href="/assets/js/127.1566956e.js"><link rel="prefetch" href="/assets/js/128.8df9bbb6.js"><link rel="prefetch" href="/assets/js/129.1467f48a.js"><link rel="prefetch" href="/assets/js/13.b8ba6830.js"><link rel="prefetch" href="/assets/js/130.688da74c.js"><link rel="prefetch" href="/assets/js/131.19edb8a5.js"><link rel="prefetch" href="/assets/js/132.53b5000a.js"><link rel="prefetch" href="/assets/js/133.763cb3cd.js"><link rel="prefetch" href="/assets/js/134.c01f5483.js"><link rel="prefetch" href="/assets/js/135.ab76f652.js"><link rel="prefetch" href="/assets/js/136.6d713ba0.js"><link rel="prefetch" href="/assets/js/137.d6055675.js"><link rel="prefetch" href="/assets/js/138.2d3dc434.js"><link rel="prefetch" href="/assets/js/139.3b45716c.js"><link rel="prefetch" href="/assets/js/14.fafd1a3d.js"><link rel="prefetch" href="/assets/js/140.b55e1bb2.js"><link rel="prefetch" href="/assets/js/141.d7b992b8.js"><link rel="prefetch" href="/assets/js/142.0fc081a7.js"><link rel="prefetch" href="/assets/js/143.9463d72a.js"><link rel="prefetch" href="/assets/js/144.787621bc.js"><link rel="prefetch" href="/assets/js/145.faf85648.js"><link rel="prefetch" href="/assets/js/146.a7b31c4e.js"><link rel="prefetch" href="/assets/js/147.f52bbc0f.js"><link rel="prefetch" href="/assets/js/148.61da62cb.js"><link rel="prefetch" href="/assets/js/149.e35da13a.js"><link rel="prefetch" href="/assets/js/15.939f65d2.js"><link rel="prefetch" href="/assets/js/151.a48f2d45.js"><link rel="prefetch" href="/assets/js/152.0b18818a.js"><link rel="prefetch" href="/assets/js/153.f4bd03b5.js"><link rel="prefetch" href="/assets/js/154.da52e427.js"><link rel="prefetch" href="/assets/js/155.ab47fbd8.js"><link rel="prefetch" href="/assets/js/156.2e1d8281.js"><link rel="prefetch" href="/assets/js/157.f39e5ee3.js"><link rel="prefetch" href="/assets/js/158.b18b57e0.js"><link rel="prefetch" href="/assets/js/159.69810ced.js"><link rel="prefetch" href="/assets/js/16.976e0a23.js"><link rel="prefetch" href="/assets/js/160.e76c54aa.js"><link rel="prefetch" href="/assets/js/161.03c66a50.js"><link rel="prefetch" href="/assets/js/162.f09a5aa9.js"><link rel="prefetch" href="/assets/js/163.fbf7b472.js"><link rel="prefetch" href="/assets/js/164.f5c1f920.js"><link rel="prefetch" href="/assets/js/165.92476c93.js"><link rel="prefetch" href="/assets/js/166.0d4b200b.js"><link rel="prefetch" href="/assets/js/167.2842ec5f.js"><link rel="prefetch" href="/assets/js/168.322e1048.js"><link rel="prefetch" href="/assets/js/169.ec4a9690.js"><link rel="prefetch" href="/assets/js/17.7db29d69.js"><link rel="prefetch" href="/assets/js/170.da92790a.js"><link rel="prefetch" href="/assets/js/171.220b5b50.js"><link rel="prefetch" href="/assets/js/172.216cae83.js"><link rel="prefetch" href="/assets/js/173.2e08738c.js"><link rel="prefetch" href="/assets/js/174.c958c079.js"><link rel="prefetch" href="/assets/js/175.5a8cd44b.js"><link rel="prefetch" href="/assets/js/176.5c5738fd.js"><link rel="prefetch" href="/assets/js/177.aa5ec99c.js"><link rel="prefetch" href="/assets/js/178.06d40ce5.js"><link rel="prefetch" href="/assets/js/179.fbfab268.js"><link rel="prefetch" href="/assets/js/18.6833b213.js"><link rel="prefetch" href="/assets/js/180.dee04beb.js"><link rel="prefetch" href="/assets/js/181.d004bd91.js"><link rel="prefetch" href="/assets/js/182.68351f3c.js"><link rel="prefetch" href="/assets/js/183.e7f41afd.js"><link rel="prefetch" href="/assets/js/184.d4768598.js"><link rel="prefetch" href="/assets/js/185.5ad07fc7.js"><link rel="prefetch" href="/assets/js/186.95f40738.js"><link rel="prefetch" href="/assets/js/187.19f86e8d.js"><link rel="prefetch" href="/assets/js/188.7fd91864.js"><link rel="prefetch" href="/assets/js/189.25760418.js"><link rel="prefetch" href="/assets/js/19.ea5c77e8.js"><link rel="prefetch" href="/assets/js/190.0967ee61.js"><link rel="prefetch" href="/assets/js/191.9ffd5edb.js"><link rel="prefetch" href="/assets/js/192.8d7ef6bf.js"><link rel="prefetch" href="/assets/js/193.24521816.js"><link rel="prefetch" href="/assets/js/194.d872da5b.js"><link rel="prefetch" href="/assets/js/195.a4f0d47c.js"><link rel="prefetch" href="/assets/js/196.cf3b6194.js"><link rel="prefetch" href="/assets/js/197.e9ad0ceb.js"><link rel="prefetch" href="/assets/js/198.f1abb7d4.js"><link rel="prefetch" href="/assets/js/199.6561e896.js"><link rel="prefetch" href="/assets/js/20.964c3367.js"><link rel="prefetch" href="/assets/js/200.02925058.js"><link rel="prefetch" href="/assets/js/21.45e221ba.js"><link rel="prefetch" href="/assets/js/22.5cb6d5b8.js"><link rel="prefetch" href="/assets/js/23.be1dd041.js"><link rel="prefetch" href="/assets/js/24.09c8da84.js"><link rel="prefetch" href="/assets/js/25.701ca6ef.js"><link rel="prefetch" href="/assets/js/26.26e5a83f.js"><link rel="prefetch" href="/assets/js/27.b2ad0e1c.js"><link rel="prefetch" href="/assets/js/28.bf342a88.js"><link rel="prefetch" href="/assets/js/29.68f379c5.js"><link rel="prefetch" href="/assets/js/30.136a4618.js"><link rel="prefetch" href="/assets/js/31.222c174a.js"><link rel="prefetch" href="/assets/js/32.964dbed2.js"><link rel="prefetch" href="/assets/js/33.584f874d.js"><link rel="prefetch" href="/assets/js/34.4db629ab.js"><link rel="prefetch" href="/assets/js/35.fccd851c.js"><link rel="prefetch" href="/assets/js/36.7a0bbd4c.js"><link rel="prefetch" href="/assets/js/37.977fcc61.js"><link rel="prefetch" href="/assets/js/38.9648a281.js"><link rel="prefetch" href="/assets/js/39.b3fd3278.js"><link rel="prefetch" href="/assets/js/40.3fce48ff.js"><link rel="prefetch" href="/assets/js/41.d1126a27.js"><link rel="prefetch" href="/assets/js/42.1db6cb07.js"><link rel="prefetch" href="/assets/js/43.651d6ed9.js"><link rel="prefetch" href="/assets/js/44.797b7202.js"><link rel="prefetch" href="/assets/js/45.43ff8961.js"><link rel="prefetch" href="/assets/js/46.db7ce530.js"><link rel="prefetch" href="/assets/js/47.ec554750.js"><link rel="prefetch" href="/assets/js/48.6af055b1.js"><link rel="prefetch" href="/assets/js/49.22a4abec.js"><link rel="prefetch" href="/assets/js/5.f9c6355e.js"><link rel="prefetch" href="/assets/js/50.3ca122c2.js"><link rel="prefetch" href="/assets/js/51.7f3f474e.js"><link rel="prefetch" href="/assets/js/52.e7bcb4a2.js"><link rel="prefetch" href="/assets/js/53.0496a871.js"><link rel="prefetch" href="/assets/js/54.db50b048.js"><link rel="prefetch" href="/assets/js/55.b6c5e568.js"><link rel="prefetch" href="/assets/js/56.b1e5bd07.js"><link rel="prefetch" href="/assets/js/57.db204c08.js"><link rel="prefetch" href="/assets/js/58.46bfcefc.js"><link rel="prefetch" href="/assets/js/59.56e976e7.js"><link rel="prefetch" href="/assets/js/6.9db196de.js"><link rel="prefetch" href="/assets/js/60.91456189.js"><link rel="prefetch" href="/assets/js/61.87523179.js"><link rel="prefetch" href="/assets/js/62.f3cfdb27.js"><link rel="prefetch" href="/assets/js/63.c71fc886.js"><link rel="prefetch" href="/assets/js/64.3ad1c16b.js"><link rel="prefetch" href="/assets/js/65.b10bc2e9.js"><link rel="prefetch" href="/assets/js/66.fd0ee3c5.js"><link rel="prefetch" href="/assets/js/67.415d010b.js"><link rel="prefetch" href="/assets/js/68.81b0d127.js"><link rel="prefetch" href="/assets/js/69.319915f6.js"><link rel="prefetch" href="/assets/js/7.19695e84.js"><link rel="prefetch" href="/assets/js/70.50f880e3.js"><link rel="prefetch" href="/assets/js/71.ba5aee1b.js"><link rel="prefetch" href="/assets/js/72.2aa72a71.js"><link rel="prefetch" href="/assets/js/73.ae2d45f2.js"><link rel="prefetch" href="/assets/js/74.4dc45f17.js"><link rel="prefetch" href="/assets/js/75.021fe7d8.js"><link rel="prefetch" href="/assets/js/76.16659e87.js"><link rel="prefetch" href="/assets/js/77.7c54917c.js"><link rel="prefetch" href="/assets/js/78.8ca3b191.js"><link rel="prefetch" href="/assets/js/79.b76860e8.js"><link rel="prefetch" href="/assets/js/8.d452ce64.js"><link rel="prefetch" href="/assets/js/80.218ecc59.js"><link rel="prefetch" href="/assets/js/81.d5890383.js"><link rel="prefetch" href="/assets/js/82.094ec727.js"><link rel="prefetch" href="/assets/js/83.8faaa0e0.js"><link rel="prefetch" href="/assets/js/84.eeadbf88.js"><link rel="prefetch" href="/assets/js/85.ca4960fe.js"><link rel="prefetch" href="/assets/js/86.3152614b.js"><link rel="prefetch" href="/assets/js/87.838e1edc.js"><link rel="prefetch" href="/assets/js/88.465af758.js"><link rel="prefetch" href="/assets/js/89.6273abd1.js"><link rel="prefetch" href="/assets/js/9.29e7568d.js"><link rel="prefetch" href="/assets/js/90.d32e5548.js"><link rel="prefetch" href="/assets/js/91.6fc05572.js"><link rel="prefetch" href="/assets/js/92.61c6646b.js"><link rel="prefetch" href="/assets/js/93.53f0a3cb.js"><link rel="prefetch" href="/assets/js/94.8f37d05a.js"><link rel="prefetch" href="/assets/js/95.bf94c391.js"><link rel="prefetch" href="/assets/js/96.75003c4d.js"><link rel="prefetch" href="/assets/js/97.971caaa4.js"><link rel="prefetch" href="/assets/js/98.bac67237.js"><link rel="prefetch" href="/assets/js/99.0d1d725b.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.381052ad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3c92d36b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icons/apple-touch-icon.png" alt="一苇" class="logo"> <span class="site-name can-hide">一苇</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/skills/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="images/poster03.jpeg"> <div class="blogger-info"><h3></h3> <span>光阴缝隙，时间盛典。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/skills/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack4迁移webpack5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/skills/webpack/v5.html#准备" class="sidebar-link">准备</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/skills/webpack/v5.html#升级" class="sidebar-link">升级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#一键迁移" class="sidebar-link">一键迁移</a></li><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#升级-2" class="sidebar-link">升级</a></li><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#插件报错" class="sidebar-link">插件报错</a></li><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#配置优化" class="sidebar-link">配置优化</a></li><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#资源模块" class="sidebar-link">资源模块</a></li><li class="sidebar-sub-header"><a href="/skills/webpack/v5.html#其他问题" class="sidebar-link">其他问题</a></li></ul></li><li><a href="/skills/webpack/v5.html#区别" class="sidebar-link">区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/skills/webpack/v5.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/categories/?category=skills" title="分类" data-v-0c557b5e>skills</a></li><li data-v-0c557b5e><a href="/categories/?category=webpack" title="分类" data-v-0c557b5e>webpack</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>阿沐</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2021-09-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">webpack4迁移webpack5<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="webpack4迁移webpack5"><a href="#webpack4迁移webpack5" class="header-anchor">#</a> webpack4迁移webpack5</h1> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <ul><li>当前项目<code>webpack</code>版本为 <code>v4.29.6</code>，<code>webpack-cli</code>为 <code>v3.3.0</code></li> <li><code>vue</code>版本仍然还是<code>v2</code>，<code>vue3</code>的<code>webpack</code>配置，不在这篇博文里讨论~</li></ul> <h2 id="升级"><a href="#升级" class="header-anchor">#</a> 升级</h2> <blockquote><p>为减少升级成本，这里有个工具可以一键升级~</p></blockquote> <h3 id="一键迁移"><a href="#一键迁移" class="header-anchor">#</a> 一键迁移</h3> <ol><li>安装工具：<code>cnpm install -g npm-check-updates</code>；</li> <li>项目根目录下执行命令：<code>npm-check-updates</code>，检查更新：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>boss-creator-web git:<span class="token punctuation">(</span>feature/editor<span class="token punctuation">)</span> ✗ npm-check-updates
Checking /Users/admin/work/boss-creator-web/package.json
<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token punctuation">]</span> <span class="token number">74</span>/74 <span class="token number">100</span>%
 
@babel/core ^7.4.0 → ^7.15.8
@babel/preset-env ^7.4.2 → ^7.15.8
@vue/babel-preset-app ^3.6.0 → ^4.5.14
@vue/test-utils ^1.0.0-beta.29 → ^1.2.2
<span class="token punctuation">..</span>.
webpack ^4.29.6 → ^5.59.1
webpack-bundle-analyzer ^3.7.0 → ^4.5.0
webpack-cli ^3.3.0 → ^4.9.1
webpack-dashboard ^3.3.3 → ^3.3.6
webpack-dev-server ^3.2.1 → ^4.3.1
webpack-merge ^4.2.1 → ^5.8.0
<span class="token punctuation">..</span>.
</code></pre></div><ol start="3"><li>检查完成后会输出 <code>packge.json</code> 中插件当前版本和最新版本的对比，接下来输入 <code>ncu -u</code>，会看到 <code>package.json</code>中版本号已经更新为最新版了；</li> <li>最后删除 <code>node_modules</code> ，执行 <code>npm install</code>，安装~</li></ol> <h3 id="升级-2"><a href="#升级-2" class="header-anchor">#</a> 升级</h3> <p>安装完成后，先试下 <code>npm run build</code> ，不出意外，应该是会报错的~</p> <p>接下来挨个解决各个报错~</p> <h4 id="插件报错"><a href="#插件报错" class="header-anchor">#</a> 插件报错</h4> <ul><li><strong><code>HashedModuleIdsPlugin</code> 插件报错,报错信息如下：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>TypeError: webpack.HashedModuleIdsPlugin is not a constructor
</code></pre></div><p><code>HashedModuleIdsPlugin</code> 是 <code>webpack v4</code> 提供的插件，会根据模块的相对路径生成一个四位数的<code>hash</code>作为模块<code>id</code>，<code>v4</code>中用法是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.base.js</span>
 
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 选项……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>v5 中用法为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ids<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>解决方法：</strong> 将配置文件中 v4 用法改为 v5 用法即可~</p> <blockquote><p>参考：<a href="https://v4.webpack.docschina.org/plugins/hashed-module-ids-plugin/" target="_blank" rel="noopener noreferrer">hashed-module-ids-plugin v4用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://webpack.docschina.org/plugins/hashed-module-ids-plugin/" target="_blank" rel="noopener noreferrer">hashed-module-ids-plugin v5用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong><code>CleanWebpackPlugin</code> 插件报错,报错信息为：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>TypeError: CleanWebpackPlugin is not a constructor
</code></pre></div><p>这个也是插件升级引入方式的的改变造成的报错，该插件由 <code>v2.0.1</code> 升级为了 <code>v4.0.0</code> ，修改引入方式即可：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.prod.js</span>
 
<span class="token comment">// const CleanWebpackPlugin = require('clean-webpack-plugin'); // 旧用法</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新用法</span>
</code></pre></div><ul><li><strong><code>webpack-merge</code> 插件报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Failed to load <span class="token string">'/Users/admin/work/boss-youle-web/build/webpack.config.prod.js'</span> config
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> TypeError: merge is not a <span class="token keyword">function</span>
</code></pre></div><p><code>webpack-merge</code> 由 <code>v4.2.1</code> 升级到 <code>v.5.8.0</code>，引入方式也改变了，修改即可：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// const merge = require('webpack-merge'); // 旧用法</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>merge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新用法</span>
</code></pre></div><ul><li><strong>optimize-css-assets-webpack-plugin 插件警告：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">(</span>node:3251<span class="token punctuation">)</span> <span class="token punctuation">[</span>DEP_WEBPACK_COMPILATION_OPTIMIZE_CHUNK_ASSETS<span class="token punctuation">]</span> DeprecationWarning: optimizeChunkAssets is deprecated <span class="token punctuation">(</span>use Compilation.hooks.processAssets instead and use one of Compilation.PROCESS_ASSETS_STAGE_* as stage option<span class="token punctuation">)</span>
</code></pre></div><p><code>optimize-css-assets-webpack-plugin</code> 在 <code>webpack4</code> 主要是用来压缩<code>css</code>的插件，<code>webpack5</code> 中则 可以通过 <code>css-minimizer-webpack-plugin</code> 来替换：</p> <ol><li>安装：<code>npm install css-minimizer-webpack-plugin --save-dev</code></li> <li>配置：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;css-minimizer-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引入</span>
 
<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开发环境下启用 CSS 优化</span>
        <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>最后删掉 <code>optimize-css-assets-webpack-plugin</code> 的使用即可~</li></ol> <blockquote><p><a href="https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong>mini-css-extract-plugin 警告：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>WARNING <span class="token keyword">in</span> chunk commons <span class="token punctuation">[</span>mini-css-extract-plugin<span class="token punctuation">]</span>
Conflicting order. Following module has been added:
</code></pre></div><p>可以通过将插件的 <code>ignoreOrder</code> 选项设置为 <code>true</code> 来禁用 <code>css order</code> 警告：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.prod.js</span>
 
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">ignoreOrder</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>具体设置可<a href="https://webpack.docschina.org/configuration/optimization/#optimizationnodeenv" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="配置优化"><a href="#配置优化" class="header-anchor">#</a> 配置优化</h4> <ul><li><strong>optimization.splitChunks 报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.
 - configuration.optimization.splitChunks should be one of these:
   <span class="token boolean">false</span> <span class="token operator">|</span> object <span class="token punctuation">{</span> automaticNameDelimiter?, cacheGroups?, chunks?, defaultSizeTypes?, enforceSizeThreshold?, fallbackCacheGroup?, filename?, hidePathInfo?, maxAsyncRequests?, maxAsyncSize?, maxInitialRequests?, maxInitialSize?, maxSize?, minChunks?, minRemainingSize?, minSize?, name?, usedExports? <span class="token punctuation">}</span>
   -<span class="token operator">&gt;</span> Optimize duplication and caching by splitting chunks by shared modules and cache group.
configuration.optimization.splitChunks.name should be one of these:
      <span class="token boolean">false</span> <span class="token operator">|</span> string <span class="token operator">|</span> <span class="token keyword">function</span>
</code></pre></div><p><code>optimization.splitChunks.name</code> 设置拆分<code>chunk</code>的名称，<code>webpack4</code> 中设置为 <code>true</code> 将自动生成基于块和缓存组键的名称；</p> <p>但 <code>v5</code> 中不能传 <code>true</code>，只能传 <code>false | string | function</code>；设为 <code>false</code> 将保持 <code>chunk</code> 的相同名称，因此不会不必要地更改名称。这是生产环境下构建的建议值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.prod.js</span>
 
<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token comment">//      name: true  // v4写法</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 新写法，设置为false，或者注释掉也可以</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><a href="https://webpack.docschina.org/plugins/split-chunks-plugin/#splitchunksname" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong>DefinePlugin 警告：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>WARNING <span class="token keyword">in</span> DefinePlugin
Conflicting values <span class="token keyword">for</span> <span class="token string">'process.env.NODE_ENV'</span>
</code></pre></div><p><code>webpack5</code> 中 <code>process.env.NODE_ENV</code> 默认值取决于 <code>mode</code>，也可在 <code>optimization.nodeEnv</code> 中设置；取消 <code>DefinePlugin</code> 中的配置即可解除警告：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.base.js</span>
 
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// NODE_ENV: JSON.stringify(`${process.env.NODE_ENV}`), // webpack5中 process.env.NODE_ENV 默认值取决于 mode</span>
                <span class="token constant">PUBLIC_PATH</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>argv<span class="token punctuation">.</span>publicPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token constant">PATH_PREFIX</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>argv<span class="token punctuation">.</span>pathPrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token constant">RUN_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">RUN_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><blockquote><p>具体设置可参考<a href="https://webpack.docschina.org/configuration/optimization/#optimizationnodeenv" target="_blank" rel="noopener noreferrer">optimization.nodeEnv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>2021-11-20更新：不用注释，在脚本中添加<code>NODE_ENV</code>全局变量即可解除警告：</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development RUN_ENV=dev webpack serve --progress --config build/webpack.config.dev.js&quot;</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>hash 警告：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">(</span>node:99549<span class="token punctuation">)</span> <span class="token punctuation">[</span>DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_HASH<span class="token punctuation">]</span> DeprecationWarning: <span class="token punctuation">[</span>hash<span class="token punctuation">]</span> is now <span class="token punctuation">[</span>fullhash<span class="token punctuation">]</span> <span class="token punctuation">(</span>also consider using <span class="token punctuation">[</span>chunkhash<span class="token punctuation">]</span> or <span class="token punctuation">[</span>contenthash<span class="token punctuation">]</span>, see documentation <span class="token keyword">for</span> details<span class="token punctuation">)</span>
</code></pre></div><p>这个警告提示我们要把项目中之前在 <code>webpack4</code> 中使用 <code>hash</code> 配置的改成 <code>chunkhash</code> 或者 <code>contenthash</code> ， <code>webpack</code> 的官方迁移指南里有说明：</p> <img src="/images/webpack/webpack-v5.jpeg" width="auto" class="zoom-custom-imgs"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.prod.js</span>
 
<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">getPublicPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span> <span class="token comment">// hash更改为 chunkhash or contenthash</span>
        <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunkhash:8]_chunk.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">umdNamedDefine</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>devtool 报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.
 - configuration.devtool should match pattern <span class="token string">&quot;^(inline-|hidden-|eval-)?(nosources-)?(cheap-(module-)?)?source-map$&quot;</span><span class="token builtin class-name">.</span>
</code></pre></div><p>这是因为 <code>devtool</code> 在 <code>webpack4</code> 和 <code>webpack5</code> 上也是有区别的，修改如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.dev.js</span>
 
<span class="token comment">// devtool: 'cheap-module-eval-source-map', // webpack4写法</span>
<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'eval-source-map'</span><span class="token punctuation">,</span>  <span class="token comment">// webpack5写法</span>
</code></pre></div><blockquote><p>具体配置可<a href="https://webpack.docschina.org/configuration/devtool/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong>hard-source-webpack-plugin 报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>TypeError: Cannot <span class="token builtin class-name">read</span> property <span class="token string">'tap'</span> of undefined
    at Object.exports.tap <span class="token punctuation">(</span>/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:118:25<span class="token punctuation">)</span>
    at new CacheSerializerFactory <span class="token punctuation">(</span>/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/lib/CacheSerializerFactory.js:94:18<span class="token punctuation">)</span>
    at HardSourceWebpackPlugin.apply <span class="token punctuation">(</span>/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/index.js:219:36<span class="token punctuation">)</span>
</code></pre></div><p>在 <code>webpack4</code> 的开发环境中，我们使用 <code>hard-source-webpack-plugin</code> 来实现启动缓存，从而实现启动提速；但在 <code>webpack5</code> 中内置了 <code>cache</code> 缓存机制，直接配置即可，<code>hard-source-webpack-plugin</code> 就直接被废弃掉了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.dev.js</span>
 
<span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span>     
        <span class="token comment">// 将缓存类型设置为文件系统     </span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;filesystem&quot;</span><span class="token punctuation">,</span>      
        <span class="token literal-property property">buildDependencies</span><span class="token operator">:</span> <span class="token punctuation">{</span>       
            <span class="token comment">/* 将你的 config 添加为 buildDependency，          
               以便在改变 config 时获得缓存无效*/</span>       
            <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">[</span>__filename<span class="token punctuation">]</span><span class="token punctuation">,</span>       
            <span class="token comment">/* 如果有其他的东西被构建依赖，          
               你可以在这里添加它们*/</span>       
            <span class="token comment">/* 注意，webpack.config，          
               加载器和所有从你的配置中引用的模块都会被自动添加*/</span>     
        <span class="token punctuation">}</span><span class="token punctuation">,</span>     
        <span class="token comment">// 指定缓存的版本     </span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'1.0'</span>    
    <span class="token punctuation">}</span>
</code></pre></div><blockquote><p>cache 具体配置可<a href="https://webpack.docschina.org/configuration/cache/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong>devServer 报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>Invalid options object. Dev Server has been initialized using an options object that does not match the API schema.
 - options has an unknown property <span class="token string">'quiet'</span><span class="token builtin class-name">.</span> These properties are valid:
   object <span class="token punctuation">{</span> allowedHosts?, bonjour?, client?, compress?, devMiddleware?, headers?, historyApiFallback?, host?, hot?, http2?, https?, ipc?, liveReload?, magicHtml?, onAfterSetupMiddleware?, onBeforeSetupMiddleware?, onListening?, open?, port?, proxy?, setupExitSignals?, static?, watchFiles?, webSocketServer? <span class="token punctuation">}</span>
</code></pre></div><p>这是因为 <code>devServer</code> 在 <code>webpack5</code> 中的配置相较 <code>v4</code> 有些变化，修改如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.dev.js</span>
 
<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// contentBase: path.join(__dirname, 'dist'), // webpack4 写法</span>
        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8098</span><span class="token punctuation">,</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// webpack5新增 static 字段，里面的 directory 替换原来 contentBase 的配置；publicPath 也放在了里面</span>
        <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// publicPath: '/', // webpack4写法</span>
        <span class="token comment">// quiet: true, // webpack5取消了这个参数</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>具体配置参数可参考: <a href="https://v4.webpack.docschina.org/configuration/dev-server" target="_blank" rel="noopener noreferrer">v4配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://webpack.docschina.org/configuration/dev-server" target="_blank" rel="noopener noreferrer">v5配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>还有一个地方需要注意的是, <code>webpack-cli4</code>之后执行脚本上有了变化：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env RUN_ENV=dev webpack-dev-server --progress --config build/webpack.config.dev.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 旧写法</span>
	<span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env RUN_ENV=dev webpack serve --progress --config build/webpack.config.dev.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 新写法</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="资源模块"><a href="#资源模块" class="header-anchor">#</a> 资源模块</h4> <blockquote><p>在 <code>webpack5</code> 之前，加载图片、字体等资源需要我们使用 <code>url-loader、 file-loader</code> 等来处理; 从 <code>webpack5</code> 开始，我们可以使用内置的资源模块来替代这些 <code>loader</code> 的工作。</p></blockquote> <p>资源模块(<code>asset module</code>)是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 <code>loader</code>。<a href="https://webpack.docschina.org/guides/asset-modules/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>以图片静态资源解析为例：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.base.js</span>

<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|bmp|webp|svg)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 解析图片等静态资源</span>
    <span class="token literal-property property">dependency</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">not</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 排除来自新 URL 处理的 asset</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src/assets/svg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 排除</span>
    <span class="token comment">// use: {</span>
    <span class="token comment">//     loader: 'url-loader',</span>
    <span class="token comment">//     options: {</span>
    <span class="token comment">//         limit: 1024, // 字节数,意味着当图片大小小于1k的话，打包时会进行base64转换</span>
    <span class="token comment">//         name: utils.assetsPath('images/[name].[hash:7].[ext]')</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// },</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里的 [ext] 扩展名通配符包含了 . ，我们不需要额外再写，跟之前的 loader 有所区别</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">assetsPath</span><span class="token punctuation">(</span><span class="token string">'images/[name]_[hash:7][ext][query]'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="其他问题"><a href="#其他问题" class="header-anchor">#</a> 其他问题</h4> <ul><li><strong>eslint-loader 报错：</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>ERROR <span class="token keyword">in</span> ./src/main.js
Module build failed <span class="token punctuation">(</span>from ./node_modules/eslint-loader/index.js<span class="token punctuation">)</span>:
Error: Cannot <span class="token function">find</span> module <span class="token string">'@eslint/eslintrc/universal'</span>
</code></pre></div><p>升级后的版本不稳定，降至之前的稳定版本即可：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// eslint相关插件退至升级前版本</span>
 
    <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.16.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-config-standard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^12.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-friendly-formatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.0.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.16.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-promise&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-standard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.2&quot;</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><strong>babel-eslint 报错</strong></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>ERROR <span class="token keyword">in</span> ./src/plugins/global/video-player/index.vue
Module build failed <span class="token punctuation">(</span>from ./node_modules/_eslint-loader@2.2.1@eslint-loader/index.js<span class="token punctuation">)</span>:
TypeError: token.type.endsWith is not a <span class="token keyword">function</span>
</code></pre></div><p>原因同上，把 <code>babel-eslint</code> 退至 <code>v8.2.6</code> 稳定版即可~</p> <p>以上就是我在升级过程中遇到的问题，都解决后，执行 <code>npm run dev</code>，成功启动；<code>npm run build</code>，成功打包~</p> <h2 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h2> <ul><li><code>devServer</code>的参数配置有变化</li> <li>图片等静态资源的解析有变化，Webpack5 提供了内置的静态资源构建能力，我们不需要安装额外的 <code>loader（url-loader，file-loader，raw-loader）</code></li> <li>webpack5 中内置了 <code>Cache</code> 来实现启动缓存，实现了二次构建的提速, v4 需要引入插件<code>hard-source-webpack-plugin</code></li> <li>js压缩：<code>webpack v5</code> 开箱即带有最新版本的 <code>terser-webpack-plugin</code>。如果希望自定义配置，那么仍需要安装 <code>terser-webpack-plugin</code>。v4 则必须安装 <code>terser-webpack-plugin v4</code> 的版本</li> <li>启动服务差别：v4 通过 <code>webpack-dev-server</code> 启动服务，v5 内置使用 <code>webpack serve</code> 启动</li> <li><code>tree-shaking</code>的优化：<code>v5</code> 能够处理对嵌套模块的 <code>tree shaking</code>，也能处理对 <code>Commonjs</code> 的 <code>tree shaking</code></li></ul> <p><a href="https://github.com/webpack/changelog-v5" target="_blank" rel="noopener noreferrer">https://github.com/webpack/changelog-v5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://webpack.docschina.org/migrate/5/" target="_blank" rel="noopener noreferrer">webpack官方：从 v4 升级到 v5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6924258563862822919" target="_blank" rel="noopener noreferrer">Webpack5 新特性业务落地实战<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6973607639502553095" target="_blank" rel="noopener noreferrer">10分钟带你升级webpack5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6991774994552324133" target="_blank" rel="noopener noreferrer">学习 Webpack5 之路（实践篇）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6996816316875161637" target="_blank" rel="noopener noreferrer">学习 Webpack5 之路（优化篇）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=webpack" title="标签">#webpack</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/24/2022, 5:38:42 PM</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/more/github-actions.html"><div>
            Github Actions自动部署
            <!----></div></a> <span class="date">09-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/project/mono-react-project.html"><div>
            MonoRepo——React项目实践
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/more/jenkins-deploy.html"><div>
            Jenkins前端自动化部署
            <!----></div></a> <span class="date">08-10</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>一苇 | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal"><img src="/blog/images/icp.png" width="20" height="20" alt="公网备案"/>京ICP备2021006935号-2</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><!----><div></div></div></div>
    <script src="/assets/js/app.d9800c43.js" defer></script><script src="/assets/js/3.a2a245ac.js" defer></script><script src="/assets/js/150.dfc8c76e.js" defer></script><script src="/assets/js/4.245b4373.js" defer></script>
  </body>
</html>

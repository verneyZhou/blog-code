<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue+webpack从0到1搭建项目 | 一苇</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/icons/favicon.ico">
    <link rel="manifest" href="/blog/js/mainfest.json">
    <link rel="stylesheet" href="/blog/styles/css/style.css">
    <script type="utf-8" src="/blog/js/disable-user-zoom.js"></script>
    <meta name="description" content="这是阿沐的博客哦~">
    <meta name="Author" content="一苇">
    <meta rel="keywords" content="verneyzhou,阿沐,一苇,前端,docs.verneyzhou-code.cn,博客,fe,IT,技术">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.61668f40.css" as="style"><link rel="preload" href="/blog/assets/js/app.07c9fec8.js" as="script"><link rel="preload" href="/blog/assets/js/3.a2a245ac.js" as="script"><link rel="preload" href="/blog/assets/js/153.93a9317a.js" as="script"><link rel="preload" href="/blog/assets/js/4.245b4373.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.a9e52aed.js"><link rel="prefetch" href="/blog/assets/js/100.ad35b061.js"><link rel="prefetch" href="/blog/assets/js/101.ac9e5029.js"><link rel="prefetch" href="/blog/assets/js/102.16a9a8e0.js"><link rel="prefetch" href="/blog/assets/js/103.caa157f6.js"><link rel="prefetch" href="/blog/assets/js/104.3e18ca8e.js"><link rel="prefetch" href="/blog/assets/js/105.a5dd02c7.js"><link rel="prefetch" href="/blog/assets/js/106.4b828c0e.js"><link rel="prefetch" href="/blog/assets/js/107.b336030e.js"><link rel="prefetch" href="/blog/assets/js/108.be061940.js"><link rel="prefetch" href="/blog/assets/js/109.aee5ed5f.js"><link rel="prefetch" href="/blog/assets/js/11.c503bf7b.js"><link rel="prefetch" href="/blog/assets/js/110.0ec777cb.js"><link rel="prefetch" href="/blog/assets/js/111.deced91b.js"><link rel="prefetch" href="/blog/assets/js/112.fdabdec2.js"><link rel="prefetch" href="/blog/assets/js/113.cdfd38f4.js"><link rel="prefetch" href="/blog/assets/js/114.6ec0e736.js"><link rel="prefetch" href="/blog/assets/js/115.0893ab84.js"><link rel="prefetch" href="/blog/assets/js/116.404ee8fe.js"><link rel="prefetch" href="/blog/assets/js/117.5de970f4.js"><link rel="prefetch" href="/blog/assets/js/118.328e12ba.js"><link rel="prefetch" href="/blog/assets/js/119.6b414771.js"><link rel="prefetch" href="/blog/assets/js/12.06f5d794.js"><link rel="prefetch" href="/blog/assets/js/120.db669f9a.js"><link rel="prefetch" href="/blog/assets/js/121.e2682bfc.js"><link rel="prefetch" href="/blog/assets/js/122.65d64dbd.js"><link rel="prefetch" href="/blog/assets/js/123.c207d603.js"><link rel="prefetch" href="/blog/assets/js/124.d15fa68e.js"><link rel="prefetch" href="/blog/assets/js/125.4dec074a.js"><link rel="prefetch" href="/blog/assets/js/126.690a3d94.js"><link rel="prefetch" href="/blog/assets/js/127.1566956e.js"><link rel="prefetch" href="/blog/assets/js/128.9085def5.js"><link rel="prefetch" href="/blog/assets/js/129.1467f48a.js"><link rel="prefetch" href="/blog/assets/js/13.b8ba6830.js"><link rel="prefetch" href="/blog/assets/js/130.9a8b6b82.js"><link rel="prefetch" href="/blog/assets/js/131.c78c2c45.js"><link rel="prefetch" href="/blog/assets/js/132.0dd6e0ce.js"><link rel="prefetch" href="/blog/assets/js/133.763cb3cd.js"><link rel="prefetch" href="/blog/assets/js/134.c01f5483.js"><link rel="prefetch" href="/blog/assets/js/135.1a2f1d85.js"><link rel="prefetch" href="/blog/assets/js/136.2a5f1b57.js"><link rel="prefetch" href="/blog/assets/js/137.d6055675.js"><link rel="prefetch" href="/blog/assets/js/138.7e622d6d.js"><link rel="prefetch" href="/blog/assets/js/139.1f935558.js"><link rel="prefetch" href="/blog/assets/js/14.af682e8e.js"><link rel="prefetch" href="/blog/assets/js/140.051a5152.js"><link rel="prefetch" href="/blog/assets/js/141.e3329fdf.js"><link rel="prefetch" href="/blog/assets/js/142.5512076f.js"><link rel="prefetch" href="/blog/assets/js/143.1ec337c6.js"><link rel="prefetch" href="/blog/assets/js/144.f2251ef4.js"><link rel="prefetch" href="/blog/assets/js/145.3437fb76.js"><link rel="prefetch" href="/blog/assets/js/146.a7b31c4e.js"><link rel="prefetch" href="/blog/assets/js/147.3cc8e885.js"><link rel="prefetch" href="/blog/assets/js/148.b1507e1c.js"><link rel="prefetch" href="/blog/assets/js/149.e35da13a.js"><link rel="prefetch" href="/blog/assets/js/15.e0f3979f.js"><link rel="prefetch" href="/blog/assets/js/150.dfc8c76e.js"><link rel="prefetch" href="/blog/assets/js/151.ae2fd7df.js"><link rel="prefetch" href="/blog/assets/js/152.a7376201.js"><link rel="prefetch" href="/blog/assets/js/154.175cf9a5.js"><link rel="prefetch" href="/blog/assets/js/155.7c9785ed.js"><link rel="prefetch" href="/blog/assets/js/156.0282bdc8.js"><link rel="prefetch" href="/blog/assets/js/157.25f81c7a.js"><link rel="prefetch" href="/blog/assets/js/158.eccb37d9.js"><link rel="prefetch" href="/blog/assets/js/159.4c355ed2.js"><link rel="prefetch" href="/blog/assets/js/16.3ee40a8a.js"><link rel="prefetch" href="/blog/assets/js/160.94e077fb.js"><link rel="prefetch" href="/blog/assets/js/161.eb5ffc76.js"><link rel="prefetch" href="/blog/assets/js/162.23d751c6.js"><link rel="prefetch" href="/blog/assets/js/163.c80f21ab.js"><link rel="prefetch" href="/blog/assets/js/164.b16f2865.js"><link rel="prefetch" href="/blog/assets/js/165.f53b159e.js"><link rel="prefetch" href="/blog/assets/js/166.10750116.js"><link rel="prefetch" href="/blog/assets/js/167.90a6c559.js"><link rel="prefetch" href="/blog/assets/js/168.322e1048.js"><link rel="prefetch" href="/blog/assets/js/169.b1e52fae.js"><link rel="prefetch" href="/blog/assets/js/17.81f8937d.js"><link rel="prefetch" href="/blog/assets/js/170.da92790a.js"><link rel="prefetch" href="/blog/assets/js/171.220b5b50.js"><link rel="prefetch" href="/blog/assets/js/172.1493cc65.js"><link rel="prefetch" href="/blog/assets/js/173.bc9bf937.js"><link rel="prefetch" href="/blog/assets/js/174.1ad2d9fd.js"><link rel="prefetch" href="/blog/assets/js/175.07328d2d.js"><link rel="prefetch" href="/blog/assets/js/176.539278f3.js"><link rel="prefetch" href="/blog/assets/js/177.bdaef503.js"><link rel="prefetch" href="/blog/assets/js/178.06d40ce5.js"><link rel="prefetch" href="/blog/assets/js/179.a8d2460d.js"><link rel="prefetch" href="/blog/assets/js/18.58a7b3ca.js"><link rel="prefetch" href="/blog/assets/js/180.acb7e178.js"><link rel="prefetch" href="/blog/assets/js/181.04230a04.js"><link rel="prefetch" href="/blog/assets/js/182.2bae84da.js"><link rel="prefetch" href="/blog/assets/js/183.1aefb498.js"><link rel="prefetch" href="/blog/assets/js/184.aae32a59.js"><link rel="prefetch" href="/blog/assets/js/185.5194e169.js"><link rel="prefetch" href="/blog/assets/js/186.3f8a60e6.js"><link rel="prefetch" href="/blog/assets/js/187.19f86e8d.js"><link rel="prefetch" href="/blog/assets/js/188.75afe9d8.js"><link rel="prefetch" href="/blog/assets/js/189.bbf10e7f.js"><link rel="prefetch" href="/blog/assets/js/19.4facbfcd.js"><link rel="prefetch" href="/blog/assets/js/190.f0753b6c.js"><link rel="prefetch" href="/blog/assets/js/191.4fe8aa98.js"><link rel="prefetch" href="/blog/assets/js/192.8d7ef6bf.js"><link rel="prefetch" href="/blog/assets/js/193.465cd98e.js"><link rel="prefetch" href="/blog/assets/js/194.11092fca.js"><link rel="prefetch" href="/blog/assets/js/195.a4f0d47c.js"><link rel="prefetch" href="/blog/assets/js/196.dabf1015.js"><link rel="prefetch" href="/blog/assets/js/197.e9ad0ceb.js"><link rel="prefetch" href="/blog/assets/js/198.f1abb7d4.js"><link rel="prefetch" href="/blog/assets/js/199.6561e896.js"><link rel="prefetch" href="/blog/assets/js/20.c69c50ee.js"><link rel="prefetch" href="/blog/assets/js/200.02925058.js"><link rel="prefetch" href="/blog/assets/js/21.d36db816.js"><link rel="prefetch" href="/blog/assets/js/22.aa826409.js"><link rel="prefetch" href="/blog/assets/js/23.fdb82899.js"><link rel="prefetch" href="/blog/assets/js/24.9c7a84ee.js"><link rel="prefetch" href="/blog/assets/js/25.aef2c75d.js"><link rel="prefetch" href="/blog/assets/js/26.3e3cbaca.js"><link rel="prefetch" href="/blog/assets/js/27.09b82b4f.js"><link rel="prefetch" href="/blog/assets/js/28.47f73845.js"><link rel="prefetch" href="/blog/assets/js/29.7eda190b.js"><link rel="prefetch" href="/blog/assets/js/30.136a4618.js"><link rel="prefetch" href="/blog/assets/js/31.c1600861.js"><link rel="prefetch" href="/blog/assets/js/32.964dbed2.js"><link rel="prefetch" href="/blog/assets/js/33.54b1d113.js"><link rel="prefetch" href="/blog/assets/js/34.4db629ab.js"><link rel="prefetch" href="/blog/assets/js/35.fccd851c.js"><link rel="prefetch" href="/blog/assets/js/36.4b61e107.js"><link rel="prefetch" href="/blog/assets/js/37.57ec2f3b.js"><link rel="prefetch" href="/blog/assets/js/38.29752a9f.js"><link rel="prefetch" href="/blog/assets/js/39.75cc18af.js"><link rel="prefetch" href="/blog/assets/js/40.28c2824c.js"><link rel="prefetch" href="/blog/assets/js/41.9564a4e6.js"><link rel="prefetch" href="/blog/assets/js/42.91f6d891.js"><link rel="prefetch" href="/blog/assets/js/43.b716e9bd.js"><link rel="prefetch" href="/blog/assets/js/44.a3c65dbb.js"><link rel="prefetch" href="/blog/assets/js/45.62602816.js"><link rel="prefetch" href="/blog/assets/js/46.db7ce530.js"><link rel="prefetch" href="/blog/assets/js/47.39b634bf.js"><link rel="prefetch" href="/blog/assets/js/48.3e02495b.js"><link rel="prefetch" href="/blog/assets/js/49.b343e1d0.js"><link rel="prefetch" href="/blog/assets/js/5.f9c6355e.js"><link rel="prefetch" href="/blog/assets/js/50.02654870.js"><link rel="prefetch" href="/blog/assets/js/51.508610ea.js"><link rel="prefetch" href="/blog/assets/js/52.8587e4b0.js"><link rel="prefetch" href="/blog/assets/js/53.772c2349.js"><link rel="prefetch" href="/blog/assets/js/54.dceb3c84.js"><link rel="prefetch" href="/blog/assets/js/55.b6c5e568.js"><link rel="prefetch" href="/blog/assets/js/56.f3649d8f.js"><link rel="prefetch" href="/blog/assets/js/57.db204c08.js"><link rel="prefetch" href="/blog/assets/js/58.05567cee.js"><link rel="prefetch" href="/blog/assets/js/59.208c9eb8.js"><link rel="prefetch" href="/blog/assets/js/6.9db196de.js"><link rel="prefetch" href="/blog/assets/js/60.31a8d24d.js"><link rel="prefetch" href="/blog/assets/js/61.86d9151c.js"><link rel="prefetch" href="/blog/assets/js/62.22c9a5bf.js"><link rel="prefetch" href="/blog/assets/js/63.56d96fe2.js"><link rel="prefetch" href="/blog/assets/js/64.24cc5ce1.js"><link rel="prefetch" href="/blog/assets/js/65.78f53722.js"><link rel="prefetch" href="/blog/assets/js/66.fd0ee3c5.js"><link rel="prefetch" href="/blog/assets/js/67.b962d643.js"><link rel="prefetch" href="/blog/assets/js/68.5faa2f5c.js"><link rel="prefetch" href="/blog/assets/js/69.91e84aee.js"><link rel="prefetch" href="/blog/assets/js/7.bbc1a47a.js"><link rel="prefetch" href="/blog/assets/js/70.594379e0.js"><link rel="prefetch" href="/blog/assets/js/71.de1aa836.js"><link rel="prefetch" href="/blog/assets/js/72.2aa72a71.js"><link rel="prefetch" href="/blog/assets/js/73.6ebb152b.js"><link rel="prefetch" href="/blog/assets/js/74.1e5ced20.js"><link rel="prefetch" href="/blog/assets/js/75.42650e07.js"><link rel="prefetch" href="/blog/assets/js/76.3b79fc70.js"><link rel="prefetch" href="/blog/assets/js/77.c30ea800.js"><link rel="prefetch" href="/blog/assets/js/78.c1ff86f4.js"><link rel="prefetch" href="/blog/assets/js/79.21e4acaa.js"><link rel="prefetch" href="/blog/assets/js/8.7ca5bcb9.js"><link rel="prefetch" href="/blog/assets/js/80.5bee662d.js"><link rel="prefetch" href="/blog/assets/js/81.cdd99cd8.js"><link rel="prefetch" href="/blog/assets/js/82.94998af0.js"><link rel="prefetch" href="/blog/assets/js/83.f855f660.js"><link rel="prefetch" href="/blog/assets/js/84.31640995.js"><link rel="prefetch" href="/blog/assets/js/85.ca4960fe.js"><link rel="prefetch" href="/blog/assets/js/86.d630b6a3.js"><link rel="prefetch" href="/blog/assets/js/87.838e1edc.js"><link rel="prefetch" href="/blog/assets/js/88.7071fdf7.js"><link rel="prefetch" href="/blog/assets/js/89.2627c1c2.js"><link rel="prefetch" href="/blog/assets/js/9.ec25f2ab.js"><link rel="prefetch" href="/blog/assets/js/90.ad5271ed.js"><link rel="prefetch" href="/blog/assets/js/91.48371907.js"><link rel="prefetch" href="/blog/assets/js/92.151045b8.js"><link rel="prefetch" href="/blog/assets/js/93.6fbcc77a.js"><link rel="prefetch" href="/blog/assets/js/94.fec3895c.js"><link rel="prefetch" href="/blog/assets/js/95.729004de.js"><link rel="prefetch" href="/blog/assets/js/96.20d668b4.js"><link rel="prefetch" href="/blog/assets/js/97.017f8b9c.js"><link rel="prefetch" href="/blog/assets/js/98.5a463e71.js"><link rel="prefetch" href="/blog/assets/js/99.1c2ec226.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.381052ad.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.61668f40.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/icons/apple-touch-icon.png" alt="一苇" class="logo"> <span class="site-name can-hide">一苇</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="images/poster03.jpeg"> <div class="blogger-info"><h3></h3> <span>光阴缝隙，时间盛典。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/archives/" class="nav-link">时间轴</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frontend/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/css/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><!----> <span class="title" style="display:;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/skills/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/skills/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/blog/code/" class="nav-link">源码</a></li><li class="dropdown-item"><!----> <a href="/blog/more/web3/" class="nav-link">Web3</a></li><li class="dropdown-item"><!----> <a href="/blog/more/" class="nav-link">更多</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><!----> <span class="title" style="display:;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PC端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/vue-node-admin/" class="nav-link">vue-node-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-vite-admin.html" class="nav-link">vue3-vite-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-cli-admin.html" class="nav-link">vue3-cli-admin</a></li><li class="dropdown-subitem"><a href="/blog/skills/vue/vue3-webpack5-admin.html" class="nav-link">vue3-webpack5-admin</a></li><li class="dropdown-subitem"><a href="/blog/project/mono-react-project.html" class="nav-link">teach-react-mono</a></li></ul></li><li class="dropdown-item"><h4>移动端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/project/mobile-h5/" class="nav-link">微信h5</a></li><li class="dropdown-subitem"><a href="/blog/project/mini-program/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/blog/project/mobile/" class="nav-link">移动端开发笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/verneyZhou" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><!----> <span class="title" style="display:;">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">ME</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>vue+webpack从0到1搭建项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/webpack/vue-use.html#准备" class="sidebar-link">准备</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/webpack/vue-use.html#开始" class="sidebar-link">开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#安装node和npm-nvm" class="sidebar-link">安装node和npm,nvm</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#新建项目" class="sidebar-link">新建项目</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#webpack打包初体验" class="sidebar-link">webpack打包初体验</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#安装vue" class="sidebar-link">安装vue</a></li></ul></li><li><a href="/blog/skills/webpack/vue-use.html#配置" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#基础配置" class="sidebar-link">基础配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#热更新配置" class="sidebar-link">热更新配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#配置defineplugin" class="sidebar-link">配置DefinePlugin</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#设置devtool" class="sidebar-link">设置devtool</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#babel配置" class="sidebar-link">babel配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#eslint配置" class="sidebar-link">eslint配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#模板解析-resolve-配置" class="sidebar-link">模板解析(resolve)配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#loaders配置" class="sidebar-link">loaders配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#静态资源路径配置" class="sidebar-link">静态资源路径配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#postcss-loader" class="sidebar-link">postcss-loader</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#px2rem-loader-移动端" class="sidebar-link">px2rem-loader（移动端）</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#svg-sprite-loader" class="sidebar-link">svg-sprite-loader</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#thread-loader" class="sidebar-link">thread-loader</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#文件分离及缓存优化" class="sidebar-link">文件分离及缓存优化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#entry-output" class="sidebar-link">entry&amp;output</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#js代码打包分离" class="sidebar-link">js代码打包分离</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#单独提取css文件" class="sidebar-link">单独提取css文件</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#压缩" class="sidebar-link">压缩</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#plugins-插件-配置" class="sidebar-link">plugins（插件）配置</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#自动清除构建目录产物" class="sidebar-link">自动清除构建目录产物</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#运行命令行时提示语优化" class="sidebar-link">运行命令行时提示语优化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#打包分析插件" class="sidebar-link">打包分析插件</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#启动速度优化" class="sidebar-link">启动速度优化</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#provideplugin" class="sidebar-link">ProvidePlugin</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#其他插件" class="sidebar-link">其他插件</a></li></ul></li><li><a href="/blog/skills/webpack/vue-use.html#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#treeing-shaking-摇树优化" class="sidebar-link">treeing shaking(摇树优化)</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#scope-hoisting" class="sidebar-link">Scope Hoisting</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#gitignore" class="sidebar-link">.gitignore</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#nodemon" class="sidebar-link">nodemon</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#webpack-merge" class="sidebar-link">webpack-merge</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#npmrc" class="sidebar-link">.npmrc</a></li><li class="sidebar-sub-header"><a href="/blog/skills/webpack/vue-use.html#babel插件配置-babelrc" class="sidebar-link">babel插件配置：.babelrc</a></li></ul></li><li><a href="/blog/skills/webpack/vue-use.html#备注" class="sidebar-link">备注</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/webpack/vue-use.html#问题" class="sidebar-link">问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/webpack/vue-use.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/skills/webpack/vue-use.html#个人记录" class="sidebar-link">个人记录</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/blog/categories/?category=skills" title="分类" data-v-0c557b5e>skills</a></li><li data-v-0c557b5e><a href="/blog/categories/?category=webpack" title="分类" data-v-0c557b5e>webpack</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>阿沐</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2021-05-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">vue+webpack从0到1搭建项目<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="vue-webpack从0到1搭建项目"><a href="#vue-webpack从0到1搭建项目" class="header-anchor">#</a> vue+webpack从0到1搭建项目</h1> <p>这是是我用 vue + webpack 搭建项目的学习记录~</p> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <ul><li><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue.js官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer">webpack官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>注：这里使用的vue版本是<code>v2.6.11</code>；webpack版本是<code>v4.42.1</code>；里面的配置模式主要适用于webpack版本为<code>v4.x.x</code>；</p></blockquote> <h2 id="开始"><a href="#开始" class="header-anchor">#</a> 开始</h2> <h3 id="安装node和npm-nvm"><a href="#安装node和npm-nvm" class="header-anchor">#</a> 安装node和npm,nvm</h3> <ul><li><strong>nvm</strong>：node版本管理工具，<a href="https://segmentfault.com/a/1190000007998600" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://nodejs.cn/download/" target="_blank" rel="noopener noreferrer">node<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>版本需在v8.x.x以上</li></ul> <blockquote><p>这一般在配置开发环境的时候都会安装，这里不再赘述~</p></blockquote> <h3 id="新建项目"><a href="#新建项目" class="header-anchor">#</a> 新建项目</h3> <p>Terminal输入以下命令，开始创建项目：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> vue-webpack-project <span class="token comment"># 创建项目</span>
<span class="token builtin class-name">cd</span> vue-webpack-project <span class="token comment"># 打开</span>
<span class="token function">npm</span> init -y    <span class="token comment"># 采用默认配置，初始化npm,生成package.json</span>
<span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli --save-dev  <span class="token comment"># 安装webpack,webapck4+已经开始使用webpack-cli</span>
<span class="token comment"># 或者：npm i webpack webpack-cli -D; </span>
<span class="token comment"># –save：模块名将被添加到dependencies(在生产环境中需要用到的依赖)，可以简化为参数-S。</span>
<span class="token comment"># –save-dev: 模块名将被添加到devDependencies(在开发、测试环境中用到的依赖)，可以简化为参数-D。</span>
./node_modules/.bin/webpack -v  <span class="token comment"># 查看是否安装成功,成功则出现版本号：4.x.x</span>
</code></pre></div><h3 id="webpack打包初体验"><a href="#webpack打包初体验" class="header-anchor">#</a> webpack打包初体验</h3> <ul><li>编辑器打开项目，根目录下新建<code>src/index.js</code>:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/index.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello webpack!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>首次打包</li></ul> <blockquote><p>终端输入以下命令打包：</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>./node_modules/.bin/webpack  <span class="token comment"># 运行打包命令</span>
</code></pre></div><p>运行之后会出现如下提示：</p> <img src="/blog/images/webpack/webpack001.png" width="auto" class="zoom-custom-imgs"> <blockquote><p>warning的意思是需要设定模式，如果不设定模式，默认为生产模式，生产模式是会压缩js代码；
项目里多了一个dist文件夹，webpack4在打包时默认入口文件为src目录下的index.js，输出地址为dist文件夹，文件为main.js</p></blockquote> <ul><li>项目根目录下新建<code>index.html</code>，引入打包生成的<code>main.js</code>，然后在浏览器打开，打开控制台，可以看到<code>src/index.js</code>中的内容</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>vue-webpack-project<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>简化打包命令</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> webpack
<span class="token punctuation">}</span>
</code></pre></div><p>然后在终端运行：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run build <span class="token comment"># 打包命令，执行的是和./node_modules/.bin/webpack一样的操作</span>
</code></pre></div><ul><li>新增webpack配置文件<code>build/webpack.dev.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// build/webpack.dev.js</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token comment">// 打包入口</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 输出</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">// 自定义打包后的文件名</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span> <span class="token comment">// 环境，设置之后打包就不会有warning了</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>修改build命令：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config build/webpack.dev.js&quot;</span> <span class="token comment">// 修改build命令</span>
    <span class="token comment">// webpack --progress --display-modules --display-reason --colors --config ...</span>
    <span class="token comment">// 打包时可添加其他参数：看到过程、显示模块、显示打包原因、看到颜色变化</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="安装vue"><a href="#安装vue" class="header-anchor">#</a> 安装vue</h3> <ul><li>安装</li></ul> <p><a href="https://vue-loader.vuejs.org/zh/guide/#%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i vue -S <span class="token comment"># 安装vue</span>
<span class="token function">npm</span> i vue-loader vue-template-compiler -D <span class="token comment"># 安装vue-loader和vue-template-compiler</span>
<span class="token comment"># vue-loader负责解析和转换.vue文件，提取出其中的逻辑代码script、样式代码style、以及HTML模版template,再分别把它们交给对应的Loader去处理</span>
<span class="token comment"># vue-template-compiler负责把vue-loader提取出的HTML模版编译成对应的可执行的JavaScript代码</span>

<span class="token comment"># ******安装样式loader******</span>
<span class="token function">npm</span> i css-loader style-loader vue-style-loader -D 
<span class="token comment"># css-loader：加载由 vue-loader 提取出的 CSS 代码，并转换成common.js对象</span>
<span class="token comment"># style-loader把css-loader解析好的样式通过&lt;style&gt;标签插入到head中</span>
<span class="token comment"># vue-style-loader功能和style-loader类似</span>

<span class="token comment"># ///// 以下选择性安装</span>
<span class="token comment"># 如果需要解析.less文件</span>
<span class="token function">npm</span> i <span class="token function">less</span> less-loader -D
<span class="token comment"># 如果需要解析sass/scss文件</span>
<span class="token function">npm</span> i sass-loader node-sass -D
<span class="token comment"># 如果需要解析.styl文件</span>
<span class="token function">npm</span> i stylus stylus-loader -D

<span class="token comment"># //////我选用less</span>
</code></pre></div><ul><li><p>打包初试</p> <ul><li>新建app.vue：<code>src/App.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>container<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>{{text}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">{</span>
                <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;hello vue+webpack&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=======created'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'======mounted'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>新建<code>styles/test/index.less</code>，修改<code>src/index.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./styles/test/index.less'</span><span class="token punctuation">;</span> <span class="token comment">// 引入样式</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span><span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span> <span class="token comment">// #root是已经在根目录下新建的index.html中外层div的id</span>
</code></pre></div><ul><li>修改<code>build/webpack.dev.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vue-loader/lib/plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引入</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 输出文件</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 输出目录</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">// 打包文件名称</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span> <span class="token comment">// 环境</span>
    <span class="token comment">// 配置module节点的目的,是为了在webpack遇到import、require等导入文件的语句是,能够选择合理的loader去处理这些文件.</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'vue-loader'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 它会应用到普通的 `.css` 文件</span>
            <span class="token comment">// 以及 `.vue` 文件中的 `&lt;style&gt;` 块</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 链式调用 从右到左，先用css-loader解析css,再传递给vue-style-loader</span>
                <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 它会应用到普通的 `.less` 文件</span>
            <span class="token comment">// 以及 `.vue` 文件中的 `&lt;style lang=&quot;less&quot;&gt;` 块</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'less-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 请确保引入这个插件!!!</span>
        <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>npm run build</code> 打包,浏览器打开<code>index.html</code>，看打开效果</li></ul></li></ul> <blockquote><p>附：<a href="https://www.jianshu.com/p/4f81f01389dd" target="_blank" rel="noopener noreferrer">path.resolve和path.join的区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <blockquote><p>第一次打包vue成功之后，接下来开始进行配置~</p></blockquote> <h3 id="基础配置"><a href="#基础配置" class="header-anchor">#</a> 基础配置</h3> <ul><li>配置环境之前，先熟悉几个webpack的命令~</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>webpack <span class="token comment">#最基本的启动webpack命令  默认会使用webpack.config.js</span>
webpack --config webpack.dev.js <span class="token comment"># 修改默认配置文件</span>
webpack -w <span class="token comment">#提供watch方法，实时进行打包更新</span>
webpack -p <span class="token comment">#对打包后的文件进行压缩</span>
webpack -d <span class="token comment">#提供SourceMaps，方便调试</span>
webpack --progress <span class="token comment">#输出内容带有进度</span>
webpack --colors <span class="token comment">#输出结果带彩色，比如：会用红色显示耗时较长的步骤</span>
webpack --profile <span class="token comment">#输出性能数据，可以看到每一步的耗时</span>
webpack --display-modules <span class="token comment">#默认情况下 node_modules 下的模块会被隐藏，加上这个参数可以显示这些被隐藏的模块</span>
</code></pre></div><h4 id="热更新配置"><a href="#热更新配置" class="header-anchor">#</a> 热更新配置</h4> <blockquote><p>配置文件提供一个入口（entry）和一个出口（output），webpack根据这个来进行 <strong>js 的打包和编译</strong>工作。虽然webpack提供了<code>webpack --watch</code>的命令来动态监听文件的改变并实时打包，输出新<code>bundle.js</code>文件；但这样文件多了之后打包速度会很慢，此外这样的打包方式不能做到<code>hot replace</code>，即每次webpack编译之后，你还需要手动刷新浏览器。</p></blockquote> <p>这时候webapck-dev-server就出现了~</p> <p><strong>webpack-dev-server</strong>主要是启动了一个使用express的<strong>Http服务器</strong>。它的作用主要是用来<strong>伺服资源文件</strong>。此外这个Http服务器和client使用了websocket通讯协议，原始文件作出改动后，webpack-dev-server会实时的编译，但是<strong>最后的编译的文件并没有输出到目标文件夹</strong>；</p> <blockquote><p>注意：你启动webpack-dev-server后，你在目标文件夹中是看不到编译后的文件的，<strong>实时编译后的文件都保存到了内存当中</strong>。</p></blockquote> <p>接下来开始操作吧~</p> <ol><li><strong>安装</strong></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i webpack-dev-server cross-env -D <span class="token comment"># 安装</span>
<span class="token comment"># cross-env是运行跨平台设置和使用环境变量的脚本，</span>
<span class="token comment"># 当您使用NODE_ENV =production, 来设置环境变量时，大多数Windows命令提示将会阻塞(报错)。</span>
<span class="token comment"># windows不支持NODE_ENV=development的设置方式。</span>
</code></pre></div><ul><li><a href="https://www.jianshu.com/p/e8ba0caa6247" target="_blank" rel="noopener noreferrer">cross-env使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>在不同平台，设置环境变量的方式不一样（如mac与windows）。使用cross-env，则可在不同平台执行同个语句来设置环境变量。webapck4.x它支持三种模式development、production、none。</p></blockquote> <ol start="2"><li><strong>修改配置文件</strong></li></ol> <p>复制<code>webpack.dev.js</code>，粘贴，命名为<code>webpack.prod.js</code>，之前里面配置的是打包命令；现在修改<code>webpack.dev.js</code>适用于开发环境~</p> <ul><li><a href="https://www.webpackjs.com/configuration/dev-server/" target="_blank" rel="noopener noreferrer">webpack中devServer配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.webpackjs.com/plugins/hot-module-replacement-plugin/" target="_blank" rel="noopener noreferrer">开发环境添加热更新<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// build/webpack.dev.js</span>

<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span><span class="token punctuation">.</span> <span class="token comment">// 中间省略掉不重要的代码</span>

<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">// dev环境</span>
<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 基础目录,告诉服务器从哪里提供内容,只有在你想要提供静态文件时才需要。</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 一切服务都启用gzip 压缩</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启热更新,启用 webpack 的模块热替换特性</span>
    <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token string">'errors-only'</span><span class="token punctuation">,</span> <span class="token comment">// 只在发生错误时输出</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token comment">// 指定一个host，默认是localhost;</span>
    <span class="token comment">// 如果希望别人通过ip访问，可设置host:'0.0.0.0'</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token comment">// 端口号 默认8080</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当使用 HTML5 History API 时，任意的 404 响应都可能需要被替代为 index.html,通常设置为true</span>
    <span class="token comment">// https: true, // 默认情况下，dev-server 通过 HTTP 提供服务。也可以选择带有 HTTPS 的 HTTP/2 提供服务：</span>
    <span class="token comment">// inline: true, // 默认情况下，应用程序启用内联模式(inline mode)。这意味着一段处理实时重载的脚本被插入到你的包(bundle)中，并且构建消息将会出现在浏览器控制台。</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 配置多个数组格式，单个则可以是对象格式</span>
        <span class="token punctuation">{</span> <span class="token comment">// 如果你有单独的后端 API，并且希望在同域名下发送 API 请求，可跨域代理</span>
            <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/api'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">,</span> <span class="token comment">// 如 /api/user/ 可代理到：https://www.baidu.com/api/user</span>
            <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 默认情况下，不接受运行在 HTTPS 上，且使用了无效证书的后端服务器。如果你想要接受，设为true</span>
            <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token comment">// 如果不想要/api，则可重写路径：https://www.baidu.com/user</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// 此路径下的打包文件可在浏览器中访问。</span>
    <span class="token comment">// 假设服务器运行在 http://localhost:8080 并且 output.filename 被设置为 bundle.js。默认 publicPath 是 &quot;/&quot;，所以你的包(bundle)可以通过 http://localhost:8080/bundle.js 访问。</span>
    <span class="token comment">// quiet: true, // 启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。</span>
    <span class="token comment">// stats: 'errors-only', // 只在发生错误时输出</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token operator">...</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 启动webpack自带的热替换模块，简称HMR</span>
        <span class="token comment">// 如果单独使用devServer，代码改变时会更新打包文件，然后reload刷新页面；HMR则只更新修改部分</span>
        <span class="token comment">// 永远不要在生产环境下启用 HMR!!!!!!</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="3"><li><strong>添加命令</strong></li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack-dev-server --progress --config build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config build/webpack.prod.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// </span>
</code></pre></div><p>然后<code>npm run dev</code>试一下~</p> <blockquote><p>结果不出意外地，没成功....浏览器自动打开页面，但没有渲染除页面....</p></blockquote> <ol start="4"><li><strong>安装<code>html-webpack-plugin</code></strong></li></ol> <blockquote><p>需要再安装一下<code>html-webpack-plugin</code>~</p></blockquote> <ul><li><a href="https://www.webpackjs.com/plugins/html-webpack-plugin/" target="_blank" rel="noopener noreferrer">HtmlWebpackPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/jantimon/html-webpack-plugin#configuration" target="_blank" rel="noopener noreferrer">配置参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/wonyun/p/6030090.html" target="_blank" rel="noopener noreferrer">参数详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>它可以生成创建html入口文件，比如单页面可以生成一个html文件入口，配置N个html-webpack-plugin可以生成N个页面入口；</p></blockquote> <blockquote><p>为html文件中引入的外部资源如script、link动态添加每次compile后的hash，防止引用缓存的外部文件问题。</p></blockquote> <ul><li>安装</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i html-webpack-plugin -D
</code></pre></div><ul><li>配置文件中引入~</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  build/webpack.dev.js</span>
<span class="token comment">// build/webpack.dev.js</span>
<span class="token comment">// 生产环境和开发环境均需要设置</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
modules<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
      
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token operator">...</span><span class="token punctuation">.</span>
         <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'vue-webpack-project'</span><span class="token punctuation">,</span>  <span class="token comment">// 设置页面title</span>
            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token comment">// 模板，相对根目录的路径，默认是：src/index.html，如果存在就打包这个模板，无则生成插件默认的html </span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token comment">// 指定打包出来文件名称</span>
            <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 为true则自动注入js、css</span>
            <span class="token literal-property property">chunksSortMode</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span> <span class="token comment">// 默认auto； 允许指定的thunk在插入到html文档前进行排序，none则不排序</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>npm run build</code>试一下~</li></ul> <blockquote><p>如果上面配置中<code>template</code>未设置或设置路径不存在，则会产生一个包含以下内容的文件 <code>dist/index.html</code>:</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index_bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="5"><li><strong>启动</strong></li></ol> <p>最后，<code>npm run dev</code>，浏览器会自动打开在devServer里面配置的地址，并渲染除<code>src/App.vue</code>的内容~</p> <blockquote><p>试试改一下代码文字或样式，回到浏览器，发现页面自动更新了，就说明热更新配置成功了~</p></blockquote> <ul><li><strong>Q：如何判断webpack的模块热替换是否生效？</strong></li></ul> <blockquote><p>如果HMR已生效，更改代码，回到浏览器，页面自动更新，但只是局部更新，并没有reload页面，且可以在控制后台发现这样一个js：</p></blockquote> <img src="/blog/images/webpack/webpack002.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>如果HMR未生效，则每次更改代码都是通过reload页面进行更新。</p></blockquote> <p>如果用<code>webpack-dev-server</code>运行，则会自动打开浏览器，文件正常运行，但是并没有打包生成的文件。原因是<code>webpack-dev-server</code>主要调试用，生成的文件是在内存内，想要实际文件需要<code>npm run build</code>才可以。</p> <h4 id="配置defineplugin"><a href="#配置defineplugin" class="header-anchor">#</a> 配置DefinePlugin</h4> <blockquote><p>DefinePlugin 允许创建一个在编译时可以配置的全局常量；这可能会对开发模式和生产模式的构建允许不同的行为非常有用。</p></blockquote> <ul><li><a href="https://www.webpackjs.com/plugins/define-plugin/" target="_blank" rel="noopener noreferrer">DefinePlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webapck.dev.js</span>
<span class="token comment">// webpack.prod.js</span>

<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token comment">/////作用：可以在全局调用变量来判断环境，变量为：process.env.NODE_ENV 返回结果为&quot;development&quot; or &quot;production&quot;(双引号不可省略)</span>
    <span class="token comment">// 也可以自定义一些全局环境变量</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">RUN_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">RUN_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="设置devtool"><a href="#设置devtool" class="header-anchor">#</a> 设置devtool</h4> <ul><li><a href="https://www.webpackjs.com/configuration/devtool/" target="_blank" rel="noopener noreferrer">webpack中devtool配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000020213957" target="_blank" rel="noopener noreferrer">什么是soure map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>sourceMap就是一个文件，里面储存着位置信息；这个文件里保存的，是转换后代码的位置，和对应的转换前的位置。有了它，出错的时候，通过断点工具可以直接显示原始代码，而不是转换后的代码。</p></blockquote> <blockquote><p>开发环境开启，线上环境关闭(避免线上环境暴露代码)；线上排查问题可将sourcemap上传到监控系统。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>

<span class="token comment">// devtool:'eval', // 不单独生成.map文件</span>
<span class="token comment">// devtool:'cheap-source-map', // 只能定义行的信息，定位不到列的信息</span>
<span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">'source-map'</span> <span class="token comment">// 单独生成.map文件 可定位到源代码</span>
<span class="token comment">// devtool: 'cheap-module-eval-source-map', // 这是 &quot;cheap(低开销)&quot; 的 source map，因为它没有生成列映射(column mapping)，只是映射行数。</span>
</code></pre></div><p>可对比下添加前后的打包文件：</p> <ul><li>未添加<code>devtool</code>配置</li></ul> <img src="/blog/images/webpack/webpack003.jpeg" width="auto" class="zoom-custom-imgs"> <ul><li>添加配置：<code>devtool:'source-map'</code></li></ul> <img src="/blog/images/webpack/webpack004.jpeg" width="auto" class="zoom-custom-imgs"> <h3 id="babel配置"><a href="#babel配置" class="header-anchor">#</a> babel配置</h3> <blockquote><p>如今 ES6 语法在开发中已经非常普及，甚至也有许多开发人员用上了 ES7 或 ES8 语法。然而，浏览器对这些高级语法的支持性并不是非常好。因此为了让我们的新语法能在浏览器中都能顺利运行，Babel 应运而生。</p></blockquote> <p><strong>Babel是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而可以在现有环境执行，所以我们可以用ES6编写，而不用考虑环境支持的问题。</strong></p> <p>有些浏览器版本的发布早于ES6的定稿和发布，因此如果在编程中使用了ES6的新特性，而浏览器没有更新版本，或者新版本中没有对ES6的特性进行兼容，那么浏览器就会无法识别ES6代码，例如IE9根本看不懂代码写的let和const是什么东西？只能选择报错，这就是浏览器对ES6的兼容性问题。</p> <ul><li><a href="https://www.webpackjs.com/loaders/babel-loader/" target="_blank" rel="noopener noreferrer">webapck官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000017898866?utm_source=tag-newest" target="_blank" rel="noopener noreferrer">babel-loader详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000010468759" target="_blank" rel="noopener noreferrer">关于Babel配置项的这点事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ol><li><strong>安装</strong></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i babel-loader @babel/core @babel/preset-env -D
</code></pre></div><ol start="2"><li><strong>配置webpack.dev.js</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>

<span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token comment">// 它会应用到普通的 `.js` 文件</span>
      <span class="token comment">// 以及 `.vue` 文件中的 `&lt;script&gt;` 块</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 指定匹配规则</span>
            <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 不包含哪些文件</span>
            <span class="token comment">// include: [path.join(__dirname, '..', 'src')], // 包含哪些文件</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token comment">// a.数组引入</span>
                <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
            <span class="token comment">// use:{ // b.对象引入。 可在这里添加选项，也可以在根目录新建.babelrc文件写入配置</span>
            <span class="token comment">//     loader:'babel-loader', // 指定使用的loader名称</span>
            <span class="token comment">//     options:{ // 选项</span>
            <span class="token comment">//         presets:['@babel/preset-env']</span>
            <span class="token comment">//     }</span>
            <span class="token comment">// },</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><strong>配置.babelrc</strong></li></ol> <blockquote><p>项目根目录下新建<code>.babelrc</code>文件：</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// .babelrc文件需要的配置项主要有预设(presets)和插件(plugins)。</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 预设(presets)的作用是为babel安装指定的插件</span>
      <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将modules编译成commonjs</span>
        <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not ie &lt;= 8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器列表</span>
          <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;current&quot;</span> <span class="token comment">// 指定当前node版本</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><a href="https://www.jianshu.com/p/3881c9ee4497" target="_blank" rel="noopener noreferrer">.babelrc详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="4"><li><strong>安装Polyfill</strong></li></ol> <blockquote><p>首先了解一下polyfill~</p></blockquote> <p>Polyfill “腻子”（装修的时候，可以把缺损的地方填充抹平）。我们希望浏览器提供一些特性，但是没有，然后我们自己写一段代码来实现他，那这段代码就是补丁。</p> <p>Polyfill 是一块代码（通常是 Web 上的 JavaScript），<strong>用来为旧浏览器提供它没有原生支持的较新的功能。</strong></p> <p>Babel默认只转换新的JavaScript语法（syntax），如箭头函数等，而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如Object.assign）都不会转码；因此我们需要polyfill；</p> <p>因为这是一个 polyfill （它需要在源代码之前运行），我们需要让它成为一个 dependency（上线时的依赖）,而不是一个 devDependency（开发时的依赖）。</p> <ul><li><p><a href="https://www.cnblogs.com/Jeely/p/11231530.html" target="_blank" rel="noopener noreferrer">babel-polyfill的几种使用方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://segmentfault.com/a/1190000021188054" target="_blank" rel="noopener noreferrer">@babel/preset-env 与@babel/plugin-transform-runtime 使用及场景区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>安装</p></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i babel-polyfill -S <span class="token comment"># 一般SPA应用下载这个全局引入</span>
<span class="token function">npm</span> i core-js -S <span class="token comment"># 一般MPA下载这个按需加载</span>
<span class="token function">npm</span> i @babel/plugin-transform-runtime @babel/runtime -D
<span class="token comment"># npm i @babel/plugin-syntax-dynamic-import -D  # 引入异步懒加载插件</span>
</code></pre></div><ul><li>配置.babelrc：</li></ul> <blockquote><p>以下是完整版~</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// .babelrc文件需要的配置项主要有预设(presets)和插件(plugins)。</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 预设(presets)的作用是为babel安装指定的插件</span>
      <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将modules编译成commonjs</span>
        <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not ie &lt;= 8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器列表</span>
          <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;current&quot;</span> <span class="token comment">// 指定当前node版本</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debug&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认false 编译时是否去掉console.log</span>
        <span class="token comment">// a.不引入polyfill；默认，可在src/index.js入口直接引入babel-polyfill(常用于SPA应用配置)</span>
        <span class="token comment">// &quot;useBuiltIns&quot;: false,</span>
        <span class="token comment">// b.按需引用（常用于MPA应用）</span>
         <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 按需引入</span>
         <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// corejs版本号</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// presets是插件plugins的预设，也就是说直接需要不需要的插件一起引入，如果不想使用presets，可以单独使用plugins对某个功能进行单独的引入。另外，有一些方法是presets中不提供的，如果要使用就需要单独引用了</span>
    <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> 
       <span class="token comment">// &quot;@babel/plugin-transform-runtime&quot;, // 解决编译中产生的重复的工具函数，减小代码体积。</span>
       <span class="token comment">// &quot;@babel/plugin-syntax-dynamic-import&quot;, // 对一些组件进行懒加载</span>
       <span class="token comment">// &quot;transform-vue-jsx&quot; // 编译jsx文件</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>入口文件src/index.js中引入babel-polyfill（SPA项目）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'babel-polyfill'</span><span class="token punctuation">;</span> <span class="token comment">// 全局引入</span>
</code></pre></div><ul><li>最后，npm run dev试一下~</li></ul> <blockquote><p>发现打包后之前的箭头函数转换为es5语法，用到的新的API如Promise也引入了polyfill：</p></blockquote> <img src="/blog/images/webpack/webpack006.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>按需引入的一些es6 API的polyfill：</p></blockquote> <img src="/blog/images/webpack/webpack007.jpeg" width="auto" class="zoom-custom-imgs"> <h3 id="eslint配置"><a href="#eslint配置" class="header-anchor">#</a> eslint配置</h3> <blockquote><p>JavaScript 是一个动态的弱类型语言，在开发中比较容易出错。因为没有编译程序，为了寻找 JavaScript 代码错误通常需要在执行过程中不断调试。像 ESLint 这样的可以让程序员在编码的过程中发现问题而不是在执行的过程中。</p></blockquote> <p>ESLint 是一个开源的 JavaScript 代码检查工具，代码检查是一种静态的分析，常用于寻找有问题的模式或者代码，并且不依赖于具体的编码风格。对大多数编程语言来说都会有代码检查，一般来说编译程序会内置检查工具。</p> <ul><li><a href="http://eslint.cn/docs/about/" target="_blank" rel="noopener noreferrer">什么是eslint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ol><li><strong>安装</strong></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i eslint eslint-loader babel-eslint -D
<span class="token comment"># 首先，要使webpack支持eslint，就要安装 eslint-loader</span>
<span class="token comment"># 其次，要想webpack具有 eslint 的能力，就要安装eslint</span>

<span class="token comment"># eslint允许常规解析器，有一些babel语法没有被eslint支持。</span>
<span class="token comment"># 当使用这些插件时，你的代码要转换成eslint能够支持解析的代码格式。</span>
<span class="token comment"># babel-esLint: 一个对Babel解析器的包装，使其能够与 ESLint 兼容。</span>

<span class="token function">npm</span> i eslint-friendly-formatter -D <span class="token comment"># 可选</span>
<span class="token comment"># eslint-friendly-formatter：指定终端中输出eslint提示信息的格式。</span>

<span class="token comment"># ///接下来安装插件</span>
<span class="token function">npm</span> i eslint-plugin-vue -D 
<span class="token comment"># eslint-plugin-vue是vue官方eslint插件,检测vue语法，同时支持在 Vue 单文件组件的模板和脚本部分的代码校验。</span>

<span class="token comment"># 引入其他第三方插件</span>
<span class="token function">npm</span> i eslint-config-standard eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node eslint-plugin-html -D  
<span class="token comment"># eslint-config-standard：Standard标准，它是一些前端工程师自定的标准。</span>
<span class="token comment"># eslint-plugin-node（支持nodejs规则）</span>
<span class="token comment"># eslint-plugin-import（import语句规则）</span>
<span class="token comment"># eslint-plugin-html 该插件用于检查在写在vue script 标签中的代码</span>
</code></pre></div><p><a href="https://github.com/standard/standard/blob/master/docs/README-zhcn.md#install" target="_blank" rel="noopener noreferrer">standard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.npmjs.com/package/eslint-config-standard" target="_blank" rel="noopener noreferrer">eslint-config-standard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="2"><li><strong>配置webpack</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webapck.dev.js</span>
<span class="token comment">// webpack.prod.js</span>

<span class="token operator">...</span>
<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|vue)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 预处理eslint-loader规则</span>
    
        <span class="token comment">/////// eslint-loader规则必须要先于babel-loader规则</span>
        <span class="token comment">/////// 我们使用eslint-loader是为了对编译前的ES6语法进行检查，而不是对使用了babel编译后的语法进行检查。</span>
        <span class="token comment">//////// 所以在webpack中，eslint-loader规则要优先于babel-loader规则</span>
    
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 不包含</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定检查的目录</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 这里的配置项参数将会被传递到 eslint 的 CLIEngine </span>
            <span class="token literal-property property">formatter</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-friendly-formatter'</span><span class="token punctuation">)</span> <span class="token comment">// 指定错误报告的格式规范</span>
            <span class="token comment">// formatter默认是stylish，如果想用第三方的可以安装该插件，如上方的示例中的 eslint-friendly-formatter 。</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="3"><li><strong>配置eslint</strong></li></ol> <blockquote><p>ESlint 被设计为完全可配置的，这意味着你可以关闭每一个规则而只运行基本语法验证，或混合和匹配 ESLint 默认绑定的规则和你的自定义规则，以让 ESLint 更适合你的项目。</p></blockquote> <p>有两种主要的方式来配置 ESLint：</p> <ul><li>Configuration Comments - 使用 JavaScript 注释把配置信息直接嵌入到一个代码源文件中。</li> <li>Configuration Files - 使用 JavaScript、JSON 或者 YAML 文件为整个目录（处理你的主目录）和它的子目录指定配置信息。
<blockquote><p>可以配置一个独立的 .eslintrc.* 文件，或者直接在 package.json 文件里的 eslintConfig 字段指定配置，ESLint 会查找和自动读取它们，再者，你可以在命令行运行时指定一个任意的配置文件。</p></blockquote></li></ul> <p>这里我采用的是根目录下新建<code>.eslintrc.js</code>，进行配置~</p> <ul><li><a href="http://eslint.cn/docs/user-guide/configuring" target="_blank" rel="noopener noreferrer">eslint配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://eslint.cn/docs/rules/" target="_blank" rel="noopener noreferrer">.eslintrc规则配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 限定使用范围，当你想对一个项目的不同部分的使用不同配置，或当你希望别人能够直接使用 ESLint</span>
    <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 设置解析器选项</span>
        <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'babel-eslint'</span><span class="token punctuation">,</span> <span class="token comment">// 指定解析器，babel-eslint将不能被常规linter解析的代码转换为能被常规解析的代码</span>
        <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token comment">// 默认设置为 3，5（默认）， 你可以使用 6、7、8、9 或 10 来指定你想要使用的 ECMAScript 版本。</span>
        <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span> <span class="token comment">// 设置为 &quot;script&quot; (默认) 或 &quot;module&quot;（如果你的代码是 ECMAScript 模块)。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 指定代码运行的宿主环境</span>
        <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器环境中的全局变量。</span>
        <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//</span>
        <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// CommonJS 全局变量和 CommonJS 作用域 (用于 Browserify/WebPack 打包的只在浏览器中运行的代码)。</span>
        <span class="token literal-property property">es6</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 启用除了 modules 以外的所有 ECMAScript 6 特性（该选项会自动设置 ecmaVersion 解析器选项为 6）。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 指定eslint规范,我们可以使用eslint官方推荐的，也可以使用一些大公司提供的的，如：aribnb, google, standard。</span>
        <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span> <span class="token comment">// 导入eslint-plugin-vue的规范</span>
        <span class="token string">'standard'</span> <span class="token comment">// 引入standard规范</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// 引用第三方的插件</span>
    <span class="token comment">// 在配置文件里配置插件时，可以使用 plugins 关键字来存放插件名字的列表。插件名称可以省略 eslint-plugin- 前缀</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 定义一些比较个性化的规则</span>
    <span class="token comment">// 添加默认或第三库中没有的、覆盖默认或第三库的</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;indent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;warn&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;SwitchCase&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 强制使用一致的缩进:warn警告； 4个空格缩进；强制 switch 语句中的 case 子句1个缩进</span>
        
        <span class="token comment">// 强制使用一致的反勾号、双引号或单引号：error警告；要求尽可能地使用单引号；允许字符串使用反勾号``</span>
        <span class="token string-property property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;single&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;allowTemplateLiterals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token comment">// 要求或禁止使用分号代替 ASI (semi)：warn警告； 要求在语句末尾使用分号（默认）</span>
        <span class="token string-property property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;warn&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token comment">// 禁用debugger：生产环境error警告，开发环境保留</span>
        <span class="token string-property property">&quot;no-debugger&quot;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'error'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>

        <span class="token comment">// vue中自闭合标签：warn警告</span>
        <span class="token string-property property">&quot;vue/html-self-closing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;warn&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;html&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;void&quot;</span><span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;normal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;any&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token comment">// vue中script缩进：error警告；4个空格缩进；强制 switch 语句中的 case 子句1个缩进</span>
        <span class="token string-property property">&quot;vue/script-indent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;baseIndent&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;switchCase&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li><strong>过滤配置</strong></li></ol> <p>如果有需要跳过的文件、文件夹，根目录下新建<code>.eslintignore</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>/build/
/config/
/dist/
/docs/
/node_modules
</code></pre></div><ol start="5"><li><strong>添加命令</strong></li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
...
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js,.vue src&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 检查错误</span>
    <span class="token property">&quot;lint:fix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js,.vue src --fix&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 修复错误</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li><strong>执行</strong></li></ol> <p>最后，<code>npm run lint</code>试一下：</p> <img src="/blog/images/webpack/webpack101.png" width="auto" class="zoom-custom-imgs"> <blockquote><p>果不其然，有一堆warn和error警告~</p></blockquote> <p><code>npm run lint:fix</code>修复一下：</p> <img src="/blog/images/webpack/webpack102.png" width="auto" class="zoom-custom-imgs"> <blockquote><p>执行之后，src里面的大部分格式问题就被自动修复了，其他的就手动修复了~</p></blockquote> <h3 id="模板解析-resolve-配置"><a href="#模板解析-resolve-配置" class="header-anchor">#</a> 模板解析(resolve)配置</h3> <ul><li><strong>resolve</strong></li></ul> <blockquote><p>Webpack 在启动后会从配置的入口模块出发找出所有依赖的模块，Resolve 配置 Webpack 如何寻找模块所对应的文件。 Webpack 内置 JavaScript 模块化语法解析功能，默认会采用模块化标准里约定好的规则去寻找，但你也可以根据自己的需要修改默认的规则。</p></blockquote> <ul><li><strong>模块解析</strong></li></ul> <blockquote><p>resolver 是一个库(library)，用于帮助找到模块的绝对路径。</p></blockquote> <blockquote><p>所依赖的模块可以是来自应用程序代码或第三方的库。resolver帮助webpack找到 bundle 中需要引入的模块代码，这些代码在包含在每个 require/import 语句中。</p></blockquote> <blockquote><p>当打包模块时，webpack 使用 enhanced-resolve 来解析文件路径。</p></blockquote> <ul><li><strong>webpack的解析规则</strong> <ul><li>绝对路径：<code>import &quot;/home/me/file&quot;</code>;  由于我们已经取得文件的绝对路径，因此不需要进一步再做解析。</li> <li>相对路径：<code>import &quot;../src/file1&quot;</code>;    在 <code>import/require</code> 中给定的相对路径，会添加此上下文路径(context path)，以产生模块的绝对路径(absolute path)。</li> <li>模块路径：<code>import &quot;module/lib/file&quot;</code>;  模块将在 <code>resolve.modules</code> 中指定的所有目录内搜索。 你可以替换初始模块路径，此替换路径通过使用 <code>resolve.alias</code> 配置选项来创建一个别名。</li></ul></li></ul> <blockquote><p>一旦根据上述规则解析路径后，解析器(resolver)将检查路径是否指向文件或目录。如果路径指向一个文件：</p></blockquote> <ul><li>如果路径具有文件扩展名，则被直接将文件打包。</li> <li>否则，将使用 [resolve.extensions] 选项作为文件扩展名来解析，此选项告诉解析器在解析中能够接受哪些扩展名（例如 .js, .jsx）。</li></ul> <p><a href="https://www.webpackjs.com/configuration/resolve/" target="_blank" rel="noopener noreferrer">webpack官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://segmentfault.com/a/1190000013176083?utm_source=tag-newest" target="_blank" rel="noopener noreferrer">resolve讲解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li><strong>配置</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token comment">// webpack.prod.js</span>

<span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">/////配置模板解析resolve</span>
    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在导入语句没带文件后缀时，webpack会自动带上后缀去尝试访问文件是否存在。</span>
        <span class="token comment">// resolve.extensions用于配置在尝试过程中用到的后缀列表</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.scss'</span><span class="token punctuation">,</span> <span class="token string">'.css'</span><span class="token punctuation">,</span> <span class="token string">'.less'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// resolve.alias配置项通过别名来把原来导入路径映射成一个新的导入路径。</span>
            <span class="token comment">// 例：通过 import Button from '@/components/button' 导入时，被替换成：</span>
            <span class="token comment">// /Users/admin/my-code/self/byme/vue-webpack-project/src/components/button</span>
            <span class="token string-property property">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// $符号来缩小范围只命中以关键字结尾的导入语句</span>
            <span class="token comment">// 例：通过 import Vue from 'vue' 导入时，被替换成：import Vue from 'vue/dist/vue.esm.js'</span>
            <span class="token string-property property">'vue$'</span><span class="token operator">:</span> <span class="token string">'vue/dist/vue.esm.js'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// resolve.modules配置webpack去哪些目录下寻找第三方模块。默认是去node_modules目录下寻找。</span>
        <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><strong>修改</strong></li></ol> <p>配置完后，把项目中导入的模块替换成<code>@</code>，然后<code>npm run dev</code>试一下~</p> <img src="/blog/images/webpack/webpack008.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>可以看到，项目中通过<code>@</code>别名引入的模块打包后编译为相对路径了</p></blockquote> <h3 id="loaders配置"><a href="#loaders配置" class="header-anchor">#</a> loaders配置</h3> <blockquote><p>webpack 可以使用 loader 来预处理文件。这允许你打包除 JavaScript 之外的任何静态资源。</p></blockquote> <p>loader 用于<strong>对模块的源代码进行转换</strong>，loader 可以使你在 import 或&quot;加载&quot;模块时预处理文件。</p> <p>vue-loader和css-loader已经配置好了，接下来配置其他loader~</p> <ul><li><a href="https://www.webpackjs.com/concepts/loaders/" target="_blank" rel="noopener noreferrer">webpack-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="静态资源路径配置"><a href="#静态资源路径配置" class="header-anchor">#</a> 静态资源路径配置</h4> <blockquote><p>图片、音频、视频、字体资源，静态资源路径配置~</p></blockquote> <ul><li><p><a href="https://www.webpackjs.com/loaders/file-loader/" target="_blank" rel="noopener noreferrer">file-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.cnblogs.com/fly_dragon/p/8715438.html" target="_blank" rel="noopener noreferrer">path模块详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.jianshu.com/p/3429cd456982" target="_blank" rel="noopener noreferrer">url-loader处理css中的图片资源遇到的问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>安装</p></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i url-loader file-loader -D <span class="token comment"># 安装</span>
<span class="token comment"># url-loader功能和file-loader类似，其内部也是用了file-loader,可以设置最小资源自动base64</span>
<span class="token comment"># url-loader对未设置或者小于limit设置的图片进行转换，以base64的格式被img的src所使用；</span>
<span class="token comment"># 而对于大于limit byte的图片用file-loader进行解析。</span>
<span class="token comment"># 对于比较小的图片，使用base64编码，可以减少一次图片的网络请求；</span>
</code></pre></div><ul><li>配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//////配置</span>
<span class="token comment">// webpack.dev.js</span>

<span class="token comment">// modules/rules 中添加</span>
<span class="token operator">...</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|bmp|webp|svg)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 图片解析 url-loader</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">10240</span><span class="token punctuation">,</span>
                <span class="token comment">// 字节数,意味着当图片大小小于10k的话，打包时会进行base64转换</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'static'</span><span class="token punctuation">,</span> <span class="token string">'images/[name].[hash:7].[ext]'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token comment">// path.posix.join(a,b): a/b  连接多个路径，pasix兼容不同系统</span>
                <span class="token comment">// [name]为文件名，[hash:7]为添加图片文件指纹hash值,7位，[ext]为资源后缀名</span>
                <span class="token comment">// name所指路径其实是相对于dist文件夹的路径，打包后，会生成dist/static/images/[name]...图片文件，</span>
                <span class="token comment">// 打包时会把项目中的图片文件路径url替换成上面配置的name内容，即：static/iamges/[name]...</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre></div><ul><li><code>npm run dev</code> 运行</li></ul> <p>运行后看下图片资源路径的变化~</p> <blockquote><p>项目中引入的图片资源路径：</p></blockquote> <img src="/blog/images/webpack/webpack103.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>本地跑起来后浏览器中图片的路径：</p></blockquote> <img src="/blog/images/webpack/webpack104.jpeg" width="auto" class="zoom-custom-imgs"> <ul><li>配置完图片loader后，继续添加视频、音频、字体等静态资源的处理，配置同图片资源</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 字体解析</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'static'</span><span class="token punctuation">,</span> <span class="token string">'fonts/[name].[hash:7].[ext]'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 打包后，会生成dist/static/fonts/[name]...字体文件，</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 视频、音频解析</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'static'</span><span class="token punctuation">,</span> <span class="token string">'medias/[name].[hash:7].[ext]'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 打包后，会生成dist/static/medias/[name]...字体文件</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>可引入字体和音频文件试一下~</p></blockquote> <p>以字体为例：</p> <ul><li>新建styles/commons/fonts.less，引入字体~</li></ul> <p><a href="https://www.runoob.com/cssref/css3-pr-font-face-rule.html" target="_blank" rel="noopener noreferrer">CSS3 @font-face 规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-css extra-class"><pre class="language-css"><code> <span class="token comment">/* Internet Explorer 9, Firefox, Opera,Chrome, 和 Safari支持@font-face 规则. */</span>
 <span class="token comment">/* 但是, Internet Explorer 9 只支持 .eot 类型的字体, Firefox, Chrome, Safari, 和 Opera 支持 .ttf 与.otf 两种类型字体. */</span>
 <span class="token comment">/* 注意： Internet Explorer 8 及更早IE版本不支持@font-face 规则. */</span>

<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> themify<span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~@/assets/fonts/themify.woff'</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>
        <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~@/assets/fonts/themify.ttf'</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>
        <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~@/assets/fonts/themify.eot'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span> // ie 9
    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> intelOne<span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'~@/assets/fonts/arial_rounded_bold.ttf'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>styles/test/index.less中引入：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">'~@/styles/commons/fonts.less'</span><span class="token punctuation">;</span></span>

<span class="token selector">....
.font-themify</span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> themify<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.font-intelOne</span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> intelOne<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
.....
 <span class="token comment">/* 直接引入class即可~ */</span>
</code></pre></div><h4 id="postcss-loader"><a href="#postcss-loader" class="header-anchor">#</a> postcss-loader</h4> <blockquote><p>postcss 一种对css编译的工具，类似babel对js的处理。常见功能有：<strong>自动补全浏览器前缀、使用下一代css语法</strong>等等</p></blockquote> <p>postcss 只是一个工具，本身不会对css操作，它通过插件实现功能，<strong>autoprefixer</strong> 就是其一。</p> <p><strong>与 less sass 的区别：</strong></p> <ul><li>less sass 是预处理器，用来支持扩充css语法；</li> <li>postcss 既不是 预处理器也不是 后处理器，其功能比较广泛，而且重要的一点是，postcss可以和less/sass结合使用。</li></ul> <blockquote><p>postcss 鼓励开发者使用规范的CSS原生语法编写源代码，支持未来的css语法，就像babel支持ES6。</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">PostCSS 的主要功能只有两个：</p> <ul><li>第一个就是前面提到的把 CSS 解析成 JavaScript 可以操作的抽象语法树结构（Abstract Syntax Tree，AST）；</li> <li>第二个就是调用插件来处理 AST 并得到结果。</li></ul></div> <blockquote><p>什么是postcss：<a href="https://www.jianshu.com/p/7646a8377138" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.jianshu.com/p/288963680642" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；<a href="https://segmentfault.com/a/1190000011595620" target="_blank" rel="noopener noreferrer">谈谈postcss<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><strong>autoprefixer</strong></li></ul> <blockquote><p>可通过PostCSS插件autoprefixer自动补齐css3前缀。</p></blockquote> <p>autoprefixer是css的后置处理器(打包之后进行处理)，sass、less是css的预处理器(在打包之前进行处理)。</p> <blockquote><p><a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">查看css属性哪些浏览器支持<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://cssnext.github.io/" target="_blank" rel="noopener noreferrer">cssnext<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">四大浏览器内核</p> <ol><li>Trident(-ms)：    ie浏览器</li> <li>Geko(-moz)：    火狐浏览器</li> <li>Webkit(-webkit)：  safari浏览器、chrome浏览器</li> <li>Presto(-o)：       Opera浏览器</li></ol></div> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i postcss-loader autoprefixer -D <span class="token comment"># 安装</span>
<span class="token comment"># autoprefixer：自动补齐css3前缀。</span>

<span class="token comment"># 可选安装</span>
<span class="token function">npm</span> i postcss-import postcss-cssnext -D
<span class="token comment"># postcss-import：使用postcss-import插件，遵循@import规则，你可以将reset.css样式合并到你的主样式表中，减少http请求。</span>
<span class="token comment"># cssnext：使用下个版本的css语法，语法见cssnext (css4)语法</span>
<span class="token comment"># postcss-px2rem：移动端适配</span>
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>

<span class="token operator">...</span>
<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'postcss-loader'</span> <span class="token comment">// 引入插件</span>
            <span class="token comment">// options:{ // autoprefixer的旧版本可以在此添加</span>
            <span class="token comment">//     plugins:() =&gt; {</span>
            <span class="token comment">//         require('autoprefixer')({ // 引入插件，自动给css3加前缀</span>
            <span class="token comment">//             overrideBrowserslist:['last 2 version','&gt;1%','ios 7'] // 指定兼容浏览器版本: 浏览器最近两个版本、使用人数&gt;1%、ios 7以上的版本</span>
            <span class="token comment">//         })</span>
            <span class="token comment">//     }</span>
            <span class="token comment">// }</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="3"><li>根目录下新建<code>postcss.config.js</code>文件</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 'postcss-import': {},</span>
      <span class="token comment">// 'postcss-cssnext': {},</span>
      <span class="token string-property property">'autoprefixer'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>根目录新建<code>.browserslistrc</code>文件，设置兼容版本</li></ol> <blockquote><p><code>browserslist</code>字段指定了项目的目标浏览器范围，会被 <code>@babel/preset-env</code> 和 <code>Autoprefixer</code> 用来确定需要转译的 JavaScript 特性和需要添加的 CSS 浏览器前缀。</p></blockquote> <p>可以在<code>package.json</code>中新加<code>browserslist</code>，设置兼容版本；或者在根目录下新建<code>.browserslistrc</code>，设置兼容版本</p> <p><a href="https://blog.csdn.net/good007boy/article/details/99627849" target="_blank" rel="noopener noreferrer">browserlist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol start="5"><li>最后，<code>npm run build</code>一下~</li></ol> <p>项目中的样式：</p> <img src="/blog/images/webpack/webpack105.jpeg" width="auto" class="zoom-custom-imgs"> <p>打包后的样式：</p> <img src="/blog/images/webpack/webpack106.jpeg" width="auto" class="zoom-custom-imgs"> <h4 id="px2rem-loader-移动端"><a href="#px2rem-loader-移动端" class="header-anchor">#</a> px2rem-loader（移动端）</h4> <blockquote><p>移动端设备css：px自动转换为rem；不同移动设备分辨率不同，前端需要进行页面适配。</p></blockquote> <ul><li>以前都是通过css<strong>媒体查询</strong>实现响应式布局：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span><span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span>800px<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
    <span class="token selector">.header</span><span class="token punctuation">{</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token comment">/* 缺点：需要写多套适配样式代码 */</span>
</code></pre></div><ul><li>现在使用<code>rem</code>实现响应式布局</li></ul> <blockquote><p>相对根元素字体大小。使用px2rem-loader(将px转换为rem)。</p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i px2rem-loader -D 
<span class="token function">npm</span> i lib-flexible -S <span class="token comment"># 作为依赖安装</span>
<span class="token comment"># 此插件需要直接引用,在页面打开需要此插件动态计算根元素font-size值，即1rem等于多少px</span>
<span class="token comment"># 也可以安装 amfe-flexible</span>
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token operator">...</span>
<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'postcss-loader'</span> <span class="token comment">// 引入插件</span>
            <span class="token comment">// options:{ // autoprefixer的旧版本可以在此添加</span>
            <span class="token comment">//     plugins:() =&gt; {</span>
            <span class="token comment">//         require('autoprefixer')({ // 引入插件，自动给css3加前缀</span>
            <span class="token comment">//             overrideBrowserslist:['last 2 version','&gt;1%','ios 7'] // 指定兼容浏览器版本: 浏览器最近两个版本、使用人数&gt;1%、ios 7以上的版本</span>
            <span class="token comment">//         })</span>
            <span class="token comment">//     }</span>
            <span class="token comment">// }</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'px2rem-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 引入插件，px转rem</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token comment">/**
                     // 1rem等于75px,以width为750px的设计稿为标准,
                     // 比如p标签内设置font-size为24px;当width为750px时，根元素font-size为37.5px;
                     // 第一步：打包的时候转为rem,24 / 75 = 0.32rem;
                     // 第二步：由lib-flexible动态计算得根元素font-size为37.5px，即该宽度下，1rem为37.5px;
                     // 第三步：计算p标签内字体展示大小：0.32 * 37.5 = 12px
                    **/</span>
                    <span class="token literal-property property">remUnit</span><span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">remPrecision</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token comment">// px转换为rem后的小数点位数</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
</code></pre></div><p>如果不想在<code>webpack.prod.js</code>中配置，也可以在<code>postcss.config.js</code>中配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-px2rem-exclude'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 引入，注：这里用的是postcss-px2rem-exclude</span>
      <span class="token literal-property property">remUnit</span><span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">,</span>
      <span class="token literal-property property">remPrecision</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>引入<code>flexible</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/index.js</span>
<span class="token keyword">import</span> <span class="token string">'lib-flexible'</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>入口<code>index.html</code>中修改<code>meta</code>标签</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ol start="5"><li>最后，<code>npm run dev</code>试一下~</li></ol> <img src="/blog/images/webpack/webpack107.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>跑起来后，切换到移动端模式，发现打包后的尺寸转换成了rem~且计算得该宽度下，<code>1rem</code>等于<code>41.4px</code></p></blockquote> <h4 id="svg-sprite-loader"><a href="#svg-sprite-loader" class="header-anchor">#</a> svg-sprite-loader</h4> <blockquote><p>在vue框架中想使用svg图片，就可以配置<code>svg-sprite-loader</code>~</p></blockquote> <p><a href="https://blog.csdn.net/weixin_34120274/article/details/91440129" target="_blank" rel="noopener noreferrer">配置参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> svg-sprite-loader -D
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token comment">// webpack.prod.js</span>
<span class="token operator">...</span>
<span class="token comment">// modules/rules中添加配置：</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'svg-sprite-loader'</span><span class="token punctuation">,</span> <span class="token comment">// svg 配置</span>
    <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src/assets/svg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">symbolId</span><span class="token operator">:</span> <span class="token string">'icon-[name]'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|bmp|webp|svg)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src/assets/svg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 然后修改 url-loader 配置</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> utils<span class="token punctuation">.</span><span class="token function">assetsPath</span><span class="token punctuation">(</span><span class="token string">'images/[name].[hash:7].[ext]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="3"><li><code>src/components</code>中创建公共组件：<code>svg-icon</code>：</li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>svgClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name">:xlink:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/**
 * svg 图标组件
 * iconClass=&quot;图标名称&quot;
 * className=&quot;风格名称&quot;
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'svg-icon'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">iconClass</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">iconName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#icon-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconClass<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">svgClass</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'svg-icon '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>className<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'svg-icon'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.svg-icon</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>并在根目录下<code>index.js</code>中全局注册：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> SvgIcon <span class="token keyword">from</span> <span class="token string">'@/components/SvgIcon'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'svg-icon'</span><span class="token punctuation">,</span> SvgIcon<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>创建svg文件目录：<code>/src/assets/svg/</code>，里面放置所有svg文件；并创建<code>/src/assets/index.js</code>，自动导入所有的svg文件：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">///src/assets/index.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">requireAll</span> <span class="token operator">=</span> <span class="token parameter">requireContext</span> <span class="token operator">=&gt;</span> requireContext<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>requireContext<span class="token punctuation">)</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./svg'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token comment">// 自动导入同级的 svg/ 目录下所有以 .svg 结尾的文件</span>
<span class="token function">requireAll</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li>在根目录下<code>index.js</code>中引入：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'@/assets'</span><span class="token punctuation">;</span><span class="token comment">// 引入svg</span>
</code></pre></div><ol start="6"><li>最后，在代码中使用：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">icon-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon-transaction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- icon-transaction为svg文件名 --&gt;</span>
</code></pre></div><h4 id="thread-loader"><a href="#thread-loader" class="header-anchor">#</a> thread-loader</h4> <blockquote><p>多进程打包构建</p></blockquote> <h3 id="文件分离及缓存优化"><a href="#文件分离及缓存优化" class="header-anchor">#</a> 文件分离及缓存优化</h3> <blockquote><p>在配置之前，先熟悉几个概念~</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">module、chunk、bundle</p> <ul><li><strong>module</strong>：对于一份同逻辑的代码，当我们手写下一个一个的文件，它们无论是 ESM 还是 commonJS 或是 AMD，他们都是 module ；</li> <li><strong>chunk</strong>：当我们写的 module 源文件传到 webpack 进行打包时，webpack 会根据<strong>文件引用关系</strong>生成 chunk 文件，webpack 会对这个 chunk 文件进行一些操作；</li> <li><strong>bundle</strong>：webpack 处理好 chunk 文件后，最后会<strong>输出 bundle 文件</strong>，这个 bundle 文件包含了经过加载和编译的最终源文件，所以它可以直接在浏览器中运行。</li></ul></div> <p>module，chunk 和 bundle 其实就是同一份逻辑代码在不同转换场景下的取了三个名字；</p> <p><strong>我们直接写出来的是 module，webpack 处理时是 chunk，最后生成浏览器可以直接运行的 bundle</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">hash、chunkhash、contenthash</p> <ul><li><strong>hash</strong>：hash 是跟整个 webpack 构建项目相关的，每次项目构建 hash 对应的值都是不同的，即使项目文件没有做“任何修改”；
<ul><li><strong>同一次构建过程中生成的hash都是一样的，只要项目里有文件更改，整个项目构建的 hash 值都会更改</strong>。类似于指纹、签名。</li> <li>如果出口是hash，那么一旦针对项目中任何一个文件的修改，都会构建整个项目，重新获取hash值，缓存的目的将失效。</li></ul></li> <li><strong>chunkhash</strong>：跟 webpack 打包的 chunk 相关，具体来说webpack是根据入口 entry 配置文件来分析其依赖项并由此来构建该 entry 的 chunk，并生成对应的 hash 值；不同的 chunk 会有不同的 hash 值。
<ul><li><strong>一般在项目中把公共的依赖库和程序入口文件隔离并进行单独打包构建，用 chunkhash 来生成 hash 值，只要依赖公共库不变，那么其对应的 chunkhash 就不会变，从而达到缓存的目的</strong>。
这样又有个问题：</li></ul> <blockquote><p>由于采用 chunkhash ，所以项目主入口文件 main.js 及其对应的依赖文件 main.css 由于被打包在同一个模块，所以共用相同的chunkhash。只要对应css或则js改变，与其关联的文件hash值也会改变，但其内容并没有改变，所以没有达到缓存意义。</p></blockquote></li> <li><strong>contenthash</strong>：表示由文件内容产生的hash值，内容不同产生的contenthash值也不一样。在项目中，通常做法是把项目中css都抽离出对应的css文件来加以引用。所以css文件最好使用contenthash。</li></ul></div> <p>需要注意的是：</p> <ul><li>chunkhash 无法和热更新（HotModuleReplacementPlugin）一起使用；建议在生成环境使用，开发环境会增加编译时间；</li> <li>img和font等资源中，使用 chunkhash 会报错,所以img等资源还是用hash还添加资源指纹~但，此hash非webpack每次项目构建的hash，它是由file-loader根据文件内容计算出来的，不要误认为是webpack构建的hash!!!!!</li></ul> <p><a href="https://blog.csdn.net/wsyzxxn9/article/details/90677770" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.jianshu.com/p/b83f4a046399" target="_blank" rel="noopener noreferrer">webpack hash哈希值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/heyushuo/p/8543889.html" target="_blank" rel="noopener noreferrer">webpack中hash与chunkhash区别和需要注意的问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>接下来开始配置吧~</p> <h4 id="entry-output"><a href="#entry-output" class="header-anchor">#</a> entry&amp;output</h4> <ul><li>entry</li></ul> <blockquote><p>入口起点(entry point)指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</p></blockquote> <ul><li>output</li></ul> <blockquote><p>output 属性告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件，默认值为./dist。基本上，整个应用程序结构，都会被编译到你指定的输出路径的文件夹中。</p></blockquote> <p><a href="https://www.webpackjs.com/configuration/#%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">webpack官方配置参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.webpackjs.com/concepts/entry-points/" target="_blank" rel="noopener noreferrer">入口起点(entry points)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://webpack.docschina.org/configuration/output/" target="_blank" rel="noopener noreferrer">输出(output)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>配置</strong></p> <p><code>webpack.dev.js</code>中添加配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>

module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// entry 指定webpack打包入口文件 ,从入口文件开始，寻找依赖文件，一层层遍历，形成依赖树，最后打包生成文件</span>
    <span class="token comment">// 起点或是应用程序的起点入口。从这个起点开始，应用程序启动执行。如果传递一个数组，那么数组的每一项都会执行。</span>
    <span class="token comment">// 动态加载的模块不是入口起点。</span>
    <span class="token comment">// 简单规则：每个 HTML 页面都有一个入口起点。单页应用(SPA)：一个入口起点，多页应用(MPA)：多个入口起点。</span>
    <span class="token comment">// 命名：如果传入一个字符串或字符串数组，chunk 会被命名为 main。如果传入一个对象，则每个键(key)会是 chunk 的名称，该值描述了 chunk 的入口起点。</span>
    <span class="token comment">// entry: './src/index.js', // 单页面入口配置（简写形式）</span>
    <span class="token comment">// 同上</span>
    <span class="token comment">// entry: {</span>
    <span class="token comment">//     main: './src/index.js',</span>
    <span class="token comment">// },</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'vue-router'</span><span class="token punctuation">]</span> <span class="token comment">// 分离第三方库</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// output 告诉webpack如何将编译后的文件输出到磁盘</span>
    <span class="token comment">// 没有单多页面的区别，通过占位符确保文件名称唯一</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 输出文件</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 所有输出文件的目标路径，绝对路径</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token function">getPublicPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 输出解析文件的目录，url 相对于 HTML 页面</span>
        <span class="token comment">// path是webpack所有文件的输出的路径，必须是绝对路径，比如：output输出的js,url-loader解析的图片，HtmlWebpackPlugin生成的html文件，都会存放在以path为基础的目录下</span>
        <span class="token comment">// publicPath 并不会对生成文件的路径造成影响，主要是对你的页面里面引入的资源的路径做对应的补全，常见的就是css文件里面引入的图片</span>
        <span class="token comment">// “path”仅仅告诉Webpack结果存储在哪里，</span>
        <span class="token comment">// publicPath设置成相对路径后，相对路径是相对于build之后的index.html的。</span>


        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[hash:8].js'</span><span class="token punctuation">,</span>
        <span class="token comment">// 对应于 entry 里面的输入文件，经过webpack 打包后输出文件的文件名。</span>
        <span class="token comment">// </span>
        <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunk:8].js'</span><span class="token punctuation">,</span>
        <span class="token comment">// 指未被列在 entry 中，却又需要被打包出来的 chunk 文件的名称，一般是异步加载的文件。</span>
        <span class="token comment">// 如果没有配置chunkFilename，就会把 [name] 替换为 chunk 文件的 id 号，打包后会生成例如：1.bundle.js这种文件~</span>
        <span class="token comment">//////// 开发环境chunkhash不能和热更新一起用，所以不用chunkhash</span>

        <span class="token comment">// libraryTarget: 'umd',</span>
        <span class="token comment">// 将你的 library 暴露为所有的模块定义下都可运行的方式。它将在 CommonJS, AMD 环境下运行，或将模块导出到 global 下的变量。</span>
        <span class="token comment">// umdNamedDefine: true </span>
        <span class="token comment">// 当使用了 libraryTarget: &quot;umd&quot;,会对 UMD 的构建过程中的 AMD 模块进行命名。否则就使用匿名的 define。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>webpack.prod.js</code>中添加配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yargs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>argv<span class="token punctuation">;</span> <span class="token comment">// node工具：获取命令行参数</span>
<span class="token keyword">const</span> <span class="token function-variable function">getPublicPath</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'====argv'</span><span class="token punctuation">,</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> argv <span class="token operator">&amp;&amp;</span> argv<span class="token punctuation">.</span>publicPath<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/|http</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            url <span class="token operator">=</span> url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            url <span class="token operator">=</span> <span class="token string">'/'</span> <span class="token operator">+</span> url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        url <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'====url'</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件</span>
        <span class="token comment">// vendors: ['vue', 'vue-router'] // 分离第三方库  开发环境可通过splitChunks进行分离</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 输出文件</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 所有输出文件的目标路径，绝对路径</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token function">getPublicPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 输出解析文件的目录，url 相对于 HTML 页面</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'js/[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span> <span class="token comment">// 中括号中name为占位符 chunkhash添加js指纹</span>
        <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>参考</strong>：</p> <ul><li><a href="https://blog.csdn.net/qq_39207948/article/details/80631435" target="_blank" rel="noopener noreferrer">path和publicPath<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5ae9ae5e518825672f19b094?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">publicPath详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/pigcan/blog/issues/9" target="_blank" rel="noopener noreferrer">基于webpack的持久化缓存方案<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="js代码打包分离"><a href="#js代码打包分离" class="header-anchor">#</a> js代码打包分离</h4> <blockquote><p>在 webpack3 中我们使用 <code>webpack.optimize.CommonsChunkPlugin</code> 插件进行提取，webpack4 中我们可以直接使用 <code>optimization</code> 配置项进行配置</p></blockquote> <ol><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>

module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// 分块优化</span>
    <span class="token comment">// 主要就是根据不同的策略来分割打包出来的bundle。</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 2.分离第三方库</span>
        <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// chunks: 'all', // 同时分割同步和异步代码，它其实就是下面的配置</span>

            <span class="token comment">// a.webpack4本身默认配置</span>
            <span class="token comment">// cacheGroups: {</span>
            <span class="token comment">//     vendors: { // 第三方</span>
            <span class="token comment">//       test: /[\\/]node_modules[\\/]/,</span>
            <span class="token comment">//       priority: -10 // 优先级</span>
            <span class="token comment">//     },</span>
            <span class="token comment">//     default: { // default这一项表示默认的缓存组，包括其它共享模块，但大于30k的</span>
            <span class="token comment">//       minChunks: 2, // 最小引用次数</span>
            <span class="token comment">//       priority: -20,</span>
            <span class="token comment">//       reuseExistingChunk: true</span>
            <span class="token comment">//     }</span>
            <span class="token comment">//   },</span>

            <span class="token comment">// b.自定义配置</span>
            <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 为0则只要有引用就打包</span>
            <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 可以实现对文件模块的细粒度控制</span>
                <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 第三方库</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// node-modules里的第三方库</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span> <span class="token comment">// 提取出来，名字叫vendors</span>
                    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span> <span class="token comment">// 同时分割同步和异步代码</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">commons</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 打包entry入口中的公共模块</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'commons'</span><span class="token punctuation">,</span> <span class="token comment">// 名字叫commons</span>
                    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'js/[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// 只要引用次数达2次，即分离出来进行打包</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><code>npm run build</code>一下~</li></ol> <img src="/blog/images/webpack/webpack109.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>打包之后可看到js模块已经分离了~</p></blockquote> <p><strong>参考</strong></p> <ul><li><a href="https://webpack.docschina.org/configuration/optimization/#optimization-splitchunks" target="_blank" rel="noopener noreferrer">webpack_优化(Optimization)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/lvzhenbang/webpack-play/blob/master/doc/first/splitchunkplugin.md" target="_blank" rel="noopener noreferrer">SplitChunksPlugin介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000016623314" target="_blank" rel="noopener noreferrer">Webpack 4 教程 - 4. 使用SplitChunksPlugin插件进行代码分割<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/kwzm/p/10314438.html" target="_blank" rel="noopener noreferrer">理解webpack4.splitChunks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="单独提取css文件"><a href="#单独提取css文件" class="header-anchor">#</a> 单独提取css文件</h4> <blockquote><p>webpack3+版本一般使用 <code>extract-text-webpack-plugin</code>插件，4+版本使用 <code>mini-css-extract-plugin</code>新插件代替。</p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i mini-css-extract-plugin -D
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span> <span class="token comment">// 引入添加css指纹插件</span>

<span class="token operator">...</span><span class="token punctuation">.</span>

module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">//  在引入样式loader的地方把vue-style-loader替换成MiniCssExtractPlugin.loader，例：</span>
         <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 链式调用 从右到左，先用css-loader解析css,再传递给vue-style-loader</span>
            <span class="token comment">// 'vue-style-loader',</span>
            MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> 
            <span class="token comment">// 该插件不能与style-loader一起使用，因前者是把样式提取出来，而后者是把样式插入到header里面，功能互斥</span>
            <span class="token string">'css-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// css包分离，添加css指纹插件 [contenthash]</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'css/[name]_[contenthash:8].css'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><code>npm run build</code>一下~</li></ol> <img src="/blog/images/webpack/webpack201.jpeg" width="auto" class="zoom-custom-imgs"> <blockquote><p>打包之后，生成一个css文件，生成link标签，插入到head中~</p></blockquote> <p><strong>参考</strong></p> <ul><li><a href="https://www.jianshu.com/p/bf4cb3a67a3a" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin插件快速入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="压缩"><a href="#压缩" class="header-anchor">#</a> 压缩</h3> <blockquote><p>浏览器从服务器访问网页时获取的JavaScript，css资源都是文本形式的，文件越大网页加载时间越长。 为了提升网页加速速度和减少网络传输流量， 可以对这些资源进行压缩。 压缩的方法除了可以通过GIZP算法对文件压缩外，还可以对文本本身压缩。</p></blockquote> <ul><li>html压缩</li></ul> <blockquote><p><code>html-webpack-plugins</code>在打包<code>index.html</code>文件的时候会对html自动压缩。</p></blockquote> <ul><li>js压缩</li></ul> <blockquote><p>webpack3+一般使用<code>uglifyjs-webpack-plugin</code>插件进行压缩，v4+之后webpack内置了<code>uglifyjs-webpack.pugin</code>插件，mode为production是自动开发压缩。<a href="https://www.webpackjs.com/plugins/uglifyjs-webpack-plugin/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>css压缩</li></ul> <blockquote><p>使用<code>optimize-css-assets-webpack-plugin</code>进行压缩。<a href="https://www.jianshu.com/p/f8beef1d6148" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol><li>安装</li></ol> <blockquote><p><strong>cssnano</strong>：cssnano 将你的 CSS 文件做多方面的的优化，以确保最终生成的文件对生产环境来说体积是最小的。<a href="https://www.cssnano.cn/guides/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i optimize-css-assets-webpack-plugin cssnano -D
<span class="token comment"># cssnano：css处理器</span>
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugins <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span> <span class="token comment">// 引入css压缩插件</span>

<span class="token operator">...</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span>
         <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugins</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// css压缩</span>
            <span class="token literal-property property">assetNameRegExp</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token comment">// 于匹配需要优化或者压缩的资源名</span>
            <span class="token literal-property property">cssProcessor</span><span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span> <span class="token comment">// 依赖cssnano css处理器</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>运行</li></ol> <blockquote><p>最后npm run build试一下，会发现，打包后的css文件体积减小</p></blockquote> <h3 id="plugins-插件-配置"><a href="#plugins-插件-配置" class="header-anchor">#</a> plugins（插件）配置</h3> <p>我们还可以引入一些插件进行一些配置优化，这里罗列一些常用的plugin~</p> <h4 id="自动清除构建目录产物"><a href="#自动清除构建目录产物" class="header-anchor">#</a> 自动清除构建目录产物</h4> <blockquote><p><code>clean-webpack-plugin</code>：<a href="https://github.com/johnagan/clean-webpack-plugin#options-and-defaults-optional" target="_blank" rel="noopener noreferrer">github地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.jianshu.com/p/dd67a3b64b62" target="_blank" rel="noopener noreferrer">简介<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev clean-webpack-plugin
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 清理目录</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>最后，<code>npm run build</code>，这样每次打包之前就会自动删除<code>dist</code>文件了~</li></ol> <h4 id="运行命令行时提示语优化"><a href="#运行命令行时提示语优化" class="header-anchor">#</a> 运行命令行时提示语优化</h4> <blockquote><p><code>friendly-errors-webpack-plugin</code>：<a href="https://www.npmjs.com/package/friendly-errors-webpack-plugin" target="_blank" rel="noopener noreferrer">npm地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 安装</span>
<span class="token function">npm</span> <span class="token function">install</span> friendly-errors-webpack-plugin --save-dev
</code></pre></div><ol start="2"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token comment">// webpack.dev.js</span>

<span class="token keyword">const</span> FriendlyErrorsWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'friendly-errors-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">FriendlyErrorsWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>最后，<code>npm run build</code>跑一下试试~</li></ol> <h4 id="打包分析插件"><a href="#打包分析插件" class="header-anchor">#</a> 打包分析插件</h4> <blockquote><p>webpack-bundle-analyzer，打包体积分析工具。</p></blockquote> <ul><li><a href="https://www.cnblogs.com/hss-blog/p/10244315.html" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer打包文件分析工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.npmjs.com/package/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">npm地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <ol><li>安装</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 安装</span>
<span class="token function">npm</span> i webpack-bundle-analyzer -D
</code></pre></div><ol start="2"><li>添加命令</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">////package.json</span>
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analyze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm_config_report=true npm run build&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//////webpack.prod.js</span>
<span class="token comment">////修改下结构</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">//////引入打包体积分析</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_config_report<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin
    prodConfig<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// new BundleAnalyzerPlugin({...})可以配置参数</span>
<span class="token punctuation">}</span>
<span class="token comment">////////</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> prodConfig
</code></pre></div><ol start="4"><li>运行</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run analyze
<span class="token comment"># 运行成功后，默认在浏览器打开http://127.0.0.1:8888/</span>
</code></pre></div><ol start="5"><li>看到如下页面，即运行成功~</li></ol> <img src="/blog/images/webpack/webpack202.png" width="auto" class="zoom-custom-imgs"> <blockquote><p>可通过此图分析打包后的文件大小，优化代码体积~</p></blockquote> <h4 id="启动速度优化"><a href="#启动速度优化" class="header-anchor">#</a> 启动速度优化</h4> <blockquote><p><code>hard-source-webpack-plugin</code>：缓存，启动服务时提速。</p></blockquote> <p><code>hard-source-webpack-plugin</code>是webpack的插件，为模块提供中间缓存步骤。为了查看结果，您需要使用此插件运行webpack两次：第一次构建将花费正常的时间。第二次构建将显着加快（大概提升90%的构建速度）。</p> <p><a href="https://blog.csdn.net/mnhn456/article/details/82757834" target="_blank" rel="noopener noreferrer">配置参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1.安装</span>
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev hard<span class="token operator">-</span>source<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin


<span class="token comment">// 2.配置</span>
<span class="token keyword">const</span> HardSourceWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'hard-source-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// cacheDirectory是在高速缓存写入。默认情况下，将缓存存储在node_modules下的目录中，因此如 </span>
    <span class="token comment">// 果清除了node_modules，则缓存也是如此</span>
    <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token string">'node_modules/.cache/hard-source/[confighash]'</span><span class="token punctuation">,</span>
    <span class="token comment">// Either an absolute path or relative to webpack's options.context.</span>
    <span class="token comment">// Sets webpack's recordsPath if not already set.</span>
    <span class="token literal-property property">recordsPath</span><span class="token operator">:</span> <span class="token string">'node_modules/.cache/hard-source/[confighash]/records.json'</span><span class="token punctuation">,</span>
    <span class="token comment">// configHash在启动webpack实例时转换webpack配置，并用于cacheDirectory为不同的webpack配 </span>
    <span class="token comment">// 置构建不同的缓存</span>
    <span class="token function-variable function">configHash</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">webpackConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// node-object-hash on npm can be used to build this.</span>
       <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-object-hash'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sort</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>webpackConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 当加载器，插件，其他构建时脚本或其他动态依赖项发生更改时，hard-source需要替换缓存以确保输 </span>
    <span class="token comment">// 出正确。environmentHash被用来确定这一点。如果散列与先前的构建不同，则将使用新的缓存</span>
    <span class="token literal-property property">environmentHash</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token literal-property property">root</span><span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token literal-property property">directories</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'package-lock.json'</span><span class="token punctuation">,</span> <span class="token string">'yarn.lock'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>配置完成后，重新<code>npm run dev</code>试一下，发现在第二次的时候确实快了很多，它是把缓存放在了<code>dist</code>文件夹下面了~</p></blockquote> <h4 id="provideplugin"><a href="#provideplugin" class="header-anchor">#</a> ProvidePlugin</h4> <p><code>ProvidePlugin</code>是webpack提供的用于<strong>自动加载模块，而不必到处 import 或 require</strong>的插件。<a href="https://v4.webpack.docschina.org/plugins/provide-plugin" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>

<span class="token comment">// 语法</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">identifier</span><span class="token operator">:</span> <span class="token string">'module1'</span><span class="token punctuation">,</span>
        <span class="token comment">// identifier: ['module1', 'property1'],</span>
         <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>这就相当于在项目注册了一个全局变量，之后在项目中直接使用就可以，不用单独引用~</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#item'</span><span class="token punctuation">)</span> <span class="token comment">// 直接使用</span>
</code></pre></div><p><a href="https://segmentfault.com/a/1190000022509809" target="_blank" rel="noopener noreferrer">实用webpack插件之ProvidePlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="其他插件"><a href="#其他插件" class="header-anchor">#</a> 其他插件</h4> <blockquote><p>除了上面这些，当然还有很多其他的插件，这里先简单记录下，有些是使用比较简单，有些不是很了解；等以后有时间了再完善细节~</p></blockquote> <ol><li>分离文件插件（主要用于基础库的分离）：<code>html-webpack-externals-plugin</code></li> <li>拷贝静态文件：<code>copy-webpack-plugin</code></li> <li>图片压缩：<code>image-webpack-loader</code></li> <li>开启多进程 Loader 转换，提升打包效率：<code>happypack</code>；<a href="https://blog.csdn.net/u012987546/article/details/100775406" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>增强代码压缩，提升打包效率：<code>webpack-parallel-uglify-plugin</code>；<a href="https://www.cnblogs.com/tugenhua0707/p/9569762.html" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>多进程，多实例构建（资源并行解析）：<a href="https://www.npmjs.com/package/thread-loader" target="_blank" rel="noopener noreferrer">thread-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>抽离第三方模块：webpack内置的<code>DllPlugin DllReferencePlugin</code>；<a href="https://juejin.im/post/5cb36a3ef265da03a1581d6d#heading-56" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://juejin.im/post/5c3c55aa51882524b4073394#heading-7" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>给文件添加说明：webpack内置的<code>BannerPlugin</code></li> <li>预加载资源：<code>preload-webpack-plugin</code>，Preloading，Prefetching</li> <li>打包速度分析插件：<a href="https://www.npmjs.com/package/speed-measure-webpack-plugin" target="_blank" rel="noopener noreferrer">speed-measure-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>擦除无用的css: purgecss-webpack-plugin</li> <li>js压缩： <a href="https://webpack.docschina.org/plugins/terser-webpack-plugin/" target="_blank" rel="noopener noreferrer">terser-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <ul><li><a href="https://juejin.im/post/5de87444518825124c50cd36#heading-22" target="_blank" rel="noopener noreferrer">配置优化参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="treeing-shaking-摇树优化"><a href="#treeing-shaking-摇树优化" class="header-anchor">#</a> treeing shaking(摇树优化)</h3> <p>1个模块可能有多个方法，只要其中的某个方法使用到了，则整个文件都会被打到bundle里面去，tree shaking就是只把用到的方法打到bundle，没用到的方法会在uglify阶段被擦除掉。</p> <blockquote><p>根据webpack官网的提示，webpack2 支持 tree-shaking，需要修改配置文件，在.babelrc里设置modules:false即可；<strong>webpack 3 和 4 默认支持，production mode模式下默认开启</strong>。</p></blockquote> <p><a href="https://www.jianshu.com/p/cf930283d404" target="_blank" rel="noopener noreferrer">Webpack 之 treeShaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">特点</p> <ul><li>必须是es6的语法，CJS的方式不支持</li> <li>原理：
<ul><li>利用DCE进行代码消除。</li> <li>利用es6模块的特点：
<ol><li>只能作为模块顶层的语句出现</li> <li>import的模块名只能是字符串常量</li> <li>import binding 是 immutable(不变的)</li></ol></li></ul></li> <li><strong>代码擦除</strong>：通过静态分析，将没用的代码注释标记，在uglify阶段删除无用代码</li></ul></div> <ul><li><strong>DCE(dead code elimination)死码消除</strong></li></ul> <blockquote><p>DCE，即死码消除，编译器原理中，死码消除（Dead code elimination）是一种编译最优化技术，它的用途是移除对程序运行结果没有任何影响的代码。移除这类的代码有两种优点，不但可以减少程序的大小，还可以避免程序在运行中进行不相关的运算行为，减少它运行的时间。不会被运行到的代码（unreachable code）以及只会影响到无关程序运行结果的变量（Dead Variables），都是死码（Dead code）的范畴。</p></blockquote> <ul><li><strong>CJS(Common js)</strong></li></ul> <blockquote><p>CommonJS是nodejs也就是服务器端广泛使用的模块化机制。该规范的主要内容是，模块必须通过 module.exports 导出对外的变量或接口，通过 require() 来导入其他模块的输出到当前模块作用域中。</p></blockquote> <blockquote><p>CommonJS 中的模块加载是同步的, 不适合在浏览器中使用;</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 示例：</span>
<span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//code</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p><a href="https://juejin.im/post/5de87444518825124c50cd36#heading-33" target="_blank" rel="noopener noreferrer">配置问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="scope-hoisting"><a href="#scope-hoisting" class="header-anchor">#</a> Scope Hoisting</h3> <blockquote><p>Scope Hoisting 可以让 Webpack 打包出来的代码文件更小、运行的更快，它又译作 &quot;作用域提升&quot;，是在 Webpack3 中新推出的功能。</p></blockquote> <p><a href="https://segmentfault.com/a/1190000012600832" target="_blank" rel="noopener noreferrer">通过Scope Hoisting优化Webpack输出<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p><strong>未使用缺点：</strong></p> <ul><li>构建后的代码存在大量闭包代码</li> <li>大量的函数闭包包裹代码，导致体积增大(模块越多越明显)</li> <li>运行代码时创建的函数作用域变多，内存开销变大</li></ul></li> <li><p><strong>优点</strong>：通过<code>scope hoisting</code>可以减少函数声明代码和内存开销。</p></li> <li><p><strong>原理</strong>：分析出模块之间的依赖关系，尽可能的把打散的模块合并到一个函数中去，但前提是不能造成代码冗余。</p></li> <li><p><strong>使用：</strong></p></li></ul> <ol><li>由于 Scope Hoisting 需要分析出模块之间的依赖关系，因此源码必须采用 ES6 模块化语句，不然它将无法生效。</li> <li>webpack3需要手动引入:<code>new webpack.optimize.ModuleConcatenationPlugin()</code>；<strong>webpack4的<code>mode</code>为生产模式时默认自动开启</strong>。</li></ol> <h3 id="gitignore"><a href="#gitignore" class="header-anchor">#</a> .gitignore</h3> <p>.gitignore：添加不用上传到git上的文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 根目录下新建.gitignore文件</span>

<span class="token comment">// 添加不用上传到git上的文件路径</span>
<span class="token punctuation">.</span>DS_Store
node_modules<span class="token operator">/</span>
<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">dist</span><span class="token regex-delimiter">/</span></span>

<span class="token comment">///// 之后push代码到git上则不会提交上述的文件~</span>
</code></pre></div><h3 id="nodemon"><a href="#nodemon" class="header-anchor">#</a> nodemon</h3> <blockquote><p>实际工作中，当我们改修项目的配置文件时，需要重新启动服务。由于用习惯了webpack的hot热重载，因此也希望再修改config配置文件时项目能够自动重启，于是这里用到了nodemon</p></blockquote> <ul><li><a href="https://www.jianshu.com/p/7571a866a047" target="_blank" rel="noopener noreferrer">node自动重启项目工具nodemon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装</span>
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev nodemon


<span class="token comment">// 添加命令</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --progress --colors --inline --config webpack.dev.conf.js  &quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;startdev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon --watch webpack.dev.conf.js --exec  npm run dev &quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 启动</span>
npm run startdev
</code></pre></div><p>此时修改文件webpack.dev.conf.js，会运行npm run dev命令；nodemon默认监听项目目录内的所有文件变动。</p> <h3 id="webpack-merge"><a href="#webpack-merge" class="header-anchor">#</a> webpack-merge</h3> <p>webpack配置公共部分提取出来(webpack-merge)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装</span>
npm i webpack<span class="token operator">-</span>merge <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// 配置</span>
<span class="token comment">// webpack.base.js</span>
<span class="token comment">// 提取webpack.dev.js和webpack.prod.js中公共部分到这个文件</span>


<span class="token comment">// webpack.prod.js</span>

<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">///prod环境单独的配置</span>
    <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="npmrc"><a href="#npmrc" class="header-anchor">#</a> .npmrc</h3> <p>根目录下新建<code>.npmrc</code>文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token operator">=</span><span class="token boolean">false</span>  <span class="token comment">// 禁止生成package-lock.json文件</span>
</code></pre></div><p>对于要不要生成<code>package-lock.json</code>可以参考这篇文章：<a href="https://mp.weixin.qq.com/s/heg7oZRjTHKilE0R0e-nvw" target="_blank" rel="noopener noreferrer">package-lock.json的作用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="babel插件配置-babelrc"><a href="#babel插件配置-babelrc" class="header-anchor">#</a> babel插件配置：.babelrc</h3> <blockquote><p>当我们使用了JavaScript的一些新特性的时候，在类里面可以直接赋值，但是没有配置.babelrc时, webpack会报错</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// .babelrc</span>

<span class="token punctuation">{</span>
    <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not ie &lt;= 8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;current&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;@vue/babel-plugin-transform-vue-jsx&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//   https://www.jianshu.com/p/84553a7952fc</span>
      <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span> <span class="token comment">// es6的 class 新语法</span>
    <span class="token comment">//   https://blog.csdn.net/qq_41810005/article/details/108106704</span>
      <span class="token string">&quot;@babel/plugin-proposal-optional-chaining&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 可选链：a?.b?.c</span>
      <span class="token punctuation">[</span>
        <span class="token comment">// 参考链接：https://www.jianshu.com/p/87efabb6a333</span>
        <span class="token string">&quot;babel-plugin-import&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 对引入的第三方ui库按需加载~</span>
          <span class="token property">&quot;libraryName&quot;</span><span class="token operator">:</span><span class="token string">&quot;boss-ui-h5&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span><span class="token string">&quot;dist/es&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 表示从库的package.json的main入口；否则默认为lib文件夹</span>
          <span class="token comment">// &quot;camel2DashComponentName&quot;: false,  // default: true，将引入的组件名转化为&quot;-&quot;连接的文件名</span>
          <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// true 代表项目编译阶段对包的样式文件进行编译，压缩尺寸；为css则引入直接打包后的样式代码</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>
        <span class="token string">&quot;babel-plugin-import&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;libraryName&quot;</span><span class="token operator">:</span><span class="token string">&quot;vant&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;libraryDirectory&quot;</span><span class="token operator">:</span><span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;vant&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="备注"><a href="#备注" class="header-anchor">#</a> 备注</h2> <ol><li>虽然现在<code>vue3</code>已经出来了，webpack也已经更新到<code>v5+</code>版本了，但现在公司的大多数项目还是vue2+搭配webpack4+搭建项目，估计得等vue3的坑踩得差不多了才开始大面积使用吧~</li> <li>这里主要讲的是搭建<code>SPA</code>类项目的配置，关于<code>vue + webpack</code>搭建项目的完整配置信息有兴趣的可以看下我github上的项目<a href="https://github.com/verneyZhou/vue-webpack" target="_blank" rel="noopener noreferrer">vue-webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，里面包含<code>SPA</code>和<code>MPA</code>两类项目的搭建配置~</li></ol> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <ol><li>在使用<code>postcss-px2rem + px2rem-loader</code>配置时，出现<strong>vue中样式能够转换，.less文件中样式不能转换</strong>的问题？</li></ol> <blockquote><p>module/rules里面less文件的解析loader顺序有问题~</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 按照从右到左的顺序解析，应该是先用less-loader解析.less文件，然后再用postcss-loader和px2rem-loader进行解析~</span>

<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'vue-style-loader'</span><span class="token punctuation">,</span>
      <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
      <span class="token comment">// 'less-loader',</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'postcss-loader'</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'px2rem-loader'</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">remUnit</span><span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">,</span>
                <span class="token literal-property property">remPrecision</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token comment">// px转换为rem后的小数点位数</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'less-loader'</span> <span class="token comment">// 应该放在最后面</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>当然更好的方式是把配置信息写在<code>postcss.config.js</code>里面~</p> <ol start="2"><li>rule里面添加babel-loader，run build后通过异步（import）导入的模块没有单独打包成js文件？</li></ol> <blockquote><p>将import换成require.ensure再打包~</p></blockquote> <ol start="3"><li><code>npm run build</code>的时候报错：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>Error: SplitChunksPlugin: You are trying to <span class="token builtin class-name">set</span> a filename <span class="token keyword">for</span> a chunk <span class="token function">which</span> is <span class="token punctuation">(</span>also<span class="token punctuation">)</span> loaded on demand.
 The runtime can only handle loading of chunks <span class="token function">which</span> match the chunkFilename schema. Using a custom filename would fail at runtime. <span class="token punctuation">(</span>cache group: vendor<span class="token punctuation">)</span>
</code></pre></div><p>参考：<a href="https://segmentfault.com/a/1190000023050468" target="_blank" rel="noopener noreferrer">webpack4.X修改SplitChunksPlugin.vendors.filename报错<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>修改如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 第三方库</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
                    <span class="token comment">// filename: 'js/[name]_[hash:8].js',  // 把filename注释掉</span>
                    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="4"><li>项目中配置<code>eslint</code>代码规范后，自动保存时会进行自动修复，但新建一个项目，沿用相同的代码规范配置，自动保存并不生效？</li></ol> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ol><li><a href="https://www.webpackjs.com/configuration/#%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">webpack官方配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000014685887" target="_blank" rel="noopener noreferrer">Webpack 配置详解（含 4）——关注细节<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/lvzhenbang/webpack-play" target="_blank" rel="noopener noreferrer">github webpack-play<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5cede821f265da1bbd4b5630" target="_blank" rel="noopener noreferrer">webpack中容易混淆的知识点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5cb36a3ef265da03a1581d6d#heading-45" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/qq_39953537/article/details/89029868" target="_blank" rel="noopener noreferrer">Javascript如何与Sass,Less,Css之间共享变量<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="个人记录"><a href="#个人记录" class="header-anchor">#</a> 个人记录</h2> <blockquote><p>这部分是我在搭建过程中的问题记录，可以忽略~</p></blockquote> <ol><li>打包资源路径404问题？publicPath？</li></ol> <blockquote><p>devServer  loader  output  plugins配置里的publicPath有什么区别</p></blockquote> <ol start="2"><li><p>vue-loader配置?</p></li> <li><p>babel 异步懒加载 <code>@babel/plugin-syntax-dynamic-import</code>？<code>core-js</code>与<code>babel-polyfill</code>?</p></li> <li><p>new webpack.HashedModuleIdsPlugin()</p></li> <li><p>thread-loader</p></li> <li><p>historyApiFallback</p></li></ol> <a href="/skills/webpack/" class="fix-link" data-v-84d70020>Back</a></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blog/tags/?tag=vue" title="标签">#vue</a><a href="/blog/tags/?tag=webpack" title="标签">#webpack</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/1/2022, 3:52:40 PM</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/more/github-actions.html"><div>
            Github Actions自动部署
            <!----></div></a> <span class="date">09-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/project/mono-react-project.html"><div>
            MonoRepo——React项目实践
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/more/jenkins-deploy.html"><div>
            Jenkins前端自动化部署
            <!----></div></a> <span class="date">08-10</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>一苇 | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal"><img src="/blog/images/icp.png" width="20" height="20" alt="公网备案"/>京ICP备2021006935号-2</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><!----><div></div></div></div>
    <script src="/blog/assets/js/app.07c9fec8.js" defer></script><script src="/blog/assets/js/3.a2a245ac.js" defer></script><script src="/blog/assets/js/153.93a9317a.js" defer></script><script src="/blog/assets/js/4.245b4373.js" defer></script>
  </body>
</html>

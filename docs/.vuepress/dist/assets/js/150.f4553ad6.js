(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{744:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webpack4迁移webpack5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack4迁移webpack5"}},[t._v("#")]),t._v(" webpack4迁移webpack5")]),t._v(" "),a("h2",{attrs:{id:"准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[t._v("#")]),t._v(" 准备")]),t._v(" "),a("ul",[a("li",[t._v("当前项目"),a("code",[t._v("webpack")]),t._v("版本为 "),a("code",[t._v("v4.29.6")]),t._v("，"),a("code",[t._v("webpack-cli")]),t._v("为 "),a("code",[t._v("v3.3.0")])]),t._v(" "),a("li",[a("code",[t._v("vue")]),t._v("版本仍然还是"),a("code",[t._v("v2")]),t._v("，"),a("code",[t._v("vue3")]),t._v("的"),a("code",[t._v("webpack")]),t._v("配置，不在这篇博文里讨论~")])]),t._v(" "),a("h2",{attrs:{id:"升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级"}},[t._v("#")]),t._v(" 升级")]),t._v(" "),a("blockquote",[a("p",[t._v("为减少升级成本，这里有个工具可以一键升级~")])]),t._v(" "),a("h3",{attrs:{id:"一键迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键迁移"}},[t._v("#")]),t._v(" 一键迁移")]),t._v(" "),a("ol",[a("li",[t._v("安装工具："),a("code",[t._v("cnpm install -g npm-check-updates")]),t._v("；")]),t._v(" "),a("li",[t._v("项目根目录下执行命令："),a("code",[t._v("npm-check-updates")]),t._v("，检查更新：")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("boss-creator-web git:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature/editor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ✗ npm-check-updates\nChecking /Users/admin/work/boss-creator-web/package.json\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("74")]),t._v("/74 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("%\n \n@babel/core ^7.4.0 → ^7.15.8\n@babel/preset-env ^7.4.2 → ^7.15.8\n@vue/babel-preset-app ^3.6.0 → ^4.5.14\n@vue/test-utils ^1.0.0-beta.29 → ^1.2.2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nwebpack ^4.29.6 → ^5.59.1\nwebpack-bundle-analyzer ^3.7.0 → ^4.5.0\nwebpack-cli ^3.3.0 → ^4.9.1\nwebpack-dashboard ^3.3.3 → ^3.3.6\nwebpack-dev-server ^3.2.1 → ^4.3.1\nwebpack-merge ^4.2.1 → ^5.8.0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("检查完成后会输出 "),a("code",[t._v("packge.json")]),t._v(" 中插件当前版本和最新版本的对比，接下来输入 "),a("code",[t._v("ncu -u")]),t._v("，会看到 "),a("code",[t._v("package.json")]),t._v("中版本号已经更新为最新版了；")]),t._v(" "),a("li",[t._v("最后删除 "),a("code",[t._v("node_modules")]),t._v(" ，执行 "),a("code",[t._v("npm install")]),t._v("，安装~")])]),t._v(" "),a("h3",{attrs:{id:"升级-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级-2"}},[t._v("#")]),t._v(" 升级")]),t._v(" "),a("p",[t._v("安装完成后，先试下 "),a("code",[t._v("npm run build")]),t._v(" ，不出意外，应该是会报错的~")]),t._v(" "),a("p",[t._v("接下来挨个解决各个报错~")]),t._v(" "),a("h4",{attrs:{id:"插件报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件报错"}},[t._v("#")]),t._v(" 插件报错")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("HashedModuleIdsPlugin")]),t._v(" 插件报错,报错信息如下：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("TypeError: webpack.HashedModuleIdsPlugin is not a constructor\n")])])]),a("p",[a("code",[t._v("HashedModuleIdsPlugin")]),t._v(" 是 "),a("code",[t._v("webpack v4")]),t._v(" 提供的插件，会根据模块的相对路径生成一个四位数的"),a("code",[t._v("hash")]),t._v("作为模块"),a("code",[t._v("id")]),t._v("，"),a("code",[t._v("v4")]),t._v("中用法是：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.base.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HashedModuleIdsPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 选项……")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("v5 中用法为：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HashedModuleIdsPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Options...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("解决方法：")]),t._v(" 将配置文件中 v4 用法改为 v5 用法即可~")]),t._v(" "),a("blockquote",[a("p",[t._v("参考："),a("a",{attrs:{href:"https://v4.webpack.docschina.org/plugins/hashed-module-ids-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("hashed-module-ids-plugin v4用法"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://webpack.docschina.org/plugins/hashed-module-ids-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("hashed-module-ids-plugin v5用法"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("CleanWebpackPlugin")]),t._v(" 插件报错,报错信息为：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("TypeError: CleanWebpackPlugin is not a constructor\n")])])]),a("p",[t._v("这个也是插件升级引入方式的的改变造成的报错，该插件由 "),a("code",[t._v("v2.0.1")]),t._v(" 升级为了 "),a("code",[t._v("v4.0.0")]),t._v(" ，修改引入方式即可：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.prod.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const CleanWebpackPlugin = require('clean-webpack-plugin'); // 旧用法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CleanWebpackPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'clean-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新用法")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[a("code",[t._v("webpack-merge")]),t._v(" 插件报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("webpack-cli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Failed to load "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/admin/work/boss-youle-web/build/webpack.config.prod.js'")]),t._v(" config\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("webpack-cli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" TypeError: merge is not a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\n")])])]),a("p",[a("code",[t._v("webpack-merge")]),t._v(" 由 "),a("code",[t._v("v4.2.1")]),t._v(" 升级到 "),a("code",[t._v("v.5.8.0")]),t._v("，引入方式也改变了，修改即可：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const merge = require('webpack-merge'); // 旧用法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-merge'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新用法")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("optimize-css-assets-webpack-plugin 插件警告：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node:3251"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("DEP_WEBPACK_COMPILATION_OPTIMIZE_CHUNK_ASSETS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" DeprecationWarning: optimizeChunkAssets is deprecated "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("use Compilation.hooks.processAssets instead and use one of Compilation.PROCESS_ASSETS_STAGE_* as stage option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("optimize-css-assets-webpack-plugin")]),t._v(" 在 "),a("code",[t._v("webpack4")]),t._v(" 主要是用来压缩"),a("code",[t._v("css")]),t._v("的插件，"),a("code",[t._v("webpack5")]),t._v(" 中则 可以通过 "),a("code",[t._v("css-minimizer-webpack-plugin")]),t._v(" 来替换：")]),t._v(" "),a("ol",[a("li",[t._v("安装："),a("code",[t._v("npm install css-minimizer-webpack-plugin --save-dev")])]),t._v(" "),a("li",[t._v("配置：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CssMinimizerPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-minimizer-webpack-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("optimization")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("minimize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发环境下启用 CSS 优化")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("minimizer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CssMinimizerPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("最后删掉 "),a("code",[t._v("optimize-css-assets-webpack-plugin")]),t._v(" 的使用即可~")])]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("mini-css-extract-plugin 警告：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("WARNING "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" chunk commons "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mini-css-extract-plugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nConflicting order. Following module has been added:\n")])])]),a("p",[t._v("可以通过将插件的 "),a("code",[t._v("ignoreOrder")]),t._v(" 选项设置为 "),a("code",[t._v("true")]),t._v(" 来禁用 "),a("code",[t._v("css order")]),t._v(" 警告：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.prod.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ignoreOrder")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("具体设置可"),a("a",{attrs:{href:"https://webpack.docschina.org/configuration/optimization/#optimizationnodeenv",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"配置优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置优化"}},[t._v("#")]),t._v(" 配置优化")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("optimization.splitChunks 报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n - configuration.optimization.splitChunks should be one of these:\n   "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" automaticNameDelimiter?, cacheGroups?, chunks?, defaultSizeTypes?, enforceSizeThreshold?, fallbackCacheGroup?, filename?, hidePathInfo?, maxAsyncRequests?, maxAsyncSize?, maxInitialRequests?, maxInitialSize?, maxSize?, minChunks?, minRemainingSize?, minSize?, name?, usedExports? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Optimize duplication and caching by splitting chunks by shared modules and cache group.\nconfiguration.optimization.splitChunks.name should be one of these:\n      "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\n")])])]),a("p",[a("code",[t._v("optimization.splitChunks.name")]),t._v(" 设置拆分"),a("code",[t._v("chunk")]),t._v("的名称，"),a("code",[t._v("webpack4")]),t._v(" 中设置为 "),a("code",[t._v("true")]),t._v(" 将自动生成基于块和缓存组键的名称；")]),t._v(" "),a("p",[t._v("但 "),a("code",[t._v("v5")]),t._v(" 中不能传 "),a("code",[t._v("true")]),t._v("，只能传 "),a("code",[t._v("false | string | function")]),t._v("；设为 "),a("code",[t._v("false")]),t._v(" 将保持 "),a("code",[t._v("chunk")]),t._v(" 的相同名称，因此不会不必要地更改名称。这是生产环境下构建的建议值。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.prod.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("optimization")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("splitChunks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//      name: true  // v4写法")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新写法，设置为false，或者注释掉也可以")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/plugins/split-chunks-plugin/#splitchunksname",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("DefinePlugin 警告：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("WARNING "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" DefinePlugin\nConflicting values "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'process.env.NODE_ENV'")]),t._v("\n")])])]),a("p",[a("code",[t._v("webpack5")]),t._v(" 中 "),a("code",[t._v("process.env.NODE_ENV")]),t._v(" 默认值取决于 "),a("code",[t._v("mode")]),t._v("，也可在 "),a("code",[t._v("optimization.nodeEnv")]),t._v(" 中设置；取消 "),a("code",[t._v("DefinePlugin")]),t._v(" 中的配置即可解除警告：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.base.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'process.env'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NODE_ENV: JSON.stringify(`${process.env.NODE_ENV}`), // webpack5中 process.env.NODE_ENV 默认值取决于 mode")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUBLIC_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicPath"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PATH_PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathPrefix"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUN_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUN_ENV")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("具体设置可参考"),a("a",{attrs:{href:"https://webpack.docschina.org/configuration/optimization/#optimizationnodeenv",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimization.nodeEnv"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("2021-11-20更新：不用注释，在脚本中添加"),a("code",[t._v("NODE_ENV")]),t._v("全局变量即可解除警告：")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cross-env NODE_ENV=development RUN_ENV=dev webpack serve --progress --config build/webpack.config.dev.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("hash 警告：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node:99549"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("DEP_WEBPACK_TEMPLATE_PATH_PLUGIN_REPLACE_PATH_VARIABLES_HASH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" DeprecationWarning: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" is now "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fullhash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("also consider using "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chunkhash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" or "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("contenthash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", see documentation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这个警告提示我们要把项目中之前在 "),a("code",[t._v("webpack4")]),t._v(" 中使用 "),a("code",[t._v("hash")]),t._v(" 配置的改成 "),a("code",[t._v("chunkhash")]),t._v(" 或者 "),a("code",[t._v("contenthash")]),t._v(" ， "),a("code",[t._v("webpack")]),t._v(" 的官方迁移指南里有说明：")]),t._v(" "),a("img",{staticClass:"zoom-custom-imgs",attrs:{src:t.$withBase("/images/webpack/webpack-v5.jpeg"),width:"auto"}}),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.prod.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPublicPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]_[chunkhash:8].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hash更改为 chunkhash or contenthash")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunkFilename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]_[chunkhash:8]_chunk.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("libraryTarget")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'umd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("umdNamedDefine")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("devtool 报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.\n - configuration.devtool should match pattern "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^(inline-|hidden-|eval-)?(nosources-)?(cheap-(module-)?)?source-map$"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n")])])]),a("p",[t._v("这是因为 "),a("code",[t._v("devtool")]),t._v(" 在 "),a("code",[t._v("webpack4")]),t._v(" 和 "),a("code",[t._v("webpack5")]),t._v(" 上也是有区别的，修改如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.dev.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// devtool: 'cheap-module-eval-source-map', // webpack4写法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devtool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eval-source-map'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack5写法")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("具体配置可"),a("a",{attrs:{href:"https://webpack.docschina.org/configuration/devtool/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("hard-source-webpack-plugin 报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("TypeError: Cannot "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" property "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tap'")]),t._v(" of undefined\n    at Object.exports.tap "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:118:25"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at new CacheSerializerFactory "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/lib/CacheSerializerFactory.js:94:18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    at HardSourceWebpackPlugin.apply "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Users/admin/work/boss-youle-web/node_modules/hard-source-webpack-plugin/index.js:219:36"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("在 "),a("code",[t._v("webpack4")]),t._v(" 的开发环境中，我们使用 "),a("code",[t._v("hard-source-webpack-plugin")]),t._v(" 来实现启动缓存，从而实现启动提速；但在 "),a("code",[t._v("webpack5")]),t._v(" 中内置了 "),a("code",[t._v("cache")]),t._v(" 缓存机制，直接配置即可，"),a("code",[t._v("hard-source-webpack-plugin")]),t._v(" 就直接被废弃掉了。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.dev.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将缓存类型设置为文件系统     ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filesystem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("buildDependencies")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("       \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 将你的 config 添加为 buildDependency，          \n               以便在改变 config 时获得缓存无效*/")]),t._v("       \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("__filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 如果有其他的东西被构建依赖，          \n               你可以在这里添加它们*/")]),t._v("       \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 注意，webpack.config，          \n               加载器和所有从你的配置中引用的模块都会被自动添加*/")]),t._v("     \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定缓存的版本     ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0'")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("cache 具体配置可"),a("a",{attrs:{href:"https://webpack.docschina.org/configuration/cache/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("devServer 报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Invalid options object. Dev Server has been initialized using an options object that does not match the API schema.\n - options has an unknown property "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'quiet'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" These properties are valid:\n   object "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" allowedHosts?, bonjour?, client?, compress?, devMiddleware?, headers?, historyApiFallback?, host?, hot?, http2?, https?, ipc?, liveReload?, magicHtml?, onAfterSetupMiddleware?, onBeforeSetupMiddleware?, onListening?, open?, port?, proxy?, setupExitSignals?, static?, watchFiles?, webSocketServer? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这是因为 "),a("code",[t._v("devServer")]),t._v(" 在 "),a("code",[t._v("webpack5")]),t._v(" 中的配置相较 "),a("code",[t._v("v4")]),t._v(" 有些变化，修改如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.dev.js")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contentBase: path.join(__dirname, 'dist'), // webpack4 写法")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("compress")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8098")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack5新增 static 字段，里面的 directory 替换原来 contentBase 的配置；publicPath 也放在了里面")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("directory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// publicPath: '/', // webpack4写法")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// quiet: true, // webpack5取消了这个参数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("具体配置参数可参考: "),a("a",{attrs:{href:"https://v4.webpack.docschina.org/configuration/dev-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("v4配置"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://webpack.docschina.org/configuration/dev-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("v5配置"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("还有一个地方需要注意的是, "),a("code",[t._v("webpack-cli4")]),t._v("之后执行脚本上有了变化：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cross-env RUN_ENV=dev webpack-dev-server --progress --config build/webpack.config.dev.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 旧写法")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cross-env RUN_ENV=dev webpack serve --progress --config build/webpack.config.dev.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新写法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"资源模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源模块"}},[t._v("#")]),t._v(" 资源模块")]),t._v(" "),a("blockquote",[a("p",[t._v("在 "),a("code",[t._v("webpack5")]),t._v(" 之前，加载图片、字体等资源需要我们使用 "),a("code",[t._v("url-loader、 file-loader")]),t._v(" 等来处理; 从 "),a("code",[t._v("webpack5")]),t._v(" 开始，我们可以使用内置的资源模块来替代这些 "),a("code",[t._v("loader")]),t._v(" 的工作。")])]),t._v(" "),a("p",[t._v("资源模块("),a("code",[t._v("asset module")]),t._v(")是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 "),a("code",[t._v("loader")]),t._v("。"),a("a",{attrs:{href:"https://webpack.docschina.org/guides/asset-modules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("以图片静态资源解析为例：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.base.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(png|jpe?g|gif|bmp|webp|svg)(\\?.*)?$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析图片等静态资源")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("not")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除来自新 URL 处理的 asset")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("exclude")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/assets/svg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// use: {")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     loader: 'url-loader',")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     options: {")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         limit: 1024, // 字节数,意味着当图片大小小于1k的话，打包时会进行base64转换")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         name: utils.assetsPath('images/[name].[hash:7].[ext]')")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     }")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// },")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asset/resource"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("generator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的 [ext] 扩展名通配符包含了 . ，我们不需要额外再写，跟之前的 loader 有所区别")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assetsPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'images/[name]_[hash:7][ext][query]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("h4",{attrs:{id:"其他问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他问题"}},[t._v("#")]),t._v(" 其他问题")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("eslint-loader 报错：")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ERROR "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ./src/main.js\nModule build failed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from ./node_modules/eslint-loader/index.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\nError: Cannot "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" module "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@eslint/eslintrc/universal'")]),t._v("\n")])])]),a("p",[t._v("升级后的版本不稳定，降至之前的稳定版本即可：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint相关插件退至升级前版本")]),t._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.16.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-config-standard"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^12.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-friendly-formatter"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-loader"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.1.2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.0.3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-import"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.16.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-node"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^8.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-promise"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-standard"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint-plugin-vue"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.2.2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("babel-eslint 报错")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ERROR "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ./src/plugins/global/video-player/index.vue\nModule build failed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from ./node_modules/_eslint-loader@2.2.1@eslint-loader/index.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\nTypeError: token.type.endsWith is not a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("\n")])])]),a("p",[t._v("原因同上，把 "),a("code",[t._v("babel-eslint")]),t._v(" 退至 "),a("code",[t._v("v8.2.6")]),t._v(" 稳定版即可~")]),t._v(" "),a("p",[t._v("以上就是我在升级过程中遇到的问题，都解决后，执行 "),a("code",[t._v("npm run dev")]),t._v("，成功启动；"),a("code",[t._v("npm run build")]),t._v("，成功打包~")]),t._v(" "),a("h2",{attrs:{id:"区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("devServer")]),t._v("的参数配置有变化")]),t._v(" "),a("li",[t._v("图片等静态资源的解析有变化，Webpack5 提供了内置的静态资源构建能力，我们不需要安装额外的 "),a("code",[t._v("loader（url-loader，file-loader，raw-loader）")])]),t._v(" "),a("li",[t._v("webpack5 中内置了 "),a("code",[t._v("Cache")]),t._v(" 来实现启动缓存，实现了二次构建的提速, v4 需要引入插件"),a("code",[t._v("hard-source-webpack-plugin")])]),t._v(" "),a("li",[t._v("js压缩："),a("code",[t._v("webpack v5")]),t._v(" 开箱即带有最新版本的 "),a("code",[t._v("terser-webpack-plugin")]),t._v("。如果希望自定义配置，那么仍需要安装 "),a("code",[t._v("terser-webpack-plugin")]),t._v("。v4 则必须安装 "),a("code",[t._v("terser-webpack-plugin v4")]),t._v(" 的版本")]),t._v(" "),a("li",[t._v("启动服务差别：v4 通过 "),a("code",[t._v("webpack-dev-server")]),t._v(" 启动服务，v5 内置使用 "),a("code",[t._v("webpack serve")]),t._v(" 启动")]),t._v(" "),a("li",[a("code",[t._v("tree-shaking")]),t._v("的优化："),a("code",[t._v("v5")]),t._v(" 能够处理对嵌套模块的 "),a("code",[t._v("tree shaking")]),t._v("，也能处理对 "),a("code",[t._v("Commonjs")]),t._v(" 的 "),a("code",[t._v("tree shaking")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/webpack/changelog-v5",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/webpack/changelog-v5"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/migrate/5/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack官方：从 v4 升级到 v5"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6924258563862822919",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack5 新特性业务落地实战"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6973607639502553095",target:"_blank",rel:"noopener noreferrer"}},[t._v("10分钟带你升级webpack5"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6991774994552324133",target:"_blank",rel:"noopener noreferrer"}},[t._v("学习 Webpack5 之路（实践篇）"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6996816316875161637",target:"_blank",rel:"noopener noreferrer"}},[t._v("学习 Webpack5 之路（优化篇）"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);